{
  "content": "FILE_EXPORT:{\"path\":\"src/refactor_modularize/utils.py\",\"size\":3538,\"encoding\":\"base64\",\"sha256\":\"2274326809f07ea93886f50ced2503dc330e3d714a068445b6fad9b8752622f3\",\"content\":\"IiIiU2hhcmVkIHV0aWxpdGllcyB1c2VkIGFjcm9zcyByZWZhY3Rvcl9tb2R1bGFyaXplLgoKSW5jbHVkZXMgaGVscGVycyBmb3IgcGF0aCBoYW5kbGluZywgaGFzaGluZyAoc2hhMjU2KSwgdGV4dCBkaWZmaW5nLCBhbmQKc2FmZSBmaWxlIElPIHdpdGggYXRvbWljIHdyaXRlcy4KIiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcwpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKZnJvbSB0eXBpbmcgaW1wb3J0IFVuaW9uCgppbXBvcnQgZGlmZmxpYgppbXBvcnQgaGFzaGxpYgppbXBvcnQgb3MKaW1wb3J0IHRlbXBmaWxlClBhdGhMaWtlID0gVW5pb25bc3RyLCBvcy5QYXRoTGlrZSwgUGF0aF0KZGVmIHRvX3BhdGgocDogUGF0aExpa2UpIC0+IFBhdGg6CiAgICAiIiJDb252ZXJ0IGEgcGF0aC1saWtlIGludG8gYSBQYXRoIChkb2VzIG5vdCByZXF1aXJlIGV4aXN0ZW5jZSkuIiIiCiAgICByZXR1cm4gcCBpZiBpc2luc3RhbmNlKHAsIFBhdGgpIGVsc2UgUGF0aChwKQoKCmRlZiBlbnN1cmVfcGFyZW50X2RpcihwYXRoOiBQYXRoTGlrZSkgLT4gUGF0aDoKICAgICIiIkVuc3VyZSBgcGF0aGAgcGFyZW50IGRpcmVjdG9yeSBleGlzdHM7IHJldHVybiBgcGF0aGAgYXMgUGF0aC4iIiIKICAgIHAgPSB0b19wYXRoKHBhdGgpCiAgICBwLnBhcmVudC5ta2RpcihwYXJlbnRzPVRydWUsIGV4aXN0X29rPVRydWUpCiAgICByZXR1cm4gcAoKCmRlZiByZWxwYXRoKHBhdGg6IFBhdGhMaWtlLCBzdGFydDogUGF0aExpa2UpIC0+IHN0cjoKICAgICIiIlJldHVybiBhIHN0YWJsZSBmb3J3YXJkLXNsYXNoIHJlbGF0aXZlIHBhdGggKGJlc3QtZWZmb3J0KS4iIiIKICAgIHAsIHMgPSB0b19wYXRoKHBhdGgpLCB0b19wYXRoKHN0YXJ0KQogICAgdHJ5OgogICAgICAgIHIgPSBwLnJlbGF0aXZlX3RvKHMpCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHIgPSBQYXRoKG9zLnBhdGgucmVscGF0aChvcy5mc3BhdGgocCksIG9zLmZzcGF0aChzKSkpCiAgICByZXR1cm4gci5hc19wb3NpeCgpCmRlZiBub3JtYWxpemVfbmV3bGluZXModGV4dDogc3RyKSAtPiBzdHI6CiAgICAiIiJOb3JtYWxpemUgQ1JMRi9DUiBuZXdsaW5lcyB0byBMRi4iIiIKICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoIlxyXG4iLCAiXG4iKS5yZXBsYWNlKCJcciIsICJcbiIpCgoKZGVmIHJlYWRfdGV4dChwYXRoOiBQYXRoTGlrZSwgZW5jb2Rpbmc6IHN0ciA9ICJ1dGYtOCIpIC0+IHN0cjoKICAgICIiIlJlYWQgYSB0ZXh0IGZpbGU7IG5vcm1hbGl6ZXMgbmV3bGluZXMgdG8gTEYuIiIiCiAgICByZXR1cm4gbm9ybWFsaXplX25ld2xpbmVzKHRvX3BhdGgocGF0aCkucmVhZF90ZXh0KGVuY29kaW5nPWVuY29kaW5nKSkKCgpkZWYgd3JpdGVfdGV4dF9hdG9taWMoCiAgICBwYXRoOiBQYXRoTGlrZSwKICAgIHRleHQ6IHN0ciwKICAgICosCiAgICBlbmNvZGluZzogc3RyID0gInV0Zi04IiwKICAgIG5ld2xpbmU6IHN0ciA9ICJcbiIsCikgLT4gTm9uZToKICAgICIiIkF0b21pY2FsbHkgd3JpdGUgdGV4dCB0byBgcGF0aGAgKHRlbXAgZmlsZSB0aGVuIG9zLnJlcGxhY2UpLiIiIgogICAgcCA9IGVuc3VyZV9wYXJlbnRfZGlyKHBhdGgpCiAgICBkYXRhID0gbm9ybWFsaXplX25ld2xpbmVzKHRleHQpCiAgICBpZiBuZXdsaW5lICE9ICJcbiI6CiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgiXG4iLCBuZXdsaW5lKQogICAgd2l0aCB0ZW1wZmlsZS5OYW1lZFRlbXBvcmFyeUZpbGUoCiAgICAgICAgInciLAogICAgICAgIGVuY29kaW5nPWVuY29kaW5nLAogICAgICAgIGRpcj1vcy5mc3BhdGgocC5wYXJlbnQpLAogICAgICAgIHByZWZpeD1mIi57cC5uYW1lfS4iLAogICAgICAgIHN1ZmZpeD0iLnRtcCIsCiAgICAgICAgZGVsZXRlPUZhbHNlLAogICAgICAgIG5ld2xpbmU9IiIsCiAgICApIGFzIHRmOgogICAgICAgIHRtcF9uYW1lID0gdGYubmFtZQogICAgICAgIHRmLndyaXRlKGRhdGEpCiAgICBvcy5yZXBsYWNlKHRtcF9uYW1lLCBvcy5mc3BhdGgocCkpCmRlZiBzaGEyNTZfYnl0ZXMoZGF0YTogYnl0ZXMpIC0+IHN0cjoKICAgICIiIkhleCBzaGEyNTYgZm9yIHJhdyBieXRlcy4iIiIKICAgIHJldHVybiBoYXNobGliLnNoYTI1NihkYXRhKS5oZXhkaWdlc3QoKQoKCmRlZiBzaGEyNTZfdGV4dCh0ZXh0OiBzdHIsIGVuY29kaW5nOiBzdHIgPSAidXRmLTgiKSAtPiBzdHI6CiAgICAiIiJIZXggc2hhMjU2IGZvciB0ZXh0IChhZnRlciBuZXdsaW5lIG5vcm1hbGl6YXRpb24pLiIiIgogICAgcmV0dXJuIHNoYTI1Nl9ieXRlcyhub3JtYWxpemVfbmV3bGluZXModGV4dCkuZW5jb2RlKGVuY29kaW5nKSkKCgpkZWYgc2hhMjU2X2ZpbGUocGF0aDogUGF0aExpa2UsIGNodW5rX3NpemU6IGludCA9IDEwMjQgKiAxMDI0KSAtPiBzdHI6CiAgICAiIiJIZXggc2hhMjU2IG9mIGEgZmlsZSAoYmluYXJ5IHJlYWQpLiIiIgogICAgaCA9IGhhc2hsaWIuc2hhMjU2KCkKICAgIHdpdGggb3Blbihvcy5mc3BhdGgodG9fcGF0aChwYXRoKSksICJyYiIpIGFzIGY6CiAgICAgICAgZm9yIGNodW5rIGluIGl0ZXIobGFtYmRhOiBmLnJlYWQoY2h1bmtfc2l6ZSksIGIiIik6CiAgICAgICAgICAgIGgudXBkYXRlKGNodW5rKQogICAgcmV0dXJuIGguaGV4ZGlnZXN0KCkKZGVmIHVuaWZpZWRfZGlmZigKICAgIGFfdGV4dDogc3RyLAogICAgYl90ZXh0OiBzdHIsCiAgICAqLAogICAgZnJvbWZpbGU6IHN0ciA9ICJhIiwKICAgIHRvZmlsZTogc3RyID0gImIiLAogICAgbGluZXRlcm06IHN0ciA9ICJcbiIsCikgLT4gc3RyOgogICAgIiIiUmV0dXJuIGEgdW5pZmllZCBkaWZmIHN0cmluZyBiZXR3ZWVuIHR3byB0ZXh0cyAobmV3bGluZS1ub3JtYWxpemVkKS4iIiIKICAgIGFfbGluZXMgPSBub3JtYWxpemVfbmV3bGluZXMoYV90ZXh0KS5zcGxpdGxpbmVzKGtlZXBlbmRzPVRydWUpCiAgICBiX2xpbmVzID0gbm9ybWFsaXplX25ld2xpbmVzKGJfdGV4dCkuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKQogICAgZCA9IGRpZmZsaWIudW5pZmllZF9kaWZmKGFfbGluZXMsIGJfbGluZXMsIGZyb21maWxlPWZyb21maWxlLCB0b2ZpbGU9dG9maWxlLCBsaW5ldGVybT1saW5ldGVybSkKICAgIHJldHVybiAiIi5qb2luKGQpCkBkYXRhY2xhc3MoZnJvemVuPVRydWUpCmNsYXNzIEZpbGVTbmFwc2hvdDoKICAgICIiIkltbXV0YWJsZSByZXByZXNlbnRhdGlvbiBvZiBmaWxlIGNvbnRlbnQgYW5kIGEgY29udGVudCBoYXNoLiIiIgogICAgcGF0aDogUGF0aAogICAgdGV4dDogc3RyCiAgICBzaGEyNTY6IHN0cgoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGZyb21fcGF0aChjbHMsIHBhdGg6IFBhdGhMaWtlLCBlbmNvZGluZzogc3RyID0gInV0Zi04IikgLT4gIkZpbGVTbmFwc2hvdCI6CiAgICAgICAgcCA9IHRvX3BhdGgocGF0aCkKICAgICAgICB0ID0gcmVhZF90ZXh0KHAsIGVuY29kaW5nPWVuY29kaW5nKQogICAgICAgIHJldHVybiBjbHMocGF0aD1wLCB0ZXh0PXQsIHNoYTI1Nj1zaGEyNTZfdGV4dCh0LCBlbmNvZGluZz1lbmNvZGluZykpCg==\"}\nDIR_STATE:[\"src/refactor_modularize/__init__.py\",\"src/refactor_modularize/artifacts.py\",\"src/refactor_modularize/cli.py\",\"src/refactor_modularize/export.py\",\"src/refactor_modularize/refactor.py\",\"src/refactor_modularize/utils.py\"]",
  "reasoning": "",
  "responseId": "resp_0fef3ceaad386ae800694b4954aa3c8190975c5a9c5e128613",
  "model": "gpt-5.2-2025-12-11",
  "usage": {
    "input_tokens": 4384,
    "input_tokens_details": {
      "cached_tokens": 0
    },
    "output_tokens": 3348,
    "output_tokens_details": {
      "reasoning_tokens": 32
    },
    "total_tokens": 7732
  },
  "hadError": false,
  "errorType": null,
  "webSearchSources": [],
  "citations": [],
  "output": [
    {
      "id": "rs_0fef3ceaad386ae800694b495551208190b519c71e11f055d3",
      "type": "reasoning",
      "summary": []
    },
    {
      "id": "ci_0fef3ceaad386ae800694b4955ca9c8190a5249cde83bcd178",
      "type": "code_interpreter_call",
      "status": "completed",
      "code": "from pathlib import Path\nimport base64, json, hashlib, gzip\n\ntarget_path = Path('/mnt/data').joinpath('src/refactor_modularize/utils.py')\nassert target_path.is_file(), 'Expected src/refactor_modularize/utils.py to exist before export'\ndata = target_path.read_bytes()\npayload = {\n   'path': 'src/refactor_modularize/utils.py',\n   'size': len(data),\n   'encoding': 'base64',\n   'sha256': hashlib.sha256(data).hexdigest(),\n   'content': None\n}\nif len(data) > 20000:\n    compressed = gzip.compress(data)\n    payload['encoding'] = 'gzip+base64'\n    payload['content'] = base64.b64encode(compressed).decode('ascii')\nelse:\n    payload['content'] = base64.b64encode(data).decode('ascii')\n\nprint('FILE_EXPORT:' + json.dumps(payload, separators=(',', ':')))\nprint('DIR_STATE:' + json.dumps(sorted(str(p.relative_to(Path(\"/mnt/data\"))) for p in target_path.parent.glob('*') if p.is_file())))",
      "container_id": "cntr_694b48372d7081909f70f3661941a95b001f3dc92161f15d",
      "outputs": [
        {
          "type": "logs",
          "logs": "FILE_EXPORT:{\"path\":\"src/refactor_modularize/utils.py\",\"size\":3538,\"encoding\":\"base64\",\"sha256\":\"2274326809f07ea93886f50ced2503dc330e3d714a068445b6fad9b8752622f3\",\"content\":\"IiIiU2hhcmVkIHV0aWxpdGllcyB1c2VkIGFjcm9zcyByZWZhY3Rvcl9tb2R1bGFyaXplLgoKSW5jbHVkZXMgaGVscGVycyBmb3IgcGF0aCBoYW5kbGluZywgaGFzaGluZyAoc2hhMjU2KSwgdGV4dCBkaWZmaW5nLCBhbmQKc2FmZSBmaWxlIElPIHdpdGggYXRvbWljIHdyaXRlcy4KIiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcwpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKZnJvbSB0eXBpbmcgaW1wb3J0IFVuaW9uCgppbXBvcnQgZGlmZmxpYgppbXBvcnQgaGFzaGxpYgppbXBvcnQgb3MKaW1wb3J0IHRlbXBmaWxlClBhdGhMaWtlID0gVW5pb25bc3RyLCBvcy5QYXRoTGlrZSwgUGF0aF0KZGVmIHRvX3BhdGgocDogUGF0aExpa2UpIC0+IFBhdGg6CiAgICAiIiJDb252ZXJ0IGEgcGF0aC1saWtlIGludG8gYSBQYXRoIChkb2VzIG5vdCByZXF1aXJlIGV4aXN0ZW5jZSkuIiIiCiAgICByZXR1cm4gcCBpZiBpc2luc3RhbmNlKHAsIFBhdGgpIGVsc2UgUGF0aChwKQoKCmRlZiBlbnN1cmVfcGFyZW50X2RpcihwYXRoOiBQYXRoTGlrZSkgLT4gUGF0aDoKICAgICIiIkVuc3VyZSBgcGF0aGAgcGFyZW50IGRpcmVjdG9yeSBleGlzdHM7IHJldHVybiBgcGF0aGAgYXMgUGF0aC4iIiIKICAgIHAgPSB0b19wYXRoKHBhdGgpCiAgICBwLnBhcmVudC5ta2RpcihwYXJlbnRzPVRydWUsIGV4aXN0X29rPVRydWUpCiAgICByZXR1cm4gcAoKCmRlZiByZWxwYXRoKHBhdGg6IFBhdGhMaWtlLCBzdGFydDogUGF0aExpa2UpIC0+IHN0cjoKICAgICIiIlJldHVybiBhIHN0YWJsZSBmb3J3YXJkLXNsYXNoIHJlbGF0aXZlIHBhdGggKGJlc3QtZWZmb3J0KS4iIiIKICAgIHAsIHMgPSB0b19wYXRoKHBhdGgpLCB0b19wYXRoKHN0YXJ0KQogICAgdHJ5OgogICAgICAgIHIgPSBwLnJlbGF0aXZlX3RvKHMpCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHIgPSBQYXRoKG9zLnBhdGgucmVscGF0aChvcy5mc3BhdGgocCksIG9zLmZzcGF0aChzKSkpCiAgICByZXR1cm4gci5hc19wb3NpeCgpCmRlZiBub3JtYWxpemVfbmV3bGluZXModGV4dDogc3RyKSAtPiBzdHI6CiAgICAiIiJOb3JtYWxpemUgQ1JMRi9DUiBuZXdsaW5lcyB0byBMRi4iIiIKICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoIlxyXG4iLCAiXG4iKS5yZXBsYWNlKCJcciIsICJcbiIpCgoKZGVmIHJlYWRfdGV4dChwYXRoOiBQYXRoTGlrZSwgZW5jb2Rpbmc6IHN0ciA9ICJ1dGYtOCIpIC0+IHN0cjoKICAgICIiIlJlYWQgYSB0ZXh0IGZpbGU7IG5vcm1hbGl6ZXMgbmV3bGluZXMgdG8gTEYuIiIiCiAgICByZXR1cm4gbm9ybWFsaXplX25ld2xpbmVzKHRvX3BhdGgocGF0aCkucmVhZF90ZXh0KGVuY29kaW5nPWVuY29kaW5nKSkKCgpkZWYgd3JpdGVfdGV4dF9hdG9taWMoCiAgICBwYXRoOiBQYXRoTGlrZSwKICAgIHRleHQ6IHN0ciwKICAgICosCiAgICBlbmNvZGluZzogc3RyID0gInV0Zi04IiwKICAgIG5ld2xpbmU6IHN0ciA9ICJcbiIsCikgLT4gTm9uZToKICAgICIiIkF0b21pY2FsbHkgd3JpdGUgdGV4dCB0byBgcGF0aGAgKHRlbXAgZmlsZSB0aGVuIG9zLnJlcGxhY2UpLiIiIgogICAgcCA9IGVuc3VyZV9wYXJlbnRfZGlyKHBhdGgpCiAgICBkYXRhID0gbm9ybWFsaXplX25ld2xpbmVzKHRleHQpCiAgICBpZiBuZXdsaW5lICE9ICJcbiI6CiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgiXG4iLCBuZXdsaW5lKQogICAgd2l0aCB0ZW1wZmlsZS5OYW1lZFRlbXBvcmFyeUZpbGUoCiAgICAgICAgInciLAogICAgICAgIGVuY29kaW5nPWVuY29kaW5nLAogICAgICAgIGRpcj1vcy5mc3BhdGgocC5wYXJlbnQpLAogICAgICAgIHByZWZpeD1mIi57cC5uYW1lfS4iLAogICAgICAgIHN1ZmZpeD0iLnRtcCIsCiAgICAgICAgZGVsZXRlPUZhbHNlLAogICAgICAgIG5ld2xpbmU9IiIsCiAgICApIGFzIHRmOgogICAgICAgIHRtcF9uYW1lID0gdGYubmFtZQogICAgICAgIHRmLndyaXRlKGRhdGEpCiAgICBvcy5yZXBsYWNlKHRtcF9uYW1lLCBvcy5mc3BhdGgocCkpCmRlZiBzaGEyNTZfYnl0ZXMoZGF0YTogYnl0ZXMpIC0+IHN0cjoKICAgICIiIkhleCBzaGEyNTYgZm9yIHJhdyBieXRlcy4iIiIKICAgIHJldHVybiBoYXNobGliLnNoYTI1NihkYXRhKS5oZXhkaWdlc3QoKQoKCmRlZiBzaGEyNTZfdGV4dCh0ZXh0OiBzdHIsIGVuY29kaW5nOiBzdHIgPSAidXRmLTgiKSAtPiBzdHI6CiAgICAiIiJIZXggc2hhMjU2IGZvciB0ZXh0IChhZnRlciBuZXdsaW5lIG5vcm1hbGl6YXRpb24pLiIiIgogICAgcmV0dXJuIHNoYTI1Nl9ieXRlcyhub3JtYWxpemVfbmV3bGluZXModGV4dCkuZW5jb2RlKGVuY29kaW5nKSkKCgpkZWYgc2hhMjU2X2ZpbGUocGF0aDogUGF0aExpa2UsIGNodW5rX3NpemU6IGludCA9IDEwMjQgKiAxMDI0KSAtPiBzdHI6CiAgICAiIiJIZXggc2hhMjU2IG9mIGEgZmlsZSAoYmluYXJ5IHJlYWQpLiIiIgogICAgaCA9IGhhc2hsaWIuc2hhMjU2KCkKICAgIHdpdGggb3Blbihvcy5mc3BhdGgodG9fcGF0aChwYXRoKSksICJyYiIpIGFzIGY6CiAgICAgICAgZm9yIGNodW5rIGluIGl0ZXIobGFtYmRhOiBmLnJlYWQoY2h1bmtfc2l6ZSksIGIiIik6CiAgICAgICAgICAgIGgudXBkYXRlKGNodW5rKQogICAgcmV0dXJuIGguaGV4ZGlnZXN0KCkKZGVmIHVuaWZpZWRfZGlmZigKICAgIGFfdGV4dDogc3RyLAogICAgYl90ZXh0OiBzdHIsCiAgICAqLAogICAgZnJvbWZpbGU6IHN0ciA9ICJhIiwKICAgIHRvZmlsZTogc3RyID0gImIiLAogICAgbGluZXRlcm06IHN0ciA9ICJcbiIsCikgLT4gc3RyOgogICAgIiIiUmV0dXJuIGEgdW5pZmllZCBkaWZmIHN0cmluZyBiZXR3ZWVuIHR3byB0ZXh0cyAobmV3bGluZS1ub3JtYWxpemVkKS4iIiIKICAgIGFfbGluZXMgPSBub3JtYWxpemVfbmV3bGluZXMoYV90ZXh0KS5zcGxpdGxpbmVzKGtlZXBlbmRzPVRydWUpCiAgICBiX2xpbmVzID0gbm9ybWFsaXplX25ld2xpbmVzKGJfdGV4dCkuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKQogICAgZCA9IGRpZmZsaWIudW5pZmllZF9kaWZmKGFfbGluZXMsIGJfbGluZXMsIGZyb21maWxlPWZyb21maWxlLCB0b2ZpbGU9dG9maWxlLCBsaW5ldGVybT1saW5ldGVybSkKICAgIHJldHVybiAiIi5qb2luKGQpCkBkYXRhY2xhc3MoZnJvemVuPVRydWUpCmNsYXNzIEZpbGVTbmFwc2hvdDoKICAgICIiIkltbXV0YWJsZSByZXByZXNlbnRhdGlvbiBvZiBmaWxlIGNvbnRlbnQgYW5kIGEgY29udGVudCBoYXNoLiIiIgogICAgcGF0aDogUGF0aAogICAgdGV4dDogc3RyCiAgICBzaGEyNTY6IHN0cgoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGZyb21fcGF0aChjbHMsIHBhdGg6IFBhdGhMaWtlLCBlbmNvZGluZzogc3RyID0gInV0Zi04IikgLT4gIkZpbGVTbmFwc2hvdCI6CiAgICAgICAgcCA9IHRvX3BhdGgocGF0aCkKICAgICAgICB0ID0gcmVhZF90ZXh0KHAsIGVuY29kaW5nPWVuY29kaW5nKQogICAgICAgIHJldHVybiBjbHMocGF0aD1wLCB0ZXh0PXQsIHNoYTI1Nj1zaGEyNTZfdGV4dCh0LCBlbmNvZGluZz1lbmNvZGluZykpCg==\"}\nDIR_STATE:[\"src/refactor_modularize/__init__.py\", \"src/refactor_modularize/artifacts.py\", \"src/refactor_modularize/cli.py\", \"src/refactor_modularize/export.py\", \"src/refactor_modularize/refactor.py\", \"src/refactor_modularize/utils.py\"]\n"
        }
      ]
    },
    {
      "id": "msg_0fef3ceaad386ae800694b49587ac48190b1f7803287140214",
      "type": "message",
      "status": "completed",
      "content": [
        {
          "type": "output_text",
          "annotations": [],
          "logprobs": [],
          "text": "FILE_EXPORT:{\"path\":\"src/refactor_modularize/utils.py\",\"size\":3538,\"encoding\":\"base64\",\"sha256\":\"2274326809f07ea93886f50ced2503dc330e3d714a068445b6fad9b8752622f3\",\"content\":\"IiIiU2hhcmVkIHV0aWxpdGllcyB1c2VkIGFjcm9zcyByZWZhY3Rvcl9tb2R1bGFyaXplLgoKSW5jbHVkZXMgaGVscGVycyBmb3IgcGF0aCBoYW5kbGluZywgaGFzaGluZyAoc2hhMjU2KSwgdGV4dCBkaWZmaW5nLCBhbmQKc2FmZSBmaWxlIElPIHdpdGggYXRvbWljIHdyaXRlcy4KIiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcwpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKZnJvbSB0eXBpbmcgaW1wb3J0IFVuaW9uCgppbXBvcnQgZGlmZmxpYgppbXBvcnQgaGFzaGxpYgppbXBvcnQgb3MKaW1wb3J0IHRlbXBmaWxlClBhdGhMaWtlID0gVW5pb25bc3RyLCBvcy5QYXRoTGlrZSwgUGF0aF0KZGVmIHRvX3BhdGgocDogUGF0aExpa2UpIC0+IFBhdGg6CiAgICAiIiJDb252ZXJ0IGEgcGF0aC1saWtlIGludG8gYSBQYXRoIChkb2VzIG5vdCByZXF1aXJlIGV4aXN0ZW5jZSkuIiIiCiAgICByZXR1cm4gcCBpZiBpc2luc3RhbmNlKHAsIFBhdGgpIGVsc2UgUGF0aChwKQoKCmRlZiBlbnN1cmVfcGFyZW50X2RpcihwYXRoOiBQYXRoTGlrZSkgLT4gUGF0aDoKICAgICIiIkVuc3VyZSBgcGF0aGAgcGFyZW50IGRpcmVjdG9yeSBleGlzdHM7IHJldHVybiBgcGF0aGAgYXMgUGF0aC4iIiIKICAgIHAgPSB0b19wYXRoKHBhdGgpCiAgICBwLnBhcmVudC5ta2RpcihwYXJlbnRzPVRydWUsIGV4aXN0X29rPVRydWUpCiAgICByZXR1cm4gcAoKCmRlZiByZWxwYXRoKHBhdGg6IFBhdGhMaWtlLCBzdGFydDogUGF0aExpa2UpIC0+IHN0cjoKICAgICIiIlJldHVybiBhIHN0YWJsZSBmb3J3YXJkLXNsYXNoIHJlbGF0aXZlIHBhdGggKGJlc3QtZWZmb3J0KS4iIiIKICAgIHAsIHMgPSB0b19wYXRoKHBhdGgpLCB0b19wYXRoKHN0YXJ0KQogICAgdHJ5OgogICAgICAgIHIgPSBwLnJlbGF0aXZlX3RvKHMpCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHIgPSBQYXRoKG9zLnBhdGgucmVscGF0aChvcy5mc3BhdGgocCksIG9zLmZzcGF0aChzKSkpCiAgICByZXR1cm4gci5hc19wb3NpeCgpCmRlZiBub3JtYWxpemVfbmV3bGluZXModGV4dDogc3RyKSAtPiBzdHI6CiAgICAiIiJOb3JtYWxpemUgQ1JMRi9DUiBuZXdsaW5lcyB0byBMRi4iIiIKICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoIlxyXG4iLCAiXG4iKS5yZXBsYWNlKCJcciIsICJcbiIpCgoKZGVmIHJlYWRfdGV4dChwYXRoOiBQYXRoTGlrZSwgZW5jb2Rpbmc6IHN0ciA9ICJ1dGYtOCIpIC0+IHN0cjoKICAgICIiIlJlYWQgYSB0ZXh0IGZpbGU7IG5vcm1hbGl6ZXMgbmV3bGluZXMgdG8gTEYuIiIiCiAgICByZXR1cm4gbm9ybWFsaXplX25ld2xpbmVzKHRvX3BhdGgocGF0aCkucmVhZF90ZXh0KGVuY29kaW5nPWVuY29kaW5nKSkKCgpkZWYgd3JpdGVfdGV4dF9hdG9taWMoCiAgICBwYXRoOiBQYXRoTGlrZSwKICAgIHRleHQ6IHN0ciwKICAgICosCiAgICBlbmNvZGluZzogc3RyID0gInV0Zi04IiwKICAgIG5ld2xpbmU6IHN0ciA9ICJcbiIsCikgLT4gTm9uZToKICAgICIiIkF0b21pY2FsbHkgd3JpdGUgdGV4dCB0byBgcGF0aGAgKHRlbXAgZmlsZSB0aGVuIG9zLnJlcGxhY2UpLiIiIgogICAgcCA9IGVuc3VyZV9wYXJlbnRfZGlyKHBhdGgpCiAgICBkYXRhID0gbm9ybWFsaXplX25ld2xpbmVzKHRleHQpCiAgICBpZiBuZXdsaW5lICE9ICJcbiI6CiAgICAgICAgZGF0YSA9IGRhdGEucmVwbGFjZSgiXG4iLCBuZXdsaW5lKQogICAgd2l0aCB0ZW1wZmlsZS5OYW1lZFRlbXBvcmFyeUZpbGUoCiAgICAgICAgInciLAogICAgICAgIGVuY29kaW5nPWVuY29kaW5nLAogICAgICAgIGRpcj1vcy5mc3BhdGgocC5wYXJlbnQpLAogICAgICAgIHByZWZpeD1mIi57cC5uYW1lfS4iLAogICAgICAgIHN1ZmZpeD0iLnRtcCIsCiAgICAgICAgZGVsZXRlPUZhbHNlLAogICAgICAgIG5ld2xpbmU9IiIsCiAgICApIGFzIHRmOgogICAgICAgIHRtcF9uYW1lID0gdGYubmFtZQogICAgICAgIHRmLndyaXRlKGRhdGEpCiAgICBvcy5yZXBsYWNlKHRtcF9uYW1lLCBvcy5mc3BhdGgocCkpCmRlZiBzaGEyNTZfYnl0ZXMoZGF0YTogYnl0ZXMpIC0+IHN0cjoKICAgICIiIkhleCBzaGEyNTYgZm9yIHJhdyBieXRlcy4iIiIKICAgIHJldHVybiBoYXNobGliLnNoYTI1NihkYXRhKS5oZXhkaWdlc3QoKQoKCmRlZiBzaGEyNTZfdGV4dCh0ZXh0OiBzdHIsIGVuY29kaW5nOiBzdHIgPSAidXRmLTgiKSAtPiBzdHI6CiAgICAiIiJIZXggc2hhMjU2IGZvciB0ZXh0IChhZnRlciBuZXdsaW5lIG5vcm1hbGl6YXRpb24pLiIiIgogICAgcmV0dXJuIHNoYTI1Nl9ieXRlcyhub3JtYWxpemVfbmV3bGluZXModGV4dCkuZW5jb2RlKGVuY29kaW5nKSkKCgpkZWYgc2hhMjU2X2ZpbGUocGF0aDogUGF0aExpa2UsIGNodW5rX3NpemU6IGludCA9IDEwMjQgKiAxMDI0KSAtPiBzdHI6CiAgICAiIiJIZXggc2hhMjU2IG9mIGEgZmlsZSAoYmluYXJ5IHJlYWQpLiIiIgogICAgaCA9IGhhc2hsaWIuc2hhMjU2KCkKICAgIHdpdGggb3Blbihvcy5mc3BhdGgodG9fcGF0aChwYXRoKSksICJyYiIpIGFzIGY6CiAgICAgICAgZm9yIGNodW5rIGluIGl0ZXIobGFtYmRhOiBmLnJlYWQoY2h1bmtfc2l6ZSksIGIiIik6CiAgICAgICAgICAgIGgudXBkYXRlKGNodW5rKQogICAgcmV0dXJuIGguaGV4ZGlnZXN0KCkKZGVmIHVuaWZpZWRfZGlmZigKICAgIGFfdGV4dDogc3RyLAogICAgYl90ZXh0OiBzdHIsCiAgICAqLAogICAgZnJvbWZpbGU6IHN0ciA9ICJhIiwKICAgIHRvZmlsZTogc3RyID0gImIiLAogICAgbGluZXRlcm06IHN0ciA9ICJcbiIsCikgLT4gc3RyOgogICAgIiIiUmV0dXJuIGEgdW5pZmllZCBkaWZmIHN0cmluZyBiZXR3ZWVuIHR3byB0ZXh0cyAobmV3bGluZS1ub3JtYWxpemVkKS4iIiIKICAgIGFfbGluZXMgPSBub3JtYWxpemVfbmV3bGluZXMoYV90ZXh0KS5zcGxpdGxpbmVzKGtlZXBlbmRzPVRydWUpCiAgICBiX2xpbmVzID0gbm9ybWFsaXplX25ld2xpbmVzKGJfdGV4dCkuc3BsaXRsaW5lcyhrZWVwZW5kcz1UcnVlKQogICAgZCA9IGRpZmZsaWIudW5pZmllZF9kaWZmKGFfbGluZXMsIGJfbGluZXMsIGZyb21maWxlPWZyb21maWxlLCB0b2ZpbGU9dG9maWxlLCBsaW5ldGVybT1saW5ldGVybSkKICAgIHJldHVybiAiIi5qb2luKGQpCkBkYXRhY2xhc3MoZnJvemVuPVRydWUpCmNsYXNzIEZpbGVTbmFwc2hvdDoKICAgICIiIkltbXV0YWJsZSByZXByZXNlbnRhdGlvbiBvZiBmaWxlIGNvbnRlbnQgYW5kIGEgY29udGVudCBoYXNoLiIiIgogICAgcGF0aDogUGF0aAogICAgdGV4dDogc3RyCiAgICBzaGEyNTY6IHN0cgoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGZyb21fcGF0aChjbHMsIHBhdGg6IFBhdGhMaWtlLCBlbmNvZGluZzogc3RyID0gInV0Zi04IikgLT4gIkZpbGVTbmFwc2hvdCI6CiAgICAgICAgcCA9IHRvX3BhdGgocGF0aCkKICAgICAgICB0ID0gcmVhZF90ZXh0KHAsIGVuY29kaW5nPWVuY29kaW5nKQogICAgICAgIHJldHVybiBjbHMocGF0aD1wLCB0ZXh0PXQsIHNoYTI1Nj1zaGEyNTZfdGV4dCh0LCBlbmNvZGluZz1lbmNvZGluZykpCg==\"}\nDIR_STATE:[\"src/refactor_modularize/__init__.py\",\"src/refactor_modularize/artifacts.py\",\"src/refactor_modularize/cli.py\",\"src/refactor_modularize/export.py\",\"src/refactor_modularize/refactor.py\",\"src/refactor_modularize/utils.py\"]"
        }
      ],
      "role": "assistant"
    }
  ],
  "codeResults": []
}