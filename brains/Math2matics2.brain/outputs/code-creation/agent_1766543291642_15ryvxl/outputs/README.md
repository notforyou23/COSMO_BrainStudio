# /outputs — Artifact rules & conventions

This directory is the **single, versioned interface** for pipeline-produced artifacts.
Every file in `/outputs/` must be reproducible from the repository state plus declared inputs, and must follow the conventions below.

## 1) Scope
Artifacts under `/outputs/` are:
- **Documentation artifacts** (Markdown) consumed by humans and CI.
- **Deterministic** outputs produced by scripts (no manual edits).
- **Stable filenames** so downstream tooling can rely on paths.

Non-goals:
- Build caches, logs, temporary files, or environment-specific dumps.

## 2) Directory contract
Only these top-level files are considered **required pipeline artifacts**:

| File | Purpose |
|---|---|
| `README.md` | Rules, naming, determinism guarantees, update cadence (this file). |
| `roadmap.md` | Milestones/cycles/deliverables and how artifacts evolve across runs. |
| `bibliography.md` | Curated sources used by the project/agents, with citation notes. |
| `coverage_matrix.md` | Mapping from requirements → artifacts/tests/CI checks. |

CI and reviewers may treat missing required artifacts as a failure.

## 3) File format rules (Markdown)
All Markdown artifacts in `/outputs/` must:
- Use UTF-8, Unix newlines (`\n`), and end with a trailing newline.
- Use stable heading structure (H1 title; H2 sections).
- Avoid embedded timestamps unless explicitly required by the artifact spec (see determinism).
- Avoid HTML unless necessary for tables not expressible in Markdown.

## 4) Naming & stability conventions
- Filenames are **lower_snake_case** with `.md` extension.
- Paths are stable and never include run IDs, dates, or random suffixes.
- Content should be structured so that diffs are meaningful (append-only logs are discouraged).
- Tables should be column-stable (no reordering unless the schema changes).

## 5) Determinism guarantees
Pipeline-generated artifacts must be deterministic given:
- Repository content at a specific commit (scripts + prompts/specs).
- Explicit, checked-in inputs (e.g., requirement lists) if applicable.
- The same execution command and Python version range declared by the repo.

To preserve determinism:
- Do **not** insert “generated at <timestamp>”, hostnames, usernames, absolute paths, or random seeds.
- If ordering is required (lists/rows), sort deterministically (lexicographic) unless the artifact defines another stable order.
- Any computed IDs must be stable (e.g., hash of canonical text) and documented in the producing script.

## 6) Update cadence & responsibility
- `/outputs/README.md`: changes only when conventions/rules evolve.
- `roadmap.md`: updated when a new cycle/milestone is added or completed.
- `bibliography.md`: updated when new sources are introduced or retired.
- `coverage_matrix.md`: updated when requirements, tests, or CI checks change.

Rule: **If a pipeline run changes logic that affects an artifact, that artifact must be updated in the same change.**

## 7) CI/CD expectations
Recommended checks for `/outputs/` (implemented by the repository’s CI configuration):
- All required artifacts exist.
- Files are UTF-8, end with newline, and contain no tab characters.
- No timestamps/run IDs appear (basic regex guard).
- Deterministic ordering: verify files are unchanged after a second run (idempotence).

## 8) Generators (source of truth)
Artifacts in `/outputs/` should be generated by a deterministic script (planned: `scripts/generate_outputs.py`).
Generator responsibilities:
- Create the required files listed in Section 2 with consistent schemas.
- Be idempotent (running twice produces identical bytes).
- Fail fast with clear errors when required inputs are missing.

## 9) Compatibility and evolution policy
- Schema changes must be backwards-aware: update consuming tooling and the coverage matrix together.
- When renaming or removing an artifact, document the migration in `roadmap.md` and update Section 2 here.
- Keep artifacts small and reviewable; prefer links to detailed docs over dumping large raw outputs.

## 10) Minimal schemas (normative)
This section defines the **minimum** content each required artifact must include.

### `roadmap.md`
Must include:
- Current cycle number and goals.
- List of milestones with acceptance criteria.
- “Artifact evolution” notes describing expected changes over time.

### `bibliography.md`
Must include:
- Sources grouped by category (e.g., standards, tooling, research).
- For each source: title, author/org, link (if applicable), and usage note.

### `coverage_matrix.md`
Must include:
- Requirement identifier, description, mapped artifact(s), mapped test/CI check(s), and status.
- A deterministic ordering (by requirement identifier).

By convention, “requirement identifiers” are short stable strings (e.g., `REQ-001`).
