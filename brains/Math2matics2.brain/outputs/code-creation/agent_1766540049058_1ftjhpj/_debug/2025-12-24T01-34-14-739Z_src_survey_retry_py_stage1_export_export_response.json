{
  "content": "FILE_EXPORT:{\"path\":\"src/survey_retry.py\",\"size\":6058,\"encoding\":\"base64\",\"sha256\":\"923e94e69b4abb157e4694fc8c33100d5079e3ff22692d84c44ba66440756405\",\"content\":\"ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lLCB0aW1lem9uZQpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKaW1wb3J0IGpzb24KaW1wb3J0IG9zCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIERpY3QsIE9wdGlvbmFsCgoKZGVmIF91dGNfbm93X2lzbygpIC0+IHN0cjoKICAgIHJldHVybiBkYXRldGltZS5ub3codGltZXpvbmUudXRjKS5pc29mb3JtYXQodGltZXNwZWM9InNlY29uZHMiKQoKCmRlZiBfcmVhZF9qc29uKHBhdGg6IFBhdGgpIC0+IE9wdGlvbmFsW0RpY3Rbc3RyLCBBbnldXToKICAgIGlmIG5vdCBwYXRoLmV4aXN0cygpOgogICAgICAgIHJldHVybiBOb25lCiAgICByZXR1cm4ganNvbi5sb2FkcyhwYXRoLnJlYWRfdGV4dChlbmNvZGluZz0idXRmLTgiKSkKCgpkZWYgX3dyaXRlX2pzb24ocGF0aDogUGF0aCwgb2JqOiBEaWN0W3N0ciwgQW55XSkgLT4gTm9uZToKICAgIHBhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHBhdGgud3JpdGVfdGV4dChqc29uLmR1bXBzKG9iaiwgaW5kZW50PTIsIHNvcnRfa2V5cz1UcnVlKSArICJcbiIsIGVuY29kaW5nPSJ1dGYtOCIpCgoKZGVmIF9hcHBlbmRfanNvbmwocGF0aDogUGF0aCwgb2JqOiBEaWN0W3N0ciwgQW55XSkgLT4gTm9uZToKICAgIHBhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHdpdGggcGF0aC5vcGVuKCJhIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgZjoKICAgICAgICBmLndyaXRlKGpzb24uZHVtcHMob2JqLCBzb3J0X2tleXM9VHJ1ZSkgKyAiXG4iKQoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUpCmNsYXNzIENhbm9uaWNhbFBhdGhzOgogICAgb3V0cHV0c19kaXI6IFBhdGgKICAgIHJ1bl9pZDogc3RyCgogICAgQHByb3BlcnR5CiAgICBkZWYgaW5kZXhfanNvbihzZWxmKSAtPiBQYXRoOgogICAgICAgIHJldHVybiBzZWxmLm91dHB1dHNfZGlyIC8gImluZGV4Lmpzb24iCgogICAgQHByb3BlcnR5CiAgICBkZWYgcnVuX2RpcihzZWxmKSAtPiBQYXRoOgogICAgICAgIHJldHVybiBzZWxmLm91dHB1dHNfZGlyIC8gInJ1bnMiIC8gc2VsZi5ydW5faWQKCiAgICBAcHJvcGVydHkKICAgIGRlZiBydW5fZXZpZGVuY2VfanNvbmwoc2VsZikgLT4gUGF0aDoKICAgICAgICByZXR1cm4gc2VsZi5ydW5fZGlyIC8gInJ1bl9ldmlkZW5jZS5qc29ubCIKCiAgICBAcHJvcGVydHkKICAgIGRlZiBzdXJ2ZXlfZG9tYWluX2RpcihzZWxmKSAtPiBQYXRoOgogICAgICAgIHJldHVybiBzZWxmLm91dHB1dHNfZGlyIC8gImRvbWFpbiIgLyAic3VydmV5IgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHN1cnZleV9pbnB1dF9qc29uKHNlbGYpIC0+IFBhdGg6CiAgICAgICAgcmV0dXJuIHNlbGYuc3VydmV5X2RvbWFpbl9kaXIgLyAic3VydmV5X2lucHV0Lmpzb24iCgogICAgQHByb3BlcnR5CiAgICBkZWYgc3VydmV5X3Jlc3VsdF9qc29uKHNlbGYpIC0+IFBhdGg6CiAgICAgICAgcmV0dXJuIHNlbGYuc3VydmV5X2RvbWFpbl9kaXIgLyAic3VydmV5X3Jlc3VsdC5qc29uIgpkZWYgX3VwZGF0ZV9vdXRwdXRzX2luZGV4KHBhdGhzOiBDYW5vbmljYWxQYXRocywgYXJ0aWZhY3Rfa2V5OiBzdHIsIHJlbF9wYXRoOiBzdHIsIG1ldGE6IERpY3Rbc3RyLCBBbnldKSAtPiBOb25lOgogICAgIiIiVXBzZXJ0cyBhIHNpbmdsZSBhcnRpZmFjdCBlbnRyeSBpbiBvdXRwdXRzL2luZGV4Lmpzb24gKGRldGVybWluaXN0aWMgbG9jYXRpb24pLiIiIgogICAgaWR4ID0gX3JlYWRfanNvbihwYXRocy5pbmRleF9qc29uKSBvciB7InNjaGVtYSI6ICJvdXRwdXRzLWluZGV4LnYxIiwgImFydGlmYWN0cyI6IHt9fQogICAgYXJ0aWZhY3RzID0gaWR4LnNldGRlZmF1bHQoImFydGlmYWN0cyIsIHt9KQogICAgYXJ0aWZhY3RzW2FydGlmYWN0X2tleV0gPSB7InBhdGgiOiByZWxfcGF0aCwgInVwZGF0ZWRfYXQiOiBfdXRjX25vd19pc28oKSwgKiptZXRhfQogICAgX3dyaXRlX2pzb24ocGF0aHMuaW5kZXhfanNvbiwgaWR4KQoKCmRlZiBfcmVjb3JkX3J1bl9ldmVudChwYXRoczogQ2Fub25pY2FsUGF0aHMsIGV2ZW50X3R5cGU6IHN0ciwgcGF5bG9hZDogRGljdFtzdHIsIEFueV0pIC0+IE5vbmU6CiAgICBfYXBwZW5kX2pzb25sKAogICAgICAgIHBhdGhzLnJ1bl9ldmlkZW5jZV9qc29ubCwKICAgICAgICB7InRzIjogX3V0Y19ub3dfaXNvKCksICJydW5faWQiOiBwYXRocy5ydW5faWQsICJldmVudCI6IGV2ZW50X3R5cGUsICJwYXlsb2FkIjogcGF5bG9hZH0sCiAgICApCmRlZiByZWF0dGVtcHRfYmxvY2tlZF9zdXJ2ZXkoCiAgICBvdXRwdXRzX2RpcjogUGF0aCwKICAgIHJ1bl9pZDogc3RyLAogICAgKiwKICAgIGJsb2NrZWRfcmVhc29uOiBPcHRpb25hbFtzdHJdID0gTm9uZSwKICAgIGNvbnRleHQ6IE9wdGlvbmFsW0RpY3Rbc3RyLCBBbnldXSA9IE5vbmUsCikgLT4gRGljdFtzdHIsIEFueV06CiAgICAiIiJSZS1hdHRlbXB0IHRoZSBwcmV2aW91c2x5IGJsb2NrZWQgc3VydmV5IHRhc2sgdXNpbmcgY2Fub25pY2FsIC9vdXRwdXRzIGFydGlmYWN0cy4KCiAgICBUaGlzIGltcGxlbWVudGF0aW9uIGlzIG9mZmxpbmUvQ0ktc2FmZTogaXQgcmV1c2VzIGEgbG9jYWwgc3VydmV5X2lucHV0Lmpzb24gaWYgcHJlc2VudC4KICAgIElmIGFic2VudCwgaXQgd3JpdGVzIGEgc3R1YiBpbnB1dCBhbmQgcmVjb3JkcyBhIGJsb2NrZWQgcmVzdWx0IHdoaWxlIHN0aWxsIHByb2R1Y2luZyBldmlkZW5jZS4KICAgICIiIgogICAgb3V0cHV0c19kaXIgPSBQYXRoKG91dHB1dHNfZGlyKQogICAgcGF0aHMgPSBDYW5vbmljYWxQYXRocyhvdXRwdXRzX2Rpcj1vdXRwdXRzX2RpciwgcnVuX2lkPXJ1bl9pZCkKICAgIGN0eCA9IGNvbnRleHQgb3Ige30KCiAgICBfcmVjb3JkX3J1bl9ldmVudChwYXRocywgInN1cnZleV9yZXRyeV9zdGFydGVkIiwgeyJibG9ja2VkX3JlYXNvbiI6IGJsb2NrZWRfcmVhc29uLCAiY29udGV4dCI6IGN0eH0pCgogICAgc3VydmV5X2lucHV0ID0gX3JlYWRfanNvbihwYXRocy5zdXJ2ZXlfaW5wdXRfanNvbikKICAgIGlmIHN1cnZleV9pbnB1dCBpcyBOb25lOgogICAgICAgIHN1cnZleV9pbnB1dCA9IHsKICAgICAgICAgICAgInNjaGVtYSI6ICJzdXJ2ZXktaW5wdXQudjEiLAogICAgICAgICAgICAibm90ZSI6ICJObyBpbnB1dCBwcm92aWRlZDsgcmV0cnkgcnVucyBpbiBvZmZsaW5lIG1vZGUgYW5kIGNhbm5vdCBmZXRjaCBleHRlcm5hbCBzdXJ2ZXkgc291cmNlLiIsCiAgICAgICAgICAgICJjb250ZXh0IjogY3R4LAogICAgICAgIH0KICAgICAgICBfd3JpdGVfanNvbihwYXRocy5zdXJ2ZXlfaW5wdXRfanNvbiwgc3VydmV5X2lucHV0KQogICAgICAgIF91cGRhdGVfb3V0cHV0c19pbmRleCgKICAgICAgICAgICAgcGF0aHMsCiAgICAgICAgICAgICJkb21haW4uc3VydmV5LmlucHV0IiwKICAgICAgICAgICAgc3RyKHBhdGhzLnN1cnZleV9pbnB1dF9qc29uLnJlbGF0aXZlX3RvKG91dHB1dHNfZGlyKSksCiAgICAgICAgICAgIHsic2NoZW1hIjogc3VydmV5X2lucHV0LmdldCgic2NoZW1hIiksICJraW5kIjogImRvbWFpbl9hcnRpZmFjdCJ9LAogICAgICAgICkKICAgICAgICBfcmVjb3JkX3J1bl9ldmVudChwYXRocywgInN1cnZleV9yZXRyeV9pbnB1dF9zdHViX3dyaXR0ZW4iLCB7InBhdGgiOiBzdHIocGF0aHMuc3VydmV5X2lucHV0X2pzb24pfSkKCiAgICBxdWVzdGlvbnMgPSBzdXJ2ZXlfaW5wdXQuZ2V0KCJxdWVzdGlvbnMiKQogICAgYW5zd2VycyA9IHN1cnZleV9pbnB1dC5nZXQoImFuc3dlcnMiKQogICAgY2FuX2NvbXBsZXRlID0gaXNpbnN0YW5jZShxdWVzdGlvbnMsIGxpc3QpIGFuZCAoYW5zd2VycyBpcyBOb25lIG9yIGlzaW5zdGFuY2UoYW5zd2VycywgZGljdCkpCgogICAgaWYgY2FuX2NvbXBsZXRlOgogICAgICAgIHN0YXR1cyA9ICJjb21wbGV0ZWQiCiAgICAgICAgc3VtbWFyeSA9IHsicXVlc3Rpb25fY291bnQiOiBsZW4ocXVlc3Rpb25zKSwgImFuc3dlcmVkX2NvdW50IjogbGVuKGFuc3dlcnMgb3Ige30pfQogICAgICAgIHJlc3VsdF9wYXlsb2FkOiBEaWN0W3N0ciwgQW55XSA9IHsKICAgICAgICAgICAgInNjaGVtYSI6ICJzdXJ2ZXktcmVzdWx0LnYxIiwKICAgICAgICAgICAgInN0YXR1cyI6IHN0YXR1cywKICAgICAgICAgICAgInN1bW1hcnkiOiBzdW1tYXJ5LAogICAgICAgICAgICAiaW5wdXRfcGF0aCI6IHN0cihwYXRocy5zdXJ2ZXlfaW5wdXRfanNvbi5yZWxhdGl2ZV90byhvdXRwdXRzX2RpcikpLAogICAgICAgICAgICAiYmxvY2tlZF9yZWFzb24iOiBibG9ja2VkX3JlYXNvbiwKICAgICAgICB9CiAgICBlbHNlOgogICAgICAgIHN0YXR1cyA9ICJibG9ja2VkIgogICAgICAgIHJlc3VsdF9wYXlsb2FkID0gewogICAgICAgICAgICAic2NoZW1hIjogInN1cnZleS1yZXN1bHQudjEiLAogICAgICAgICAgICAic3RhdHVzIjogc3RhdHVzLAogICAgICAgICAgICAiYmxvY2tlZF9yZWFzb24iOiBibG9ja2VkX3JlYXNvbiBvciAibWlzc2luZ19vcl9pbnZhbGlkX2xvY2FsX2lucHV0IiwKICAgICAgICAgICAgImlucHV0X3BhdGgiOiBzdHIocGF0aHMuc3VydmV5X2lucHV0X2pzb24ucmVsYXRpdmVfdG8ob3V0cHV0c19kaXIpKSwKICAgICAgICAgICAgImhpbnQiOiAiUHJvdmlkZSBvdXRwdXRzL2RvbWFpbi9zdXJ2ZXkvc3VydmV5X2lucHV0Lmpzb24gd2l0aCBhICdxdWVzdGlvbnMnIGxpc3QgdG8gY29tcGxldGUgb2ZmbGluZS4iLAogICAgICAgIH0KCiAgICBfd3JpdGVfanNvbihwYXRocy5zdXJ2ZXlfcmVzdWx0X2pzb24sIHJlc3VsdF9wYXlsb2FkKQogICAgX3VwZGF0ZV9vdXRwdXRzX2luZGV4KAogICAgICAgIHBhdGhzLAogICAgICAgICJkb21haW4uc3VydmV5LnJlc3VsdCIsCiAgICAgICAgc3RyKHBhdGhzLnN1cnZleV9yZXN1bHRfanNvbi5yZWxhdGl2ZV90byhvdXRwdXRzX2RpcikpLAogICAgICAgIHsic2NoZW1hIjogcmVzdWx0X3BheWxvYWQuZ2V0KCJzY2hlbWEiKSwgImtpbmQiOiAiZG9tYWluX2FydGlmYWN0IiwgInN0YXR1cyI6IHN0YXR1c30sCiAgICApCiAgICBfcmVjb3JkX3J1bl9ldmVudCgKICAgICAgICBwYXRocywKICAgICAgICAic3VydmV5X3JldHJ5X2ZpbmlzaGVkIiwKICAgICAgICB7InN0YXR1cyI6IHN0YXR1cywgInJlc3VsdF9wYXRoIjogc3RyKHBhdGhzLnN1cnZleV9yZXN1bHRfanNvbiwKICAgICAgICJpbmRleF9wYXRoIjogc3RyKHBhdGhzLmluZGV4X2pzb24pfSwKICAgICkKICAgIHJldHVybiByZXN1bHRfcGF5bG9hZApkZWYgbWFpbihhcmd2OiBPcHRpb25hbFtsaXN0W3N0cl1dID0gTm9uZSkgLT4gaW50OgogICAgaW1wb3J0IGFyZ3BhcnNlCgogICAgcCA9IGFyZ3BhcnNlLkFyZ3VtZW50UGFyc2VyKGRlc2NyaXB0aW9uPSJSZS1hdHRlbXB0IHRoZSBibG9ja2VkIHN1cnZleSB0YXNrIHVzaW5nIGNhbm9uaWNhbCBvdXRwdXRzIGFydGlmYWN0cy4iKQogICAgcC5hZGRfYXJndW1lbnQoIi0tb3V0cHV0cyIsIGRlZmF1bHQ9b3MuZW52aXJvbi5nZXQoIk9VVFBVVFNfRElSIiwgIm91dHB1dHMiKSwgaGVscD0iT3V0cHV0cyBkaXJlY3Rvcnkgcm9vdC4iKQogICAgcC5hZGRfYXJndW1lbnQoIi0tcnVuLWlkIiwgZGVmYXVsdD1vcy5lbnZpcm9uLmdldCgiUlVOX0lEIiwgImxvY2FsIiksIGhlbHA9IlJ1biBpZGVudGlmaWVyLiIpCiAgICBwLmFkZF9hcmd1bWVudCgiLS1ibG9ja2VkLXJlYXNvbiIsIGRlZmF1bHQ9Tm9uZSwgaGVscD0iT3JpZ2luYWwgYmxvY2tlZCByZWFzb24gKGZvciBldmlkZW5jZSkuIikKICAgIGFyZ3MgPSBwLnBhcnNlX2FyZ3MoYXJndikKCiAgICByZXN1bHQgPSByZWF0dGVtcHRfYmxvY2tlZF9zdXJ2ZXkoUGF0aChhcmdzLm91dHB1dHMpLCBhcmdzLnJ1bl9pZCwgYmxvY2tlZF9yZWFzb249YXJncy5ibG9ja2VkX3JlYXNvbikKICAgIHByaW50KGpzb24uZHVtcHMocmVzdWx0LCBpbmRlbnQ9Miwgc29ydF9rZXlzPVRydWUpKQogICAgcmV0dXJuIDAKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgcmFpc2UgU3lzdGVtRXhpdChtYWluKCkpCg==\"}\nDIR_STATE:[\"src/artifacts.py\",\"src/cli.py\",\"src/pipeline.py\",\"src/survey_retry.py\"]",
  "reasoning": "",
  "responseId": "resp_0b2a6c5239719f5500694b43e24ddc8195a6fe403b80998392",
  "model": "gpt-5.2-2025-12-11",
  "usage": {
    "input_tokens": 6431,
    "input_tokens_details": {
      "cached_tokens": 0
    },
    "output_tokens": 5410,
    "output_tokens_details": {
      "reasoning_tokens": 32
    },
    "total_tokens": 11841
  },
  "hadError": false,
  "errorType": null,
  "webSearchSources": [],
  "citations": [],
  "output": [
    {
      "id": "rs_0b2a6c5239719f5500694b43e2f2a481959e623234ec1179d7",
      "type": "reasoning",
      "summary": []
    },
    {
      "id": "ci_0b2a6c5239719f5500694b43e369cc8195bc856ab2510b2ad5",
      "type": "code_interpreter_call",
      "status": "completed",
      "code": "from pathlib import Path\nimport base64, json, hashlib, gzip\n\ntarget_path = Path('/mnt/data').joinpath('src/survey_retry.py')\nassert target_path.is_file(), 'Expected src/survey_retry.py to exist before export'\ndata = target_path.read_bytes()\npayload = {\n   'path': 'src/survey_retry.py',\n   'size': len(data),\n   'encoding': 'base64',\n   'sha256': hashlib.sha256(data).hexdigest(),\n   'content': None\n}\nif len(data) > 20000:\n    compressed = gzip.compress(data)\n    payload['encoding'] = 'gzip+base64'\n    payload['content'] = base64.b64encode(compressed).decode('ascii')\nelse:\n    payload['content'] = base64.b64encode(data).decode('ascii')\n\nprint('FILE_EXPORT:' + json.dumps(payload, separators=(',', ':')))\nprint('DIR_STATE:' + json.dumps(sorted(str(p.relative_to(Path(\"/mnt/data\"))) for p in target_path.parent.glob('*') if p.is_file())))",
      "container_id": "cntr_694b4314d77c819084b238f98e62933e01fe1adc72e44fe7",
      "outputs": [
        {
          "type": "logs",
          "logs": "FILE_EXPORT:{\"path\":\"src/survey_retry.py\",\"size\":6058,\"encoding\":\"base64\",\"sha256\":\"923e94e69b4abb157e4694fc8c33100d5079e3ff22692d84c44ba66440756405\",\"content\":\"ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lLCB0aW1lem9uZQpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKaW1wb3J0IGpzb24KaW1wb3J0IG9zCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIERpY3QsIE9wdGlvbmFsCgoKZGVmIF91dGNfbm93X2lzbygpIC0+IHN0cjoKICAgIHJldHVybiBkYXRldGltZS5ub3codGltZXpvbmUudXRjKS5pc29mb3JtYXQodGltZXNwZWM9InNlY29uZHMiKQoKCmRlZiBfcmVhZF9qc29uKHBhdGg6IFBhdGgpIC0+IE9wdGlvbmFsW0RpY3Rbc3RyLCBBbnldXToKICAgIGlmIG5vdCBwYXRoLmV4aXN0cygpOgogICAgICAgIHJldHVybiBOb25lCiAgICByZXR1cm4ganNvbi5sb2FkcyhwYXRoLnJlYWRfdGV4dChlbmNvZGluZz0idXRmLTgiKSkKCgpkZWYgX3dyaXRlX2pzb24ocGF0aDogUGF0aCwgb2JqOiBEaWN0W3N0ciwgQW55XSkgLT4gTm9uZToKICAgIHBhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHBhdGgud3JpdGVfdGV4dChqc29uLmR1bXBzKG9iaiwgaW5kZW50PTIsIHNvcnRfa2V5cz1UcnVlKSArICJcbiIsIGVuY29kaW5nPSJ1dGYtOCIpCgoKZGVmIF9hcHBlbmRfanNvbmwocGF0aDogUGF0aCwgb2JqOiBEaWN0W3N0ciwgQW55XSkgLT4gTm9uZToKICAgIHBhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHdpdGggcGF0aC5vcGVuKCJhIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgZjoKICAgICAgICBmLndyaXRlKGpzb24uZHVtcHMob2JqLCBzb3J0X2tleXM9VHJ1ZSkgKyAiXG4iKQoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUpCmNsYXNzIENhbm9uaWNhbFBhdGhzOgogICAgb3V0cHV0c19kaXI6IFBhdGgKICAgIHJ1bl9pZDogc3RyCgogICAgQHByb3BlcnR5CiAgICBkZWYgaW5kZXhfanNvbihzZWxmKSAtPiBQYXRoOgogICAgICAgIHJldHVybiBzZWxmLm91dHB1dHNfZGlyIC8gImluZGV4Lmpzb24iCgogICAgQHByb3BlcnR5CiAgICBkZWYgcnVuX2RpcihzZWxmKSAtPiBQYXRoOgogICAgICAgIHJldHVybiBzZWxmLm91dHB1dHNfZGlyIC8gInJ1bnMiIC8gc2VsZi5ydW5faWQKCiAgICBAcHJvcGVydHkKICAgIGRlZiBydW5fZXZpZGVuY2VfanNvbmwoc2VsZikgLT4gUGF0aDoKICAgICAgICByZXR1cm4gc2VsZi5ydW5fZGlyIC8gInJ1bl9ldmlkZW5jZS5qc29ubCIKCiAgICBAcHJvcGVydHkKICAgIGRlZiBzdXJ2ZXlfZG9tYWluX2RpcihzZWxmKSAtPiBQYXRoOgogICAgICAgIHJldHVybiBzZWxmLm91dHB1dHNfZGlyIC8gImRvbWFpbiIgLyAic3VydmV5IgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHN1cnZleV9pbnB1dF9qc29uKHNlbGYpIC0+IFBhdGg6CiAgICAgICAgcmV0dXJuIHNlbGYuc3VydmV5X2RvbWFpbl9kaXIgLyAic3VydmV5X2lucHV0Lmpzb24iCgogICAgQHByb3BlcnR5CiAgICBkZWYgc3VydmV5X3Jlc3VsdF9qc29uKHNlbGYpIC0+IFBhdGg6CiAgICAgICAgcmV0dXJuIHNlbGYuc3VydmV5X2RvbWFpbl9kaXIgLyAic3VydmV5X3Jlc3VsdC5qc29uIgpkZWYgX3VwZGF0ZV9vdXRwdXRzX2luZGV4KHBhdGhzOiBDYW5vbmljYWxQYXRocywgYXJ0aWZhY3Rfa2V5OiBzdHIsIHJlbF9wYXRoOiBzdHIsIG1ldGE6IERpY3Rbc3RyLCBBbnldKSAtPiBOb25lOgogICAgIiIiVXBzZXJ0cyBhIHNpbmdsZSBhcnRpZmFjdCBlbnRyeSBpbiBvdXRwdXRzL2luZGV4Lmpzb24gKGRldGVybWluaXN0aWMgbG9jYXRpb24pLiIiIgogICAgaWR4ID0gX3JlYWRfanNvbihwYXRocy5pbmRleF9qc29uKSBvciB7InNjaGVtYSI6ICJvdXRwdXRzLWluZGV4LnYxIiwgImFydGlmYWN0cyI6IHt9fQogICAgYXJ0aWZhY3RzID0gaWR4LnNldGRlZmF1bHQoImFydGlmYWN0cyIsIHt9KQogICAgYXJ0aWZhY3RzW2FydGlmYWN0X2tleV0gPSB7InBhdGgiOiByZWxfcGF0aCwgInVwZGF0ZWRfYXQiOiBfdXRjX25vd19pc28oKSwgKiptZXRhfQogICAgX3dyaXRlX2pzb24ocGF0aHMuaW5kZXhfanNvbiwgaWR4KQoKCmRlZiBfcmVjb3JkX3J1bl9ldmVudChwYXRoczogQ2Fub25pY2FsUGF0aHMsIGV2ZW50X3R5cGU6IHN0ciwgcGF5bG9hZDogRGljdFtzdHIsIEFueV0pIC0+IE5vbmU6CiAgICBfYXBwZW5kX2pzb25sKAogICAgICAgIHBhdGhzLnJ1bl9ldmlkZW5jZV9qc29ubCwKICAgICAgICB7InRzIjogX3V0Y19ub3dfaXNvKCksICJydW5faWQiOiBwYXRocy5ydW5faWQsICJldmVudCI6IGV2ZW50X3R5cGUsICJwYXlsb2FkIjogcGF5bG9hZH0sCiAgICApCmRlZiByZWF0dGVtcHRfYmxvY2tlZF9zdXJ2ZXkoCiAgICBvdXRwdXRzX2RpcjogUGF0aCwKICAgIHJ1bl9pZDogc3RyLAogICAgKiwKICAgIGJsb2NrZWRfcmVhc29uOiBPcHRpb25hbFtzdHJdID0gTm9uZSwKICAgIGNvbnRleHQ6IE9wdGlvbmFsW0RpY3Rbc3RyLCBBbnldXSA9IE5vbmUsCikgLT4gRGljdFtzdHIsIEFueV06CiAgICAiIiJSZS1hdHRlbXB0IHRoZSBwcmV2aW91c2x5IGJsb2NrZWQgc3VydmV5IHRhc2sgdXNpbmcgY2Fub25pY2FsIC9vdXRwdXRzIGFydGlmYWN0cy4KCiAgICBUaGlzIGltcGxlbWVudGF0aW9uIGlzIG9mZmxpbmUvQ0ktc2FmZTogaXQgcmV1c2VzIGEgbG9jYWwgc3VydmV5X2lucHV0Lmpzb24gaWYgcHJlc2VudC4KICAgIElmIGFic2VudCwgaXQgd3JpdGVzIGEgc3R1YiBpbnB1dCBhbmQgcmVjb3JkcyBhIGJsb2NrZWQgcmVzdWx0IHdoaWxlIHN0aWxsIHByb2R1Y2luZyBldmlkZW5jZS4KICAgICIiIgogICAgb3V0cHV0c19kaXIgPSBQYXRoKG91dHB1dHNfZGlyKQogICAgcGF0aHMgPSBDYW5vbmljYWxQYXRocyhvdXRwdXRzX2Rpcj1vdXRwdXRzX2RpciwgcnVuX2lkPXJ1bl9pZCkKICAgIGN0eCA9IGNvbnRleHQgb3Ige30KCiAgICBfcmVjb3JkX3J1bl9ldmVudChwYXRocywgInN1cnZleV9yZXRyeV9zdGFydGVkIiwgeyJibG9ja2VkX3JlYXNvbiI6IGJsb2NrZWRfcmVhc29uLCAiY29udGV4dCI6IGN0eH0pCgogICAgc3VydmV5X2lucHV0ID0gX3JlYWRfanNvbihwYXRocy5zdXJ2ZXlfaW5wdXRfanNvbikKICAgIGlmIHN1cnZleV9pbnB1dCBpcyBOb25lOgogICAgICAgIHN1cnZleV9pbnB1dCA9IHsKICAgICAgICAgICAgInNjaGVtYSI6ICJzdXJ2ZXktaW5wdXQudjEiLAogICAgICAgICAgICAibm90ZSI6ICJObyBpbnB1dCBwcm92aWRlZDsgcmV0cnkgcnVucyBpbiBvZmZsaW5lIG1vZGUgYW5kIGNhbm5vdCBmZXRjaCBleHRlcm5hbCBzdXJ2ZXkgc291cmNlLiIsCiAgICAgICAgICAgICJjb250ZXh0IjogY3R4LAogICAgICAgIH0KICAgICAgICBfd3JpdGVfanNvbihwYXRocy5zdXJ2ZXlfaW5wdXRfanNvbiwgc3VydmV5X2lucHV0KQogICAgICAgIF91cGRhdGVfb3V0cHV0c19pbmRleCgKICAgICAgICAgICAgcGF0aHMsCiAgICAgICAgICAgICJkb21haW4uc3VydmV5LmlucHV0IiwKICAgICAgICAgICAgc3RyKHBhdGhzLnN1cnZleV9pbnB1dF9qc29uLnJlbGF0aXZlX3RvKG91dHB1dHNfZGlyKSksCiAgICAgICAgICAgIHsic2NoZW1hIjogc3VydmV5X2lucHV0LmdldCgic2NoZW1hIiksICJraW5kIjogImRvbWFpbl9hcnRpZmFjdCJ9LAogICAgICAgICkKICAgICAgICBfcmVjb3JkX3J1bl9ldmVudChwYXRocywgInN1cnZleV9yZXRyeV9pbnB1dF9zdHViX3dyaXR0ZW4iLCB7InBhdGgiOiBzdHIocGF0aHMuc3VydmV5X2lucHV0X2pzb24pfSkKCiAgICBxdWVzdGlvbnMgPSBzdXJ2ZXlfaW5wdXQuZ2V0KCJxdWVzdGlvbnMiKQogICAgYW5zd2VycyA9IHN1cnZleV9pbnB1dC5nZXQoImFuc3dlcnMiKQogICAgY2FuX2NvbXBsZXRlID0gaXNpbnN0YW5jZShxdWVzdGlvbnMsIGxpc3QpIGFuZCAoYW5zd2VycyBpcyBOb25lIG9yIGlzaW5zdGFuY2UoYW5zd2VycywgZGljdCkpCgogICAgaWYgY2FuX2NvbXBsZXRlOgogICAgICAgIHN0YXR1cyA9ICJjb21wbGV0ZWQiCiAgICAgICAgc3VtbWFyeSA9IHsicXVlc3Rpb25fY291bnQiOiBsZW4ocXVlc3Rpb25zKSwgImFuc3dlcmVkX2NvdW50IjogbGVuKGFuc3dlcnMgb3Ige30pfQogICAgICAgIHJlc3VsdF9wYXlsb2FkOiBEaWN0W3N0ciwgQW55XSA9IHsKICAgICAgICAgICAgInNjaGVtYSI6ICJzdXJ2ZXktcmVzdWx0LnYxIiwKICAgICAgICAgICAgInN0YXR1cyI6IHN0YXR1cywKICAgICAgICAgICAgInN1bW1hcnkiOiBzdW1tYXJ5LAogICAgICAgICAgICAiaW5wdXRfcGF0aCI6IHN0cihwYXRocy5zdXJ2ZXlfaW5wdXRfanNvbi5yZWxhdGl2ZV90byhvdXRwdXRzX2RpcikpLAogICAgICAgICAgICAiYmxvY2tlZF9yZWFzb24iOiBibG9ja2VkX3JlYXNvbiwKICAgICAgICB9CiAgICBlbHNlOgogICAgICAgIHN0YXR1cyA9ICJibG9ja2VkIgogICAgICAgIHJlc3VsdF9wYXlsb2FkID0gewogICAgICAgICAgICAic2NoZW1hIjogInN1cnZleS1yZXN1bHQudjEiLAogICAgICAgICAgICAic3RhdHVzIjogc3RhdHVzLAogICAgICAgICAgICAiYmxvY2tlZF9yZWFzb24iOiBibG9ja2VkX3JlYXNvbiBvciAibWlzc2luZ19vcl9pbnZhbGlkX2xvY2FsX2lucHV0IiwKICAgICAgICAgICAgImlucHV0X3BhdGgiOiBzdHIocGF0aHMuc3VydmV5X2lucHV0X2pzb24ucmVsYXRpdmVfdG8ob3V0cHV0c19kaXIpKSwKICAgICAgICAgICAgImhpbnQiOiAiUHJvdmlkZSBvdXRwdXRzL2RvbWFpbi9zdXJ2ZXkvc3VydmV5X2lucHV0Lmpzb24gd2l0aCBhICdxdWVzdGlvbnMnIGxpc3QgdG8gY29tcGxldGUgb2ZmbGluZS4iLAogICAgICAgIH0KCiAgICBfd3JpdGVfanNvbihwYXRocy5zdXJ2ZXlfcmVzdWx0X2pzb24sIHJlc3VsdF9wYXlsb2FkKQogICAgX3VwZGF0ZV9vdXRwdXRzX2luZGV4KAogICAgICAgIHBhdGhzLAogICAgICAgICJkb21haW4uc3VydmV5LnJlc3VsdCIsCiAgICAgICAgc3RyKHBhdGhzLnN1cnZleV9yZXN1bHRfanNvbi5yZWxhdGl2ZV90byhvdXRwdXRzX2RpcikpLAogICAgICAgIHsic2NoZW1hIjogcmVzdWx0X3BheWxvYWQuZ2V0KCJzY2hlbWEiKSwgImtpbmQiOiAiZG9tYWluX2FydGlmYWN0IiwgInN0YXR1cyI6IHN0YXR1c30sCiAgICApCiAgICBfcmVjb3JkX3J1bl9ldmVudCgKICAgICAgICBwYXRocywKICAgICAgICAic3VydmV5X3JldHJ5X2ZpbmlzaGVkIiwKICAgICAgICB7InN0YXR1cyI6IHN0YXR1cywgInJlc3VsdF9wYXRoIjogc3RyKHBhdGhzLnN1cnZleV9yZXN1bHRfanNvbiksICJpbmRleF9wYXRoIjogc3RyKHBhdGhzLmluZGV4X2pzb24pfSwKICAgICkKICAgIHJldHVybiByZXN1bHRfcGF5bG9hZApkZWYgbWFpbihhcmd2OiBPcHRpb25hbFtsaXN0W3N0cl1dID0gTm9uZSkgLT4gaW50OgogICAgaW1wb3J0IGFyZ3BhcnNlCgogICAgcCA9IGFyZ3BhcnNlLkFyZ3VtZW50UGFyc2VyKGRlc2NyaXB0aW9uPSJSZS1hdHRlbXB0IHRoZSBibG9ja2VkIHN1cnZleSB0YXNrIHVzaW5nIGNhbm9uaWNhbCBvdXRwdXRzIGFydGlmYWN0cy4iKQogICAgcC5hZGRfYXJndW1lbnQoIi0tb3V0cHV0cyIsIGRlZmF1bHQ9b3MuZW52aXJvbi5nZXQoIk9VVFBVVFNfRElSIiwgIm91dHB1dHMiKSwgaGVscD0iT3V0cHV0cyBkaXJlY3Rvcnkgcm9vdC4iKQogICAgcC5hZGRfYXJndW1lbnQoIi0tcnVuLWlkIiwgZGVmYXVsdD1vcy5lbnZpcm9uLmdldCgiUlVOX0lEIiwgImxvY2FsIiksIGhlbHA9IlJ1biBpZGVudGlmaWVyLiIpCiAgICBwLmFkZF9hcmd1bWVudCgiLS1ibG9ja2VkLXJlYXNvbiIsIGRlZmF1bHQ9Tm9uZSwgaGVscD0iT3JpZ2luYWwgYmxvY2tlZCByZWFzb24gKGZvciBldmlkZW5jZSkuIikKICAgIGFyZ3MgPSBwLnBhcnNlX2FyZ3MoYXJndikKCiAgICByZXN1bHQgPSByZWF0dGVtcHRfYmxvY2tlZF9zdXJ2ZXkoUGF0aChhcmdzLm91dHB1dHMpLCBhcmdzLnJ1bl9pZCwgYmxvY2tlZF9yZWFzb249YXJncy5ibG9ja2VkX3JlYXNvbikKICAgIHByaW50KGpzb24uZHVtcHMocmVzdWx0LCBpbmRlbnQ9Miwgc29ydF9rZXlzPVRydWUpKQogICAgcmV0dXJuIDAKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgcmFpc2UgU3lzdGVtRXhpdChtYWluKCkpCg==\"}\nDIR_STATE:[\"src/artifacts.py\", \"src/cli.py\", \"src/pipeline.py\", \"src/survey_retry.py\"]\n"
        }
      ]
    },
    {
      "id": "msg_0b2a6c5239719f5500694b43e64ef08195b2905e20bab448c3",
      "type": "message",
      "status": "completed",
      "content": [
        {
          "type": "output_text",
          "annotations": [],
          "logprobs": [],
          "text": "FILE_EXPORT:{\"path\":\"src/survey_retry.py\",\"size\":6058,\"encoding\":\"base64\",\"sha256\":\"923e94e69b4abb157e4694fc8c33100d5079e3ff22692d84c44ba66440756405\",\"content\":\"ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lLCB0aW1lem9uZQpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKaW1wb3J0IGpzb24KaW1wb3J0IG9zCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIERpY3QsIE9wdGlvbmFsCgoKZGVmIF91dGNfbm93X2lzbygpIC0+IHN0cjoKICAgIHJldHVybiBkYXRldGltZS5ub3codGltZXpvbmUudXRjKS5pc29mb3JtYXQodGltZXNwZWM9InNlY29uZHMiKQoKCmRlZiBfcmVhZF9qc29uKHBhdGg6IFBhdGgpIC0+IE9wdGlvbmFsW0RpY3Rbc3RyLCBBbnldXToKICAgIGlmIG5vdCBwYXRoLmV4aXN0cygpOgogICAgICAgIHJldHVybiBOb25lCiAgICByZXR1cm4ganNvbi5sb2FkcyhwYXRoLnJlYWRfdGV4dChlbmNvZGluZz0idXRmLTgiKSkKCgpkZWYgX3dyaXRlX2pzb24ocGF0aDogUGF0aCwgb2JqOiBEaWN0W3N0ciwgQW55XSkgLT4gTm9uZToKICAgIHBhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHBhdGgud3JpdGVfdGV4dChqc29uLmR1bXBzKG9iaiwgaW5kZW50PTIsIHNvcnRfa2V5cz1UcnVlKSArICJcbiIsIGVuY29kaW5nPSJ1dGYtOCIpCgoKZGVmIF9hcHBlbmRfanNvbmwocGF0aDogUGF0aCwgb2JqOiBEaWN0W3N0ciwgQW55XSkgLT4gTm9uZToKICAgIHBhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHdpdGggcGF0aC5vcGVuKCJhIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgZjoKICAgICAgICBmLndyaXRlKGpzb24uZHVtcHMob2JqLCBzb3J0X2tleXM9VHJ1ZSkgKyAiXG4iKQoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUpCmNsYXNzIENhbm9uaWNhbFBhdGhzOgogICAgb3V0cHV0c19kaXI6IFBhdGgKICAgIHJ1bl9pZDogc3RyCgogICAgQHByb3BlcnR5CiAgICBkZWYgaW5kZXhfanNvbihzZWxmKSAtPiBQYXRoOgogICAgICAgIHJldHVybiBzZWxmLm91dHB1dHNfZGlyIC8gImluZGV4Lmpzb24iCgogICAgQHByb3BlcnR5CiAgICBkZWYgcnVuX2RpcihzZWxmKSAtPiBQYXRoOgogICAgICAgIHJldHVybiBzZWxmLm91dHB1dHNfZGlyIC8gInJ1bnMiIC8gc2VsZi5ydW5faWQKCiAgICBAcHJvcGVydHkKICAgIGRlZiBydW5fZXZpZGVuY2VfanNvbmwoc2VsZikgLT4gUGF0aDoKICAgICAgICByZXR1cm4gc2VsZi5ydW5fZGlyIC8gInJ1bl9ldmlkZW5jZS5qc29ubCIKCiAgICBAcHJvcGVydHkKICAgIGRlZiBzdXJ2ZXlfZG9tYWluX2RpcihzZWxmKSAtPiBQYXRoOgogICAgICAgIHJldHVybiBzZWxmLm91dHB1dHNfZGlyIC8gImRvbWFpbiIgLyAic3VydmV5IgoKICAgIEBwcm9wZXJ0eQogICAgZGVmIHN1cnZleV9pbnB1dF9qc29uKHNlbGYpIC0+IFBhdGg6CiAgICAgICAgcmV0dXJuIHNlbGYuc3VydmV5X2RvbWFpbl9kaXIgLyAic3VydmV5X2lucHV0Lmpzb24iCgogICAgQHByb3BlcnR5CiAgICBkZWYgc3VydmV5X3Jlc3VsdF9qc29uKHNlbGYpIC0+IFBhdGg6CiAgICAgICAgcmV0dXJuIHNlbGYuc3VydmV5X2RvbWFpbl9kaXIgLyAic3VydmV5X3Jlc3VsdC5qc29uIgpkZWYgX3VwZGF0ZV9vdXRwdXRzX2luZGV4KHBhdGhzOiBDYW5vbmljYWxQYXRocywgYXJ0aWZhY3Rfa2V5OiBzdHIsIHJlbF9wYXRoOiBzdHIsIG1ldGE6IERpY3Rbc3RyLCBBbnldKSAtPiBOb25lOgogICAgIiIiVXBzZXJ0cyBhIHNpbmdsZSBhcnRpZmFjdCBlbnRyeSBpbiBvdXRwdXRzL2luZGV4Lmpzb24gKGRldGVybWluaXN0aWMgbG9jYXRpb24pLiIiIgogICAgaWR4ID0gX3JlYWRfanNvbihwYXRocy5pbmRleF9qc29uKSBvciB7InNjaGVtYSI6ICJvdXRwdXRzLWluZGV4LnYxIiwgImFydGlmYWN0cyI6IHt9fQogICAgYXJ0aWZhY3RzID0gaWR4LnNldGRlZmF1bHQoImFydGlmYWN0cyIsIHt9KQogICAgYXJ0aWZhY3RzW2FydGlmYWN0X2tleV0gPSB7InBhdGgiOiByZWxfcGF0aCwgInVwZGF0ZWRfYXQiOiBfdXRjX25vd19pc28oKSwgKiptZXRhfQogICAgX3dyaXRlX2pzb24ocGF0aHMuaW5kZXhfanNvbiwgaWR4KQoKCmRlZiBfcmVjb3JkX3J1bl9ldmVudChwYXRoczogQ2Fub25pY2FsUGF0aHMsIGV2ZW50X3R5cGU6IHN0ciwgcGF5bG9hZDogRGljdFtzdHIsIEFueV0pIC0+IE5vbmU6CiAgICBfYXBwZW5kX2pzb25sKAogICAgICAgIHBhdGhzLnJ1bl9ldmlkZW5jZV9qc29ubCwKICAgICAgICB7InRzIjogX3V0Y19ub3dfaXNvKCksICJydW5faWQiOiBwYXRocy5ydW5faWQsICJldmVudCI6IGV2ZW50X3R5cGUsICJwYXlsb2FkIjogcGF5bG9hZH0sCiAgICApCmRlZiByZWF0dGVtcHRfYmxvY2tlZF9zdXJ2ZXkoCiAgICBvdXRwdXRzX2RpcjogUGF0aCwKICAgIHJ1bl9pZDogc3RyLAogICAgKiwKICAgIGJsb2NrZWRfcmVhc29uOiBPcHRpb25hbFtzdHJdID0gTm9uZSwKICAgIGNvbnRleHQ6IE9wdGlvbmFsW0RpY3Rbc3RyLCBBbnldXSA9IE5vbmUsCikgLT4gRGljdFtzdHIsIEFueV06CiAgICAiIiJSZS1hdHRlbXB0IHRoZSBwcmV2aW91c2x5IGJsb2NrZWQgc3VydmV5IHRhc2sgdXNpbmcgY2Fub25pY2FsIC9vdXRwdXRzIGFydGlmYWN0cy4KCiAgICBUaGlzIGltcGxlbWVudGF0aW9uIGlzIG9mZmxpbmUvQ0ktc2FmZTogaXQgcmV1c2VzIGEgbG9jYWwgc3VydmV5X2lucHV0Lmpzb24gaWYgcHJlc2VudC4KICAgIElmIGFic2VudCwgaXQgd3JpdGVzIGEgc3R1YiBpbnB1dCBhbmQgcmVjb3JkcyBhIGJsb2NrZWQgcmVzdWx0IHdoaWxlIHN0aWxsIHByb2R1Y2luZyBldmlkZW5jZS4KICAgICIiIgogICAgb3V0cHV0c19kaXIgPSBQYXRoKG91dHB1dHNfZGlyKQogICAgcGF0aHMgPSBDYW5vbmljYWxQYXRocyhvdXRwdXRzX2Rpcj1vdXRwdXRzX2RpciwgcnVuX2lkPXJ1bl9pZCkKICAgIGN0eCA9IGNvbnRleHQgb3Ige30KCiAgICBfcmVjb3JkX3J1bl9ldmVudChwYXRocywgInN1cnZleV9yZXRyeV9zdGFydGVkIiwgeyJibG9ja2VkX3JlYXNvbiI6IGJsb2NrZWRfcmVhc29uLCAiY29udGV4dCI6IGN0eH0pCgogICAgc3VydmV5X2lucHV0ID0gX3JlYWRfanNvbihwYXRocy5zdXJ2ZXlfaW5wdXRfanNvbikKICAgIGlmIHN1cnZleV9pbnB1dCBpcyBOb25lOgogICAgICAgIHN1cnZleV9pbnB1dCA9IHsKICAgICAgICAgICAgInNjaGVtYSI6ICJzdXJ2ZXktaW5wdXQudjEiLAogICAgICAgICAgICAibm90ZSI6ICJObyBpbnB1dCBwcm92aWRlZDsgcmV0cnkgcnVucyBpbiBvZmZsaW5lIG1vZGUgYW5kIGNhbm5vdCBmZXRjaCBleHRlcm5hbCBzdXJ2ZXkgc291cmNlLiIsCiAgICAgICAgICAgICJjb250ZXh0IjogY3R4LAogICAgICAgIH0KICAgICAgICBfd3JpdGVfanNvbihwYXRocy5zdXJ2ZXlfaW5wdXRfanNvbiwgc3VydmV5X2lucHV0KQogICAgICAgIF91cGRhdGVfb3V0cHV0c19pbmRleCgKICAgICAgICAgICAgcGF0aHMsCiAgICAgICAgICAgICJkb21haW4uc3VydmV5LmlucHV0IiwKICAgICAgICAgICAgc3RyKHBhdGhzLnN1cnZleV9pbnB1dF9qc29uLnJlbGF0aXZlX3RvKG91dHB1dHNfZGlyKSksCiAgICAgICAgICAgIHsic2NoZW1hIjogc3VydmV5X2lucHV0LmdldCgic2NoZW1hIiksICJraW5kIjogImRvbWFpbl9hcnRpZmFjdCJ9LAogICAgICAgICkKICAgICAgICBfcmVjb3JkX3J1bl9ldmVudChwYXRocywgInN1cnZleV9yZXRyeV9pbnB1dF9zdHViX3dyaXR0ZW4iLCB7InBhdGgiOiBzdHIocGF0aHMuc3VydmV5X2lucHV0X2pzb24pfSkKCiAgICBxdWVzdGlvbnMgPSBzdXJ2ZXlfaW5wdXQuZ2V0KCJxdWVzdGlvbnMiKQogICAgYW5zd2VycyA9IHN1cnZleV9pbnB1dC5nZXQoImFuc3dlcnMiKQogICAgY2FuX2NvbXBsZXRlID0gaXNpbnN0YW5jZShxdWVzdGlvbnMsIGxpc3QpIGFuZCAoYW5zd2VycyBpcyBOb25lIG9yIGlzaW5zdGFuY2UoYW5zd2VycywgZGljdCkpCgogICAgaWYgY2FuX2NvbXBsZXRlOgogICAgICAgIHN0YXR1cyA9ICJjb21wbGV0ZWQiCiAgICAgICAgc3VtbWFyeSA9IHsicXVlc3Rpb25fY291bnQiOiBsZW4ocXVlc3Rpb25zKSwgImFuc3dlcmVkX2NvdW50IjogbGVuKGFuc3dlcnMgb3Ige30pfQogICAgICAgIHJlc3VsdF9wYXlsb2FkOiBEaWN0W3N0ciwgQW55XSA9IHsKICAgICAgICAgICAgInNjaGVtYSI6ICJzdXJ2ZXktcmVzdWx0LnYxIiwKICAgICAgICAgICAgInN0YXR1cyI6IHN0YXR1cywKICAgICAgICAgICAgInN1bW1hcnkiOiBzdW1tYXJ5LAogICAgICAgICAgICAiaW5wdXRfcGF0aCI6IHN0cihwYXRocy5zdXJ2ZXlfaW5wdXRfanNvbi5yZWxhdGl2ZV90byhvdXRwdXRzX2RpcikpLAogICAgICAgICAgICAiYmxvY2tlZF9yZWFzb24iOiBibG9ja2VkX3JlYXNvbiwKICAgICAgICB9CiAgICBlbHNlOgogICAgICAgIHN0YXR1cyA9ICJibG9ja2VkIgogICAgICAgIHJlc3VsdF9wYXlsb2FkID0gewogICAgICAgICAgICAic2NoZW1hIjogInN1cnZleS1yZXN1bHQudjEiLAogICAgICAgICAgICAic3RhdHVzIjogc3RhdHVzLAogICAgICAgICAgICAiYmxvY2tlZF9yZWFzb24iOiBibG9ja2VkX3JlYXNvbiBvciAibWlzc2luZ19vcl9pbnZhbGlkX2xvY2FsX2lucHV0IiwKICAgICAgICAgICAgImlucHV0X3BhdGgiOiBzdHIocGF0aHMuc3VydmV5X2lucHV0X2pzb24ucmVsYXRpdmVfdG8ob3V0cHV0c19kaXIpKSwKICAgICAgICAgICAgImhpbnQiOiAiUHJvdmlkZSBvdXRwdXRzL2RvbWFpbi9zdXJ2ZXkvc3VydmV5X2lucHV0Lmpzb24gd2l0aCBhICdxdWVzdGlvbnMnIGxpc3QgdG8gY29tcGxldGUgb2ZmbGluZS4iLAogICAgICAgIH0KCiAgICBfd3JpdGVfanNvbihwYXRocy5zdXJ2ZXlfcmVzdWx0X2pzb24sIHJlc3VsdF9wYXlsb2FkKQogICAgX3VwZGF0ZV9vdXRwdXRzX2luZGV4KAogICAgICAgIHBhdGhzLAogICAgICAgICJkb21haW4uc3VydmV5LnJlc3VsdCIsCiAgICAgICAgc3RyKHBhdGhzLnN1cnZleV9yZXN1bHRfanNvbi5yZWxhdGl2ZV90byhvdXRwdXRzX2RpcikpLAogICAgICAgIHsic2NoZW1hIjogcmVzdWx0X3BheWxvYWQuZ2V0KCJzY2hlbWEiKSwgImtpbmQiOiAiZG9tYWluX2FydGlmYWN0IiwgInN0YXR1cyI6IHN0YXR1c30sCiAgICApCiAgICBfcmVjb3JkX3J1bl9ldmVudCgKICAgICAgICBwYXRocywKICAgICAgICAic3VydmV5X3JldHJ5X2ZpbmlzaGVkIiwKICAgICAgICB7InN0YXR1cyI6IHN0YXR1cywgInJlc3VsdF9wYXRoIjogc3RyKHBhdGhzLnN1cnZleV9yZXN1bHRfanNvbiwKICAgICAgICJpbmRleF9wYXRoIjogc3RyKHBhdGhzLmluZGV4X2pzb24pfSwKICAgICkKICAgIHJldHVybiByZXN1bHRfcGF5bG9hZApkZWYgbWFpbihhcmd2OiBPcHRpb25hbFtsaXN0W3N0cl1dID0gTm9uZSkgLT4gaW50OgogICAgaW1wb3J0IGFyZ3BhcnNlCgogICAgcCA9IGFyZ3BhcnNlLkFyZ3VtZW50UGFyc2VyKGRlc2NyaXB0aW9uPSJSZS1hdHRlbXB0IHRoZSBibG9ja2VkIHN1cnZleSB0YXNrIHVzaW5nIGNhbm9uaWNhbCBvdXRwdXRzIGFydGlmYWN0cy4iKQogICAgcC5hZGRfYXJndW1lbnQoIi0tb3V0cHV0cyIsIGRlZmF1bHQ9b3MuZW52aXJvbi5nZXQoIk9VVFBVVFNfRElSIiwgIm91dHB1dHMiKSwgaGVscD0iT3V0cHV0cyBkaXJlY3Rvcnkgcm9vdC4iKQogICAgcC5hZGRfYXJndW1lbnQoIi0tcnVuLWlkIiwgZGVmYXVsdD1vcy5lbnZpcm9uLmdldCgiUlVOX0lEIiwgImxvY2FsIiksIGhlbHA9IlJ1biBpZGVudGlmaWVyLiIpCiAgICBwLmFkZF9hcmd1bWVudCgiLS1ibG9ja2VkLXJlYXNvbiIsIGRlZmF1bHQ9Tm9uZSwgaGVscD0iT3JpZ2luYWwgYmxvY2tlZCByZWFzb24gKGZvciBldmlkZW5jZSkuIikKICAgIGFyZ3MgPSBwLnBhcnNlX2FyZ3MoYXJndikKCiAgICByZXN1bHQgPSByZWF0dGVtcHRfYmxvY2tlZF9zdXJ2ZXkoUGF0aChhcmdzLm91dHB1dHMpLCBhcmdzLnJ1bl9pZCwgYmxvY2tlZF9yZWFzb249YXJncy5ibG9ja2VkX3JlYXNvbikKICAgIHByaW50KGpzb24uZHVtcHMocmVzdWx0LCBpbmRlbnQ9Miwgc29ydF9rZXlzPVRydWUpKQogICAgcmV0dXJuIDAKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgcmFpc2UgU3lzdGVtRXhpdChtYWluKCkpCg==\"}\nDIR_STATE:[\"src/artifacts.py\",\"src/cli.py\",\"src/pipeline.py\",\"src/survey_retry.py\"]"
        }
      ],
      "role": "assistant"
    }
  ],
  "codeResults": []
}