{
  "content": "FILE_EXPORT:{\"path\":\"tools/promote_artifacts.py\",\"size\":4178,\"encoding\":\"base64\",\"sha256\":\"c6af9576b21ebb30c4e99a338cdc8b8ada990c91e048053d1ff2372c5072e6e5\",\"content\":\"IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwoiIiJQcm9tb3RlIGFnZW50LWdlbmVyYXRlZCBhcnRpZmFjdHMgaW50byBjYW5vbmljYWwgL291dHB1dHMuCgpEaXNjb3ZlcnMgbGlrZWx5IGFydGlmYWN0IGZpbGVzIHVuZGVyIGFnZW50LXNwZWNpZmljIGRpcmVjdG9yaWVzIChlLmcuIGFnZW50XyovKSwKY29waWVzIHRoZW0gaW50byBvdXRwdXRzLyB3aXRoIGNvbGxpc2lvbi1zYWZlIG5hbWVzLCBhbmQgKHJlKWdlbmVyYXRlcwpvdXRwdXRzL2luZGV4Lm1kIGxpbmtpbmcgdG8gYWxsIHByb21vdGVkIGZpbGVzLgoiIiIKCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBhcmdwYXJzZQppbXBvcnQgc2h1dGlsCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcwpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKZnJvbSB0eXBpbmcgaW1wb3J0IEl0ZXJhYmxlLCBMaXN0LCBPcHRpb25hbCwgVHVwbGUKQGRhdGFjbGFzcyhmcm96ZW49VHJ1ZSkKY2xhc3MgUnVsZXM6CiAgICBhZ2VudF9kaXJfcHJlZml4ZXM6IFR1cGxlW3N0ciwgLi4uXSA9ICgiYWdlbnRfIiwpCiAgICBhbGxvd19leHRzOiBUdXBsZVtzdHIsIC4uLl0gPSAoIi5tZCIsICIudHh0IiwgIi5qc29uIiwgIi55YW1sIiwgIi55bWwiKQogICAgYWxsb3dfbmFtZXM6IFR1cGxlW3N0ciwgLi4uXSA9ICgiUkVBRE1FLm1kIiwgImZpcnN0X2FydGlmYWN0Lm1kIiwgInJlc2VhcmNoX3RlbXBsYXRlLm1kIikKICAgIGRlbnlfZGlyX25hbWVzOiBUdXBsZVtzdHIsIC4uLl0gPSAoIm91dHB1dHMiLCAidG9vbHMiLCAiZG9jcyIsICIuZ2l0IiwgIl9fcHljYWNoZV9fIikKICAgIGRlbnlfZmlsZV9uYW1lczogVHVwbGVbc3RyLCAuLi5dID0gKCJpbmRleC5tZCIsKQpkZWYgX2lzX2FnZW50X2RpcihwOiBQYXRoLCBydWxlczogUnVsZXMpIC0+IGJvb2w6CiAgICByZXR1cm4gcC5pc19kaXIoKSBhbmQgYW55KHAubmFtZS5zdGFydHN3aXRoKHByZWYpIGZvciBwcmVmIGluIHJ1bGVzLmFnZW50X2Rpcl9wcmVmaXhlcykKCmRlZiBkaXNjb3Zlcl9maWxlcyhyb290OiBQYXRoLCBydWxlczogUnVsZXMpIC0+IExpc3RbUGF0aF06CiAgICBmaWxlczogTGlzdFtQYXRoXSA9IFtdCiAgICBmb3IgY2hpbGQgaW4gcm9vdC5pdGVyZGlyKCk6CiAgICAgICAgaWYgbm90IF9pc19hZ2VudF9kaXIoY2hpbGQsIHJ1bGVzKToKICAgICAgICAgICAgY29udGludWUKICAgICAgICBmb3IgcCBpbiBjaGlsZC5yZ2xvYigiKiIpOgogICAgICAgICAgICBpZiBhbnkocGFydCBpbiBydWxlcy5kZW55X2Rpcl9uYW1lcyBmb3IgcGFydCBpbiBwLnBhcnRzKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIG5vdCBwLmlzX2ZpbGUoKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIHAubmFtZSBpbiBydWxlcy5kZW55X2ZpbGVfbmFtZXM6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBpZiBwLnN1ZmZpeC5sb3dlcigpIGluIHJ1bGVzLmFsbG93X2V4dHMgb3IgcC5uYW1lIGluIHJ1bGVzLmFsbG93X25hbWVzOgogICAgICAgICAgICAgICAgZmlsZXMuYXBwZW5kKHApCiAgICByZXR1cm4gc29ydGVkKHNldChmaWxlcykpCmRlZiBzYWZlX2Rlc3RfbmFtZShzcmM6IFBhdGgsIHJvb3Q6IFBhdGgpIC0+IHN0cjoKICAgIHJlbCA9IHNyYy5yZWxhdGl2ZV90byhyb290KS5hc19wb3NpeCgpCiAgICByZWwgPSByZWwucmVwbGFjZSgiLyIsICJfXyIpCiAgICByZXR1cm4gcmVsCgpkZWYgZW5zdXJlX3VuaXF1ZShkZXN0X2RpcjogUGF0aCwgbmFtZTogc3RyKSAtPiBQYXRoOgogICAgYmFzZSA9IFBhdGgobmFtZSkuc3RlbQogICAgZXh0ID0gIiIuam9pbihQYXRoKG5hbWUpLnN1ZmZpeGVzKSBvciAiIgogICAgY2FuZGlkYXRlID0gZGVzdF9kaXIgLyAoYmFzZSArIGV4dCkKICAgIGkgPSAyCiAgICB3aGlsZSBjYW5kaWRhdGUuZXhpc3RzKCk6CiAgICAgICAgY2FuZGlkYXRlID0gZGVzdF9kaXIgLyBmIntiYXNlfV97aX17ZXh0fSIKICAgICAgICBpICs9IDEKICAgIHJldHVybiBjYW5kaWRhdGUKZGVmIHByb21vdGUoZmlsZXM6IEl0ZXJhYmxlW1BhdGhdLCByb290OiBQYXRoLCBvdXRfZGlyOiBQYXRoLCBkcnlfcnVuOiBib29sID0gRmFsc2UpIC0+IExpc3RbUGF0aF06CiAgICBvdXRfZGlyLm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHByb21vdGVkOiBMaXN0W1BhdGhdID0gW10KICAgIGZvciBzcmMgaW4gZmlsZXM6CiAgICAgICAgbmFtZSA9IHNhZmVfZGVzdF9uYW1lKHNyYywgcm9vdCkKICAgICAgICBkZXN0ID0gZW5zdXJlX3VuaXF1ZShvdXRfZGlyLCBuYW1lKQogICAgICAgIHByb21vdGVkLmFwcGVuZChkZXN0KQogICAgICAgIGlmIGRyeV9ydW46CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgc2h1dGlsLmNvcHkyKHNyYywgZGVzdCkKICAgIHJldHVybiBwcm9tb3RlZAoKZGVmIHdyaXRlX2luZGV4KG91dF9kaXI6IFBhdGgsIHRpdGxlOiBzdHIgPSAiT3V0cHV0cyIpIC0+IFBhdGg6CiAgICBvdXRfZGlyLm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIGluZGV4ID0gb3V0X2RpciAvICJpbmRleC5tZCIKICAgIGl0ZW1zID0gc29ydGVkKFtwIGZvciBwIGluIG91dF9kaXIuaXRlcmRpcigpIGlmIHAuaXNfZmlsZSgpIGFuZCBwLm5hbWUgIT0gImluZGV4Lm1kIl0sIGtleT1sYW1iZGEgcDogcC5uYW1lLmxvd2VyKCkpCiAgICBsaW5lczogTGlzdFtzdHJdID0gW2YiIyB7dGl0bGV9IiwgIiIsICJBdXRvZ2VuZXJhdGVkIGluZGV4IG9mIHByb21vdGVkIGFydGlmYWN0cyBpbiB0aGlzIGRpcmVjdG9yeS4iLCAiIl0KICAgIGlmIG5vdCBpdGVtczoKICAgICAgICBsaW5lcyArPSBbIihObyBwcm9tb3RlZCBmaWxlcyBmb3VuZC4pIiwgIiJdCiAgICBlbHNlOgogICAgICAgIGZvciBwIGluIGl0ZW1zOgogICAgICAgICAgICBsaW5lcy5hcHBlbmQoZiItIFt7cC5uYW1lfV0oLi97cC5uYW1lfSkiKQogICAgICAgIGxpbmVzLmFwcGVuZCgiIikKICAgIGluZGV4LndyaXRlX3RleHQoIlxuIi5qb2luKGxpbmVzKSwgZW5jb2Rpbmc9InV0Zi04IikKICAgIHJldHVybiBpbmRleApkZWYgbWFpbihhcmd2OiBPcHRpb25hbFtMaXN0W3N0cl1dID0gTm9uZSkgLT4gaW50OgogICAgYXAgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcihkZXNjcmlwdGlvbj0iUHJvbW90ZSBhZ2VudCBhcnRpZmFjdHMgaW50byBvdXRwdXRzLyBhbmQgZ2VuZXJhdGUgb3V0cHV0cy9pbmRleC5tZCIpCiAgICBhcC5hZGRfYXJndW1lbnQoIi0tcm9vdCIsIHR5cGU9UGF0aCwgZGVmYXVsdD1QYXRoLmN3ZCgpLCBoZWxwPSJQcm9qZWN0IHJvb3QgKGRlZmF1bHQ6IGN3ZCkiKQogICAgYXAuYWRkX2FyZ3VtZW50KCItLW91dCIsIHR5cGU9UGF0aCwgZGVmYXVsdD1Ob25lLCBoZWxwPSJPdXRwdXRzIGRpcmVjdG9yeSAoZGVmYXVsdDogPHJvb3Q+L291dHB1dHMpIikKICAgIGFwLmFkZF9hcmd1bWVudCgiLS1kcnktcnVuIiwgYWN0aW9uPSJzdG9yZV90cnVlIiwgaGVscD0iRGlzY292ZXIgYW5kIHBsYW4gd2l0aG91dCBjb3B5aW5nL3dyaXRpbmcgaW5kZXgiKQogICAgYXAuYWRkX2FyZ3VtZW50KCItLXF1aWV0IiwgYWN0aW9uPSJzdG9yZV90cnVlIiwgaGVscD0iTWluaW1pemUgc3Rkb3V0IikKICAgIGFyZ3MgPSBhcC5wYXJzZV9hcmdzKGFyZ3YpCgogICAgcm9vdCA9IGFyZ3Mucm9vdC5yZXNvbHZlKCkKICAgIG91dF9kaXIgPSAoYXJncy5vdXQgb3IgKHJvb3QgLyAib3V0cHV0cyIpKS5yZXNvbHZlKCkKICAgIHJ1bGVzID0gUnVsZXMoKQoKICAgIGZpbGVzID0gZGlzY292ZXJfZmlsZXMocm9vdCwgcnVsZXMpCiAgICBpZiBub3QgYXJncy5xdWlldDoKICAgICAgICBwcmludChmIkRJU0NPVkVSRUQ6e2xlbihmaWxlcyl9IikKICAgIHByb21vdGVkID0gcHJvbW90ZShmaWxlcywgcm9vdCwgb3V0X2RpciwgZHJ5X3J1bj1hcmdzLmRyeV9ydW4pCiAgICBpZiBub3QgYXJncy5kcnlfcnVuOgogICAgICAgIHdyaXRlX2luZGV4KG91dF9kaXIpCiAgICBpZiBub3QgYXJncy5xdWlldDoKICAgICAgICBwcmludChmIlBST01PVEVEOntsZW4ocHJvbW90ZWQpfSIpCiAgICAgICAgcHJpbnQoZiJPVVRQVVRfRElSOntvdXRfZGlyfSIpCiAgICByZXR1cm4gMAoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIHJhaXNlIFN5c3RlbUV4aXQobWFpbigpKQo=\"}\nDIR_STATE:[\"tools/__init__.py\",\"tools/output_promotion_config.py\",\"tools/promote_artifacts.py\"]",
  "reasoning": "",
  "responseId": "resp_04e5d43f977b2be500694b4b482d408194abcedb9ac01e720a",
  "model": "gpt-5.2-2025-12-11",
  "usage": {
    "input_tokens": 4856,
    "input_tokens_details": {
      "cached_tokens": 0
    },
    "output_tokens": 3817,
    "output_tokens_details": {
      "reasoning_tokens": 37
    },
    "total_tokens": 8673
  },
  "hadError": false,
  "errorType": null,
  "webSearchSources": [],
  "citations": [],
  "output": [
    {
      "id": "rs_04e5d43f977b2be500694b4b48c9e881949aa8267f573526aa",
      "type": "reasoning",
      "summary": []
    },
    {
      "id": "ci_04e5d43f977b2be500694b4b494d048194bce0cba2ff51a592",
      "type": "code_interpreter_call",
      "status": "completed",
      "code": "from pathlib import Path\nimport base64, json, hashlib, gzip\n\ntarget_path = Path('/mnt/data').joinpath('tools/promote_artifacts.py')\nassert target_path.is_file(), 'Expected tools/promote_artifacts.py to exist before export'\ndata = target_path.read_bytes()\npayload = {\n   'path': 'tools/promote_artifacts.py',\n   'size': len(data),\n   'encoding': 'base64',\n   'sha256': hashlib.sha256(data).hexdigest(),\n   'content': None\n}\nif len(data) > 20000:\n    compressed = gzip.compress(data)\n    payload['encoding'] = 'gzip+base64'\n    payload['content'] = base64.b64encode(compressed).decode('ascii')\nelse:\n    payload['content'] = base64.b64encode(data).decode('ascii')\nprint('FILE_EXPORT:' + json.dumps(payload, separators=(',', ':')))\nprint('DIR_STATE:' + json.dumps(sorted(str(p.relative_to(Path(\"/mnt/data\"))) for p in target_path.parent.glob('*') if p.is_file())))",
      "container_id": "cntr_694b4ae830a88190930f3c8c1867ff850697a1e233f89eab",
      "outputs": [
        {
          "type": "logs",
          "logs": "FILE_EXPORT:{\"path\":\"tools/promote_artifacts.py\",\"size\":4178,\"encoding\":\"base64\",\"sha256\":\"c6af9576b21ebb30c4e99a338cdc8b8ada990c91e048053d1ff2372c5072e6e5\",\"content\":\"IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwoiIiJQcm9tb3RlIGFnZW50LWdlbmVyYXRlZCBhcnRpZmFjdHMgaW50byBjYW5vbmljYWwgL291dHB1dHMuCgpEaXNjb3ZlcnMgbGlrZWx5IGFydGlmYWN0IGZpbGVzIHVuZGVyIGFnZW50LXNwZWNpZmljIGRpcmVjdG9yaWVzIChlLmcuIGFnZW50XyovKSwKY29waWVzIHRoZW0gaW50byBvdXRwdXRzLyB3aXRoIGNvbGxpc2lvbi1zYWZlIG5hbWVzLCBhbmQgKHJlKWdlbmVyYXRlcwpvdXRwdXRzL2luZGV4Lm1kIGxpbmtpbmcgdG8gYWxsIHByb21vdGVkIGZpbGVzLgoiIiIKCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBhcmdwYXJzZQppbXBvcnQgc2h1dGlsCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcwpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKZnJvbSB0eXBpbmcgaW1wb3J0IEl0ZXJhYmxlLCBMaXN0LCBPcHRpb25hbCwgVHVwbGUKQGRhdGFjbGFzcyhmcm96ZW49VHJ1ZSkKY2xhc3MgUnVsZXM6CiAgICBhZ2VudF9kaXJfcHJlZml4ZXM6IFR1cGxlW3N0ciwgLi4uXSA9ICgiYWdlbnRfIiwpCiAgICBhbGxvd19leHRzOiBUdXBsZVtzdHIsIC4uLl0gPSAoIi5tZCIsICIudHh0IiwgIi5qc29uIiwgIi55YW1sIiwgIi55bWwiKQogICAgYWxsb3dfbmFtZXM6IFR1cGxlW3N0ciwgLi4uXSA9ICgiUkVBRE1FLm1kIiwgImZpcnN0X2FydGlmYWN0Lm1kIiwgInJlc2VhcmNoX3RlbXBsYXRlLm1kIikKICAgIGRlbnlfZGlyX25hbWVzOiBUdXBsZVtzdHIsIC4uLl0gPSAoIm91dHB1dHMiLCAidG9vbHMiLCAiZG9jcyIsICIuZ2l0IiwgIl9fcHljYWNoZV9fIikKICAgIGRlbnlfZmlsZV9uYW1lczogVHVwbGVbc3RyLCAuLi5dID0gKCJpbmRleC5tZCIsKQpkZWYgX2lzX2FnZW50X2RpcihwOiBQYXRoLCBydWxlczogUnVsZXMpIC0+IGJvb2w6CiAgICByZXR1cm4gcC5pc19kaXIoKSBhbmQgYW55KHAubmFtZS5zdGFydHN3aXRoKHByZWYpIGZvciBwcmVmIGluIHJ1bGVzLmFnZW50X2Rpcl9wcmVmaXhlcykKCmRlZiBkaXNjb3Zlcl9maWxlcyhyb290OiBQYXRoLCBydWxlczogUnVsZXMpIC0+IExpc3RbUGF0aF06CiAgICBmaWxlczogTGlzdFtQYXRoXSA9IFtdCiAgICBmb3IgY2hpbGQgaW4gcm9vdC5pdGVyZGlyKCk6CiAgICAgICAgaWYgbm90IF9pc19hZ2VudF9kaXIoY2hpbGQsIHJ1bGVzKToKICAgICAgICAgICAgY29udGludWUKICAgICAgICBmb3IgcCBpbiBjaGlsZC5yZ2xvYigiKiIpOgogICAgICAgICAgICBpZiBhbnkocGFydCBpbiBydWxlcy5kZW55X2Rpcl9uYW1lcyBmb3IgcGFydCBpbiBwLnBhcnRzKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIG5vdCBwLmlzX2ZpbGUoKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIHAubmFtZSBpbiBydWxlcy5kZW55X2ZpbGVfbmFtZXM6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBpZiBwLnN1ZmZpeC5sb3dlcigpIGluIHJ1bGVzLmFsbG93X2V4dHMgb3IgcC5uYW1lIGluIHJ1bGVzLmFsbG93X25hbWVzOgogICAgICAgICAgICAgICAgZmlsZXMuYXBwZW5kKHApCiAgICByZXR1cm4gc29ydGVkKHNldChmaWxlcykpCmRlZiBzYWZlX2Rlc3RfbmFtZShzcmM6IFBhdGgsIHJvb3Q6IFBhdGgpIC0+IHN0cjoKICAgIHJlbCA9IHNyYy5yZWxhdGl2ZV90byhyb290KS5hc19wb3NpeCgpCiAgICByZWwgPSByZWwucmVwbGFjZSgiLyIsICJfXyIpCiAgICByZXR1cm4gcmVsCgpkZWYgZW5zdXJlX3VuaXF1ZShkZXN0X2RpcjogUGF0aCwgbmFtZTogc3RyKSAtPiBQYXRoOgogICAgYmFzZSA9IFBhdGgobmFtZSkuc3RlbQogICAgZXh0ID0gIiIuam9pbihQYXRoKG5hbWUpLnN1ZmZpeGVzKSBvciAiIgogICAgY2FuZGlkYXRlID0gZGVzdF9kaXIgLyAoYmFzZSArIGV4dCkKICAgIGkgPSAyCiAgICB3aGlsZSBjYW5kaWRhdGUuZXhpc3RzKCk6CiAgICAgICAgY2FuZGlkYXRlID0gZGVzdF9kaXIgLyBmIntiYXNlfV97aX17ZXh0fSIKICAgICAgICBpICs9IDEKICAgIHJldHVybiBjYW5kaWRhdGUKZGVmIHByb21vdGUoZmlsZXM6IEl0ZXJhYmxlW1BhdGhdLCByb290OiBQYXRoLCBvdXRfZGlyOiBQYXRoLCBkcnlfcnVuOiBib29sID0gRmFsc2UpIC0+IExpc3RbUGF0aF06CiAgICBvdXRfZGlyLm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHByb21vdGVkOiBMaXN0W1BhdGhdID0gW10KICAgIGZvciBzcmMgaW4gZmlsZXM6CiAgICAgICAgbmFtZSA9IHNhZmVfZGVzdF9uYW1lKHNyYywgcm9vdCkKICAgICAgICBkZXN0ID0gZW5zdXJlX3VuaXF1ZShvdXRfZGlyLCBuYW1lKQogICAgICAgIHByb21vdGVkLmFwcGVuZChkZXN0KQogICAgICAgIGlmIGRyeV9ydW46CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgc2h1dGlsLmNvcHkyKHNyYywgZGVzdCkKICAgIHJldHVybiBwcm9tb3RlZAoKZGVmIHdyaXRlX2luZGV4KG91dF9kaXI6IFBhdGgsIHRpdGxlOiBzdHIgPSAiT3V0cHV0cyIpIC0+IFBhdGg6CiAgICBvdXRfZGlyLm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIGluZGV4ID0gb3V0X2RpciAvICJpbmRleC5tZCIKICAgIGl0ZW1zID0gc29ydGVkKFtwIGZvciBwIGluIG91dF9kaXIuaXRlcmRpcigpIGlmIHAuaXNfZmlsZSgpIGFuZCBwLm5hbWUgIT0gImluZGV4Lm1kIl0sIGtleT1sYW1iZGEgcDogcC5uYW1lLmxvd2VyKCkpCiAgICBsaW5lczogTGlzdFtzdHJdID0gW2YiIyB7dGl0bGV9IiwgIiIsICJBdXRvZ2VuZXJhdGVkIGluZGV4IG9mIHByb21vdGVkIGFydGlmYWN0cyBpbiB0aGlzIGRpcmVjdG9yeS4iLCAiIl0KICAgIGlmIG5vdCBpdGVtczoKICAgICAgICBsaW5lcyArPSBbIihObyBwcm9tb3RlZCBmaWxlcyBmb3VuZC4pIiwgIiJdCiAgICBlbHNlOgogICAgICAgIGZvciBwIGluIGl0ZW1zOgogICAgICAgICAgICBsaW5lcy5hcHBlbmQoZiItIFt7cC5uYW1lfV0oLi97cC5uYW1lfSkiKQogICAgICAgIGxpbmVzLmFwcGVuZCgiIikKICAgIGluZGV4LndyaXRlX3RleHQoIlxuIi5qb2luKGxpbmVzKSwgZW5jb2Rpbmc9InV0Zi04IikKICAgIHJldHVybiBpbmRleApkZWYgbWFpbihhcmd2OiBPcHRpb25hbFtMaXN0W3N0cl1dID0gTm9uZSkgLT4gaW50OgogICAgYXAgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcihkZXNjcmlwdGlvbj0iUHJvbW90ZSBhZ2VudCBhcnRpZmFjdHMgaW50byBvdXRwdXRzLyBhbmQgZ2VuZXJhdGUgb3V0cHV0cy9pbmRleC5tZCIpCiAgICBhcC5hZGRfYXJndW1lbnQoIi0tcm9vdCIsIHR5cGU9UGF0aCwgZGVmYXVsdD1QYXRoLmN3ZCgpLCBoZWxwPSJQcm9qZWN0IHJvb3QgKGRlZmF1bHQ6IGN3ZCkiKQogICAgYXAuYWRkX2FyZ3VtZW50KCItLW91dCIsIHR5cGU9UGF0aCwgZGVmYXVsdD1Ob25lLCBoZWxwPSJPdXRwdXRzIGRpcmVjdG9yeSAoZGVmYXVsdDogPHJvb3Q+L291dHB1dHMpIikKICAgIGFwLmFkZF9hcmd1bWVudCgiLS1kcnktcnVuIiwgYWN0aW9uPSJzdG9yZV90cnVlIiwgaGVscD0iRGlzY292ZXIgYW5kIHBsYW4gd2l0aG91dCBjb3B5aW5nL3dyaXRpbmcgaW5kZXgiKQogICAgYXAuYWRkX2FyZ3VtZW50KCItLXF1aWV0IiwgYWN0aW9uPSJzdG9yZV90cnVlIiwgaGVscD0iTWluaW1pemUgc3Rkb3V0IikKICAgIGFyZ3MgPSBhcC5wYXJzZV9hcmdzKGFyZ3YpCgogICAgcm9vdCA9IGFyZ3Mucm9vdC5yZXNvbHZlKCkKICAgIG91dF9kaXIgPSAoYXJncy5vdXQgb3IgKHJvb3QgLyAib3V0cHV0cyIpKS5yZXNvbHZlKCkKICAgIHJ1bGVzID0gUnVsZXMoKQoKICAgIGZpbGVzID0gZGlzY292ZXJfZmlsZXMocm9vdCwgcnVsZXMpCiAgICBpZiBub3QgYXJncy5xdWlldDoKICAgICAgICBwcmludChmIkRJU0NPVkVSRUQ6e2xlbihmaWxlcyl9IikKICAgIHByb21vdGVkID0gcHJvbW90ZShmaWxlcywgcm9vdCwgb3V0X2RpciwgZHJ5X3J1bj1hcmdzLmRyeV9ydW4pCiAgICBpZiBub3QgYXJncy5kcnlfcnVuOgogICAgICAgIHdyaXRlX2luZGV4KG91dF9kaXIpCiAgICBpZiBub3QgYXJncy5xdWlldDoKICAgICAgICBwcmludChmIlBST01PVEVEOntsZW4ocHJvbW90ZWQpfSIpCiAgICAgICAgcHJpbnQoZiJPVVRQVVRfRElSOntvdXRfZGlyfSIpCiAgICByZXR1cm4gMAoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIHJhaXNlIFN5c3RlbUV4aXQobWFpbigpKQo=\"}\nDIR_STATE:[\"tools/__init__.py\", \"tools/output_promotion_config.py\", \"tools/promote_artifacts.py\"]\n"
        }
      ]
    },
    {
      "id": "msg_04e5d43f977b2be500694b4b4c13308194858c1e916f768efa",
      "type": "message",
      "status": "completed",
      "content": [
        {
          "type": "output_text",
          "annotations": [],
          "logprobs": [],
          "text": "FILE_EXPORT:{\"path\":\"tools/promote_artifacts.py\",\"size\":4178,\"encoding\":\"base64\",\"sha256\":\"c6af9576b21ebb30c4e99a338cdc8b8ada990c91e048053d1ff2372c5072e6e5\",\"content\":\"IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwoiIiJQcm9tb3RlIGFnZW50LWdlbmVyYXRlZCBhcnRpZmFjdHMgaW50byBjYW5vbmljYWwgL291dHB1dHMuCgpEaXNjb3ZlcnMgbGlrZWx5IGFydGlmYWN0IGZpbGVzIHVuZGVyIGFnZW50LXNwZWNpZmljIGRpcmVjdG9yaWVzIChlLmcuIGFnZW50XyovKSwKY29waWVzIHRoZW0gaW50byBvdXRwdXRzLyB3aXRoIGNvbGxpc2lvbi1zYWZlIG5hbWVzLCBhbmQgKHJlKWdlbmVyYXRlcwpvdXRwdXRzL2luZGV4Lm1kIGxpbmtpbmcgdG8gYWxsIHByb21vdGVkIGZpbGVzLgoiIiIKCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBhcmdwYXJzZQppbXBvcnQgc2h1dGlsCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcwpmcm9tIHBhdGhsaWIgaW1wb3J0IFBhdGgKZnJvbSB0eXBpbmcgaW1wb3J0IEl0ZXJhYmxlLCBMaXN0LCBPcHRpb25hbCwgVHVwbGUKQGRhdGFjbGFzcyhmcm96ZW49VHJ1ZSkKY2xhc3MgUnVsZXM6CiAgICBhZ2VudF9kaXJfcHJlZml4ZXM6IFR1cGxlW3N0ciwgLi4uXSA9ICgiYWdlbnRfIiwpCiAgICBhbGxvd19leHRzOiBUdXBsZVtzdHIsIC4uLl0gPSAoIi5tZCIsICIudHh0IiwgIi5qc29uIiwgIi55YW1sIiwgIi55bWwiKQogICAgYWxsb3dfbmFtZXM6IFR1cGxlW3N0ciwgLi4uXSA9ICgiUkVBRE1FLm1kIiwgImZpcnN0X2FydGlmYWN0Lm1kIiwgInJlc2VhcmNoX3RlbXBsYXRlLm1kIikKICAgIGRlbnlfZGlyX25hbWVzOiBUdXBsZVtzdHIsIC4uLl0gPSAoIm91dHB1dHMiLCAidG9vbHMiLCAiZG9jcyIsICIuZ2l0IiwgIl9fcHljYWNoZV9fIikKICAgIGRlbnlfZmlsZV9uYW1lczogVHVwbGVbc3RyLCAuLi5dID0gKCJpbmRleC5tZCIsKQpkZWYgX2lzX2FnZW50X2RpcihwOiBQYXRoLCBydWxlczogUnVsZXMpIC0+IGJvb2w6CiAgICByZXR1cm4gcC5pc19kaXIoKSBhbmQgYW55KHAubmFtZS5zdGFydHN3aXRoKHByZWYpIGZvciBwcmVmIGluIHJ1bGVzLmFnZW50X2Rpcl9wcmVmaXhlcykKCmRlZiBkaXNjb3Zlcl9maWxlcyhyb290OiBQYXRoLCBydWxlczogUnVsZXMpIC0+IExpc3RbUGF0aF06CiAgICBmaWxlczogTGlzdFtQYXRoXSA9IFtdCiAgICBmb3IgY2hpbGQgaW4gcm9vdC5pdGVyZGlyKCk6CiAgICAgICAgaWYgbm90IF9pc19hZ2VudF9kaXIoY2hpbGQsIHJ1bGVzKToKICAgICAgICAgICAgY29udGludWUKICAgICAgICBmb3IgcCBpbiBjaGlsZC5yZ2xvYigiKiIpOgogICAgICAgICAgICBpZiBhbnkocGFydCBpbiBydWxlcy5kZW55X2Rpcl9uYW1lcyBmb3IgcGFydCBpbiBwLnBhcnRzKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIG5vdCBwLmlzX2ZpbGUoKToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGlmIHAubmFtZSBpbiBydWxlcy5kZW55X2ZpbGVfbmFtZXM6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBpZiBwLnN1ZmZpeC5sb3dlcigpIGluIHJ1bGVzLmFsbG93X2V4dHMgb3IgcC5uYW1lIGluIHJ1bGVzLmFsbG93X25hbWVzOgogICAgICAgICAgICAgICAgZmlsZXMuYXBwZW5kKHApCiAgICByZXR1cm4gc29ydGVkKHNldChmaWxlcykpCmRlZiBzYWZlX2Rlc3RfbmFtZShzcmM6IFBhdGgsIHJvb3Q6IFBhdGgpIC0+IHN0cjoKICAgIHJlbCA9IHNyYy5yZWxhdGl2ZV90byhyb290KS5hc19wb3NpeCgpCiAgICByZWwgPSByZWwucmVwbGFjZSgiLyIsICJfXyIpCiAgICByZXR1cm4gcmVsCgpkZWYgZW5zdXJlX3VuaXF1ZShkZXN0X2RpcjogUGF0aCwgbmFtZTogc3RyKSAtPiBQYXRoOgogICAgYmFzZSA9IFBhdGgobmFtZSkuc3RlbQogICAgZXh0ID0gIiIuam9pbihQYXRoKG5hbWUpLnN1ZmZpeGVzKSBvciAiIgogICAgY2FuZGlkYXRlID0gZGVzdF9kaXIgLyAoYmFzZSArIGV4dCkKICAgIGkgPSAyCiAgICB3aGlsZSBjYW5kaWRhdGUuZXhpc3RzKCk6CiAgICAgICAgY2FuZGlkYXRlID0gZGVzdF9kaXIgLyBmIntiYXNlfV97aX17ZXh0fSIKICAgICAgICBpICs9IDEKICAgIHJldHVybiBjYW5kaWRhdGUKZGVmIHByb21vdGUoZmlsZXM6IEl0ZXJhYmxlW1BhdGhdLCByb290OiBQYXRoLCBvdXRfZGlyOiBQYXRoLCBkcnlfcnVuOiBib29sID0gRmFsc2UpIC0+IExpc3RbUGF0aF06CiAgICBvdXRfZGlyLm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHByb21vdGVkOiBMaXN0W1BhdGhdID0gW10KICAgIGZvciBzcmMgaW4gZmlsZXM6CiAgICAgICAgbmFtZSA9IHNhZmVfZGVzdF9uYW1lKHNyYywgcm9vdCkKICAgICAgICBkZXN0ID0gZW5zdXJlX3VuaXF1ZShvdXRfZGlyLCBuYW1lKQogICAgICAgIHByb21vdGVkLmFwcGVuZChkZXN0KQogICAgICAgIGlmIGRyeV9ydW46CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgc2h1dGlsLmNvcHkyKHNyYywgZGVzdCkKICAgIHJldHVybiBwcm9tb3RlZAoKZGVmIHdyaXRlX2luZGV4KG91dF9kaXI6IFBhdGgsIHRpdGxlOiBzdHIgPSAiT3V0cHV0cyIpIC0+IFBhdGg6CiAgICBvdXRfZGlyLm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIGluZGV4ID0gb3V0X2RpciAvICJpbmRleC5tZCIKICAgIGl0ZW1zID0gc29ydGVkKFtwIGZvciBwIGluIG91dF9kaXIuaXRlcmRpcigpIGlmIHAuaXNfZmlsZSgpIGFuZCBwLm5hbWUgIT0gImluZGV4Lm1kIl0sIGtleT1sYW1iZGEgcDogcC5uYW1lLmxvd2VyKCkpCiAgICBsaW5lczogTGlzdFtzdHJdID0gW2YiIyB7dGl0bGV9IiwgIiIsICJBdXRvZ2VuZXJhdGVkIGluZGV4IG9mIHByb21vdGVkIGFydGlmYWN0cyBpbiB0aGlzIGRpcmVjdG9yeS4iLCAiIl0KICAgIGlmIG5vdCBpdGVtczoKICAgICAgICBsaW5lcyArPSBbIihObyBwcm9tb3RlZCBmaWxlcyBmb3VuZC4pIiwgIiJdCiAgICBlbHNlOgogICAgICAgIGZvciBwIGluIGl0ZW1zOgogICAgICAgICAgICBsaW5lcy5hcHBlbmQoZiItIFt7cC5uYW1lfV0oLi97cC5uYW1lfSkiKQogICAgICAgIGxpbmVzLmFwcGVuZCgiIikKICAgIGluZGV4LndyaXRlX3RleHQoIlxuIi5qb2luKGxpbmVzKSwgZW5jb2Rpbmc9InV0Zi04IikKICAgIHJldHVybiBpbmRleApkZWYgbWFpbihhcmd2OiBPcHRpb25hbFtMaXN0W3N0cl1dID0gTm9uZSkgLT4gaW50OgogICAgYXAgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcihkZXNjcmlwdGlvbj0iUHJvbW90ZSBhZ2VudCBhcnRpZmFjdHMgaW50byBvdXRwdXRzLyBhbmQgZ2VuZXJhdGUgb3V0cHV0cy9pbmRleC5tZCIpCiAgICBhcC5hZGRfYXJndW1lbnQoIi0tcm9vdCIsIHR5cGU9UGF0aCwgZGVmYXVsdD1QYXRoLmN3ZCgpLCBoZWxwPSJQcm9qZWN0IHJvb3QgKGRlZmF1bHQ6IGN3ZCkiKQogICAgYXAuYWRkX2FyZ3VtZW50KCItLW91dCIsIHR5cGU9UGF0aCwgZGVmYXVsdD1Ob25lLCBoZWxwPSJPdXRwdXRzIGRpcmVjdG9yeSAoZGVmYXVsdDogPHJvb3Q+L291dHB1dHMpIikKICAgIGFwLmFkZF9hcmd1bWVudCgiLS1kcnktcnVuIiwgYWN0aW9uPSJzdG9yZV90cnVlIiwgaGVscD0iRGlzY292ZXIgYW5kIHBsYW4gd2l0aG91dCBjb3B5aW5nL3dyaXRpbmcgaW5kZXgiKQogICAgYXAuYWRkX2FyZ3VtZW50KCItLXF1aWV0IiwgYWN0aW9uPSJzdG9yZV90cnVlIiwgaGVscD0iTWluaW1pemUgc3Rkb3V0IikKICAgIGFyZ3MgPSBhcC5wYXJzZV9hcmdzKGFyZ3YpCgogICAgcm9vdCA9IGFyZ3Mucm9vdC5yZXNvbHZlKCkKICAgIG91dF9kaXIgPSAoYXJncy5vdXQgb3IgKHJvb3QgLyAib3V0cHV0cyIpKS5yZXNvbHZlKCkKICAgIHJ1bGVzID0gUnVsZXMoKQoKICAgIGZpbGVzID0gZGlzY292ZXJfZmlsZXMocm9vdCwgcnVsZXMpCiAgICBpZiBub3QgYXJncy5xdWlldDoKICAgICAgICBwcmludChmIkRJU0NPVkVSRUQ6e2xlbihmaWxlcyl9IikKICAgIHByb21vdGVkID0gcHJvbW90ZShmaWxlcywgcm9vdCwgb3V0X2RpciwgZHJ5X3J1bj1hcmdzLmRyeV9ydW4pCiAgICBpZiBub3QgYXJncy5kcnlfcnVuOgogICAgICAgIHdyaXRlX2luZGV4KG91dF9kaXIpCiAgICBpZiBub3QgYXJncy5xdWlldDoKICAgICAgICBwcmludChmIlBST01PVEVEOntsZW4ocHJvbW90ZWQpfSIpCiAgICAgICAgcHJpbnQoZiJPVVRQVVRfRElSOntvdXRfZGlyfSIpCiAgICByZXR1cm4gMAoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIHJhaXNlIFN5c3RlbUV4aXQobWFpbigpKQo=\"}\nDIR_STATE:[\"tools/__init__.py\",\"tools/output_promotion_config.py\",\"tools/promote_artifacts.py\"]"
        }
      ],
      "role": "assistant"
    }
  ],
  "codeResults": []
}