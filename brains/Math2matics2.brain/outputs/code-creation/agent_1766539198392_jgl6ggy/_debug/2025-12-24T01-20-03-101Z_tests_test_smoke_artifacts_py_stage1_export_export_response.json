{
  "content": "FILE_EXPORT:{\"path\":\"tests/test_smoke_artifacts.py\",\"size\":3515,\"encoding\":\"base64\",\"sha256\":\"e2538ed719964aaf28dc4f60da4799c6d45f4113699623d2a22256d3e188bd58\",\"content\":\"ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmltcG9ydCBqc29uCmltcG9ydCBweXRlc3QKZGVmIF9wcm9qZWN0X3Jvb3QoKSAtPiBQYXRoOgogICAgIyB0ZXN0cy8uLiBpcyBhc3N1bWVkIHRvIGJlIHJlcG9zaXRvcnkgcm9vdAogICAgcmV0dXJuIFBhdGgoX19maWxlX18pLnJlc29sdmUoKS5wYXJlbnRzWzFdCgoKZGVmIF9maW5kX291dHB1dHNfZGlyKHJvb3Q6IFBhdGgpIC0+IFBhdGg6CiAgICBmb3IgbmFtZSBpbiAoIm91dHB1dHMiLCAib3V0cHV0IiwgIm91dCIpOgogICAgICAgIHAgPSByb290IC8gbmFtZQogICAgICAgIGlmIHAuaXNfZGlyKCk6CiAgICAgICAgICAgIHJldHVybiBwCiAgICAjIGZhbGxiYWNrOiBmaXJzdCBkaXJlY3RvcnkgY29udGFpbmluZyBhdCBsZWFzdCBvbmUgSlNPTiBmaWxlCiAgICBmb3IgcCBpbiBzb3J0ZWQocm9vdC5yZ2xvYigiKiIpKToKICAgICAgICBpZiBwLmlzX2RpcigpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiBhbnkoYy5zdWZmaXggPT0gIi5qc29uIiBmb3IgYyBpbiBwLml0ZXJkaXIoKSBpZiBjLmlzX2ZpbGUoKSk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAKICAgICAgICAgICAgZXhjZXB0IFBlcm1pc3Npb25FcnJvcjoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICByZXR1cm4gcm9vdCAvICJvdXRwdXRzIiAgIyB3aWxsIGZhaWwgd2l0aCBhIGNsZWFyIGFzc2VydGlvbgoKCmRlZiBfaXRlcl9qc29uX2ZpbGVzKG91dHB1dHNfZGlyOiBQYXRoKSAtPiBsaXN0W1BhdGhdOgogICAgZmlsZXMgPSBzb3J0ZWQoeypvdXRwdXRzX2Rpci5nbG9iKCIqLmpzb24iKSwgKm91dHB1dHNfZGlyLnJnbG9iKCIqLmpzb24iKX0pCiAgICByZXR1cm4gW3AgZm9yIHAgaW4gZmlsZXMgaWYgcC5pc19maWxlKCldCmRlZiBfbG9hZF9qc29uKHBhdGg6IFBhdGgpOgogICAgdHJ5OgogICAgICAgIHJldHVybiBqc29uLmxvYWRzKHBhdGgucmVhZF90ZXh0KGVuY29kaW5nPSJ1dGYtOCIpKQogICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvcjoKICAgICAgICByZXR1cm4ganNvbi5sb2FkcyhwYXRoLnJlYWRfdGV4dChlbmNvZGluZz0idXRmLTgtc2lnIikpCgoKZGVmIF9oYXNfbGlzdF9vZl9kaWN0cyhvYmopIC0+IGJvb2w6CiAgICBpZiBpc2luc3RhbmNlKG9iaiwgbGlzdCk6CiAgICAgICAgcmV0dXJuIGxlbihvYmopID4gMCBhbmQgYWxsKGlzaW5zdGFuY2UoeCwgZGljdCkgZm9yIHggaW4gb2JqKQogICAgaWYgaXNpbnN0YW5jZShvYmosIGRpY3QpOgogICAgICAgIHJldHVybiBhbnkoX2hhc19saXN0X29mX2RpY3RzKHYpIGZvciB2IGluIG9iai52YWx1ZXMoKSkKICAgIHJldHVybiBGYWxzZQoKCmRlZiBfYXNzZXJ0X3NjcmlwdGlzaF9zY2hlbWEoZGF0YSk6CiAgICBhc3NlcnQgZGF0YSBpcyBub3QgTm9uZQogICAgYXNzZXJ0IGlzaW5zdGFuY2UoZGF0YSwgKGRpY3QsIGxpc3QpKSwgZiJFeHBlY3RlZCBkaWN0L2xpc3QgSlNPTiwgZ290IHt0eXBlKGRhdGEpfSIKICAgICMgUHJlZmVyIGtub3duIHRvcC1sZXZlbCBrZXlzIHdoZW4gcHJlc2VudDsgb3RoZXJ3aXNlIGFjY2VwdCBhbnkgbmVzdGVkIGxpc3Qtb2YtZGljdHMuCiAgICBpZiBpc2luc3RhbmNlKGRhdGEsIGRpY3QpOgogICAgICAgIGFzc2VydCBkYXRhLCAiVG9wLWxldmVsIEpTT04gb2JqZWN0IGlzIGVtcHR5IgogICAgICAgIGZvciBrZXkgaW4gKCJzY2VuZXMiLCAic3RlcHMiLCAiZXZlbnRzIiwgIml0ZW1zIiwgInNlZ21lbnRzIik6CiAgICAgICAgICAgIGlmIGtleSBpbiBkYXRhOgogICAgICAgICAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoZGF0YVtrZXldLCBsaXN0KSwgZiJ7a2V5fSBtdXN0IGJlIGEgbGlzdCIKICAgICAgICAgICAgICAgIGFzc2VydCBkYXRhW2tleV0sIGYie2tleX0gbXVzdCBiZSBub24tZW1wdHkiCiAgICAgICAgICAgICAgICBhc3NlcnQgYWxsKGlzaW5zdGFuY2UoeCwgZGljdCkgZm9yIHggaW4gZGF0YVtrZXldKSwgZiJ7a2V5fSBlbGVtZW50cyBtdXN0IGJlIG9iamVjdHMiCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICBhc3NlcnQgX2hhc19saXN0X29mX2RpY3RzKGRhdGEpLCAiQ291bGQgbm90IGZpbmQgYW55IGxpc3Qtb2Ytb2JqZWN0cyBpbiBKU09OIgogICAgZWxzZToKICAgICAgICBhc3NlcnQgZGF0YSwgIlRvcC1sZXZlbCBKU09OIGFycmF5IGlzIGVtcHR5IgogICAgICAgIGFzc2VydCBhbnkoaXNpbnN0YW5jZSh4LCBkaWN0KSBmb3IgeCBpbiBkYXRhKSwgIlRvcC1sZXZlbCBKU09OIGFycmF5IGhhcyBubyBvYmplY3RzIgpkZWYgdGVzdF9vdXRwdXRzX2RpcmVjdG9yeV9oYXNfYXJ0aWZhY3RzKCk6CiAgICByb290ID0gX3Byb2plY3Rfcm9vdCgpCiAgICBvdXRwdXRzID0gX2ZpbmRfb3V0cHV0c19kaXIocm9vdCkKICAgIGFzc2VydCBvdXRwdXRzLmlzX2RpcigpLCBmIk91dHB1dHMgZGlyZWN0b3J5IG5vdCBmb3VuZDoge291dHB1dHN9IgogICAgZmlsZXMgPSBbcCBmb3IgcCBpbiBvdXRwdXRzLnJnbG9iKCIqIikgaWYgcC5pc19maWxlKCldCiAgICBhc3NlcnQgZmlsZXMsIGYiTm8gZmlsZXMgZm91bmQgdW5kZXIgb3V0cHV0cyBkaXJlY3Rvcnk6IHtvdXRwdXRzfSIKCgpkZWYgdGVzdF9hdF9sZWFzdF9vbmVfanNvbl9hcnRpZmFjdF9wYXJzZXNfYW5kX2xvb2tzX2xpa2VfYV9zY3JpcHQoKToKICAgIHJvb3QgPSBfcHJvamVjdF9yb290KCkKICAgIG91dHB1dHMgPSBfZmluZF9vdXRwdXRzX2Rpcihyb290KQogICAganNvbl9wYXRocyA9IF9pdGVyX2pzb25fZmlsZXMob3V0cHV0cykKICAgIGFzc2VydCBqc29uX3BhdGhzLCBmIk5vIEpTT04gYXJ0aWZhY3RzIGZvdW5kIGluOiB7b3V0cHV0c30iCgogICAgIyBTbW9rZS10ZXN0IHVwIHRvIDMgSlNPTiBmaWxlcyBzbyBhIHNpbmdsZSBub24tc2NyaXB0IEpTT04gZG9lc24ndCBmYWlsIHRoZSBzdWl0ZS4KICAgIGNoZWNrZWQgPSAwCiAgICBmb3IgcGF0aCBpbiBqc29uX3BhdGhzWzozXToKICAgICAgICBkYXRhID0gX2xvYWRfanNvbihwYXRoKQogICAgICAgIF9hc3NlcnRfc2NyaXB0aXNoX3NjaGVtYShkYXRhKQogICAgICAgIGNoZWNrZWQgKz0gMQogICAgYXNzZXJ0IGNoZWNrZWQgPj0gMQpAcHl0ZXN0Lm1hcmsucGFyYW1ldHJpemUoIm11c3RfZXhpc3RfbmFtZSIsIFsib3V0cHV0cyIsICJvdXRwdXQiLCAib3V0Il0pCmRlZiB0ZXN0X2NvbW1vbl9vdXRwdXRzX2RpcmVjdG9yeV9uYW1lX2lzX3ByZXNlbnRfb3JfanNvbl9mb3VuZChtdXN0X2V4aXN0X25hbWU6IHN0cik6CiAgICByb290ID0gX3Byb2plY3Rfcm9vdCgpCiAgICBjYW5kaWRhdGUgPSByb290IC8gbXVzdF9leGlzdF9uYW1lCiAgICBvdXRwdXRzID0gX2ZpbmRfb3V0cHV0c19kaXIocm9vdCkKICAgICMgRWl0aGVyIHRoZSBjb21tb24gZGlyZWN0b3J5IGV4aXN0cywgb3IgdGhlIGZhbGxiYWNrIGZvdW5kIGEgZGlyZWN0b3J5IHdpdGggSlNPTi4KICAgIGFzc2VydCBjYW5kaWRhdGUuaXNfZGlyKCkgb3Igb3V0cHV0cy5pc19kaXIoKQo=\"}\nDIR_STATE:[\"tests/conftest.py\",\"tests/test_smoke_artifacts.py\"]",
  "reasoning": "",
  "responseId": "resp_0e8d74abddb4ce8a00694b40000154819797a563fcbbc041a3",
  "model": "gpt-5.2-2025-12-11",
  "usage": {
    "input_tokens": 4314,
    "input_tokens_details": {
      "cached_tokens": 0
    },
    "output_tokens": 3284,
    "output_tokens_details": {
      "reasoning_tokens": 55
    },
    "total_tokens": 7598
  },
  "hadError": false,
  "errorType": null,
  "webSearchSources": [],
  "citations": [],
  "output": [
    {
      "id": "rs_0e8d74abddb4ce8a00694b4000a6cc8197ba63c99b70a1c654",
      "type": "reasoning",
      "summary": []
    },
    {
      "id": "ci_0e8d74abddb4ce8a00694b4001715c8197bbd835f1594df2c1",
      "type": "code_interpreter_call",
      "status": "completed",
      "code": "from pathlib import Path\nimport base64, json, hashlib, gzip\n\ntarget_path = Path('/mnt/data').joinpath('tests/test_smoke_artifacts.py')\nassert target_path.is_file(), 'Expected tests/test_smoke_artifacts.py to exist before export'\ndata = target_path.read_bytes()\npayload = {\n  'path': 'tests/test_smoke_artifacts.py',\n  'size': len(data),\n  'encoding': 'base64',\n  'sha256': hashlib.sha256(data).hexdigest(),\n  'content': None\n}\nif len(data) > 20000:\n    compressed = gzip.compress(data)\n    payload['encoding'] = 'gzip+base64'\n    payload['content'] = base64.b64encode(compressed).decode('ascii')\nelse:\n    payload['content'] = base64.b64encode(data).decode('ascii')\n\nprint('FILE_EXPORT:' + json.dumps(payload, separators=(',', ':')))\nprint('DIR_STATE:' + json.dumps(sorted(str(p.relative_to(Path(\"/mnt/data\"))) for p in target_path.parent.glob('*') if p.is_file())))",
      "container_id": "cntr_694b3fc1a2f08190b1bb7adda7e48c5308db4d7f2887ec56",
      "outputs": [
        {
          "type": "logs",
          "logs": "FILE_EXPORT:{\"path\":\"tests/test_smoke_artifacts.py\",\"size\":3515,\"encoding\":\"base64\",\"sha256\":\"e2538ed719964aaf28dc4f60da4799c6d45f4113699623d2a22256d3e188bd58\",\"content\":\"ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmltcG9ydCBqc29uCmltcG9ydCBweXRlc3QKZGVmIF9wcm9qZWN0X3Jvb3QoKSAtPiBQYXRoOgogICAgIyB0ZXN0cy8uLiBpcyBhc3N1bWVkIHRvIGJlIHJlcG9zaXRvcnkgcm9vdAogICAgcmV0dXJuIFBhdGgoX19maWxlX18pLnJlc29sdmUoKS5wYXJlbnRzWzFdCgoKZGVmIF9maW5kX291dHB1dHNfZGlyKHJvb3Q6IFBhdGgpIC0+IFBhdGg6CiAgICBmb3IgbmFtZSBpbiAoIm91dHB1dHMiLCAib3V0cHV0IiwgIm91dCIpOgogICAgICAgIHAgPSByb290IC8gbmFtZQogICAgICAgIGlmIHAuaXNfZGlyKCk6CiAgICAgICAgICAgIHJldHVybiBwCiAgICAjIGZhbGxiYWNrOiBmaXJzdCBkaXJlY3RvcnkgY29udGFpbmluZyBhdCBsZWFzdCBvbmUgSlNPTiBmaWxlCiAgICBmb3IgcCBpbiBzb3J0ZWQocm9vdC5yZ2xvYigiKiIpKToKICAgICAgICBpZiBwLmlzX2RpcigpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiBhbnkoYy5zdWZmaXggPT0gIi5qc29uIiBmb3IgYyBpbiBwLml0ZXJkaXIoKSBpZiBjLmlzX2ZpbGUoKSk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAKICAgICAgICAgICAgZXhjZXB0IFBlcm1pc3Npb25FcnJvcjoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICByZXR1cm4gcm9vdCAvICJvdXRwdXRzIiAgIyB3aWxsIGZhaWwgd2l0aCBhIGNsZWFyIGFzc2VydGlvbgoKCmRlZiBfaXRlcl9qc29uX2ZpbGVzKG91dHB1dHNfZGlyOiBQYXRoKSAtPiBsaXN0W1BhdGhdOgogICAgZmlsZXMgPSBzb3J0ZWQoeypvdXRwdXRzX2Rpci5nbG9iKCIqLmpzb24iKSwgKm91dHB1dHNfZGlyLnJnbG9iKCIqLmpzb24iKX0pCiAgICByZXR1cm4gW3AgZm9yIHAgaW4gZmlsZXMgaWYgcC5pc19maWxlKCldCmRlZiBfbG9hZF9qc29uKHBhdGg6IFBhdGgpOgogICAgdHJ5OgogICAgICAgIHJldHVybiBqc29uLmxvYWRzKHBhdGgucmVhZF90ZXh0KGVuY29kaW5nPSJ1dGYtOCIpKQogICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvcjoKICAgICAgICByZXR1cm4ganNvbi5sb2FkcyhwYXRoLnJlYWRfdGV4dChlbmNvZGluZz0idXRmLTgtc2lnIikpCgoKZGVmIF9oYXNfbGlzdF9vZl9kaWN0cyhvYmopIC0+IGJvb2w6CiAgICBpZiBpc2luc3RhbmNlKG9iaiwgbGlzdCk6CiAgICAgICAgcmV0dXJuIGxlbihvYmopID4gMCBhbmQgYWxsKGlzaW5zdGFuY2UoeCwgZGljdCkgZm9yIHggaW4gb2JqKQogICAgaWYgaXNpbnN0YW5jZShvYmosIGRpY3QpOgogICAgICAgIHJldHVybiBhbnkoX2hhc19saXN0X29mX2RpY3RzKHYpIGZvciB2IGluIG9iai52YWx1ZXMoKSkKICAgIHJldHVybiBGYWxzZQoKCmRlZiBfYXNzZXJ0X3NjcmlwdGlzaF9zY2hlbWEoZGF0YSk6CiAgICBhc3NlcnQgZGF0YSBpcyBub3QgTm9uZQogICAgYXNzZXJ0IGlzaW5zdGFuY2UoZGF0YSwgKGRpY3QsIGxpc3QpKSwgZiJFeHBlY3RlZCBkaWN0L2xpc3QgSlNPTiwgZ290IHt0eXBlKGRhdGEpfSIKICAgICMgUHJlZmVyIGtub3duIHRvcC1sZXZlbCBrZXlzIHdoZW4gcHJlc2VudDsgb3RoZXJ3aXNlIGFjY2VwdCBhbnkgbmVzdGVkIGxpc3Qtb2YtZGljdHMuCiAgICBpZiBpc2luc3RhbmNlKGRhdGEsIGRpY3QpOgogICAgICAgIGFzc2VydCBkYXRhLCAiVG9wLWxldmVsIEpTT04gb2JqZWN0IGlzIGVtcHR5IgogICAgICAgIGZvciBrZXkgaW4gKCJzY2VuZXMiLCAic3RlcHMiLCAiZXZlbnRzIiwgIml0ZW1zIiwgInNlZ21lbnRzIik6CiAgICAgICAgICAgIGlmIGtleSBpbiBkYXRhOgogICAgICAgICAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoZGF0YVtrZXldLCBsaXN0KSwgZiJ7a2V5fSBtdXN0IGJlIGEgbGlzdCIKICAgICAgICAgICAgICAgIGFzc2VydCBkYXRhW2tleV0sIGYie2tleX0gbXVzdCBiZSBub24tZW1wdHkiCiAgICAgICAgICAgICAgICBhc3NlcnQgYWxsKGlzaW5zdGFuY2UoeCwgZGljdCkgZm9yIHggaW4gZGF0YVtrZXldKSwgZiJ7a2V5fSBlbGVtZW50cyBtdXN0IGJlIG9iamVjdHMiCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICBhc3NlcnQgX2hhc19saXN0X29mX2RpY3RzKGRhdGEpLCAiQ291bGQgbm90IGZpbmQgYW55IGxpc3Qtb2Ytb2JqZWN0cyBpbiBKU09OIgogICAgZWxzZToKICAgICAgICBhc3NlcnQgZGF0YSwgIlRvcC1sZXZlbCBKU09OIGFycmF5IGlzIGVtcHR5IgogICAgICAgIGFzc2VydCBhbnkoaXNpbnN0YW5jZSh4LCBkaWN0KSBmb3IgeCBpbiBkYXRhKSwgIlRvcC1sZXZlbCBKU09OIGFycmF5IGhhcyBubyBvYmplY3RzIgpkZWYgdGVzdF9vdXRwdXRzX2RpcmVjdG9yeV9oYXNfYXJ0aWZhY3RzKCk6CiAgICByb290ID0gX3Byb2plY3Rfcm9vdCgpCiAgICBvdXRwdXRzID0gX2ZpbmRfb3V0cHV0c19kaXIocm9vdCkKICAgIGFzc2VydCBvdXRwdXRzLmlzX2RpcigpLCBmIk91dHB1dHMgZGlyZWN0b3J5IG5vdCBmb3VuZDoge291dHB1dHN9IgogICAgZmlsZXMgPSBbcCBmb3IgcCBpbiBvdXRwdXRzLnJnbG9iKCIqIikgaWYgcC5pc19maWxlKCldCiAgICBhc3NlcnQgZmlsZXMsIGYiTm8gZmlsZXMgZm91bmQgdW5kZXIgb3V0cHV0cyBkaXJlY3Rvcnk6IHtvdXRwdXRzfSIKCgpkZWYgdGVzdF9hdF9sZWFzdF9vbmVfanNvbl9hcnRpZmFjdF9wYXJzZXNfYW5kX2xvb2tzX2xpa2VfYV9zY3JpcHQoKToKICAgIHJvb3QgPSBfcHJvamVjdF9yb290KCkKICAgIG91dHB1dHMgPSBfZmluZF9vdXRwdXRzX2Rpcihyb290KQogICAganNvbl9wYXRocyA9IF9pdGVyX2pzb25fZmlsZXMob3V0cHV0cykKICAgIGFzc2VydCBqc29uX3BhdGhzLCBmIk5vIEpTT04gYXJ0aWZhY3RzIGZvdW5kIGluOiB7b3V0cHV0c30iCgogICAgIyBTbW9rZS10ZXN0IHVwIHRvIDMgSlNPTiBmaWxlcyBzbyBhIHNpbmdsZSBub24tc2NyaXB0IEpTT04gZG9lc24ndCBmYWlsIHRoZSBzdWl0ZS4KICAgIGNoZWNrZWQgPSAwCiAgICBmb3IgcGF0aCBpbiBqc29uX3BhdGhzWzozXToKICAgICAgICBkYXRhID0gX2xvYWRfanNvbihwYXRoKQogICAgICAgIF9hc3NlcnRfc2NyaXB0aXNoX3NjaGVtYShkYXRhKQogICAgICAgIGNoZWNrZWQgKz0gMQogICAgYXNzZXJ0IGNoZWNrZWQgPj0gMQpAcHl0ZXN0Lm1hcmsucGFyYW1ldHJpemUoIm11c3RfZXhpc3RfbmFtZSIsIFsib3V0cHV0cyIsICJvdXRwdXQiLCAib3V0Il0pCmRlZiB0ZXN0X2NvbW1vbl9vdXRwdXRzX2RpcmVjdG9yeV9uYW1lX2lzX3ByZXNlbnRfb3JfanNvbl9mb3VuZChtdXN0X2V4aXN0X25hbWU6IHN0cik6CiAgICByb290ID0gX3Byb2plY3Rfcm9vdCgpCiAgICBjYW5kaWRhdGUgPSByb290IC8gbXVzdF9leGlzdF9uYW1lCiAgICBvdXRwdXRzID0gX2ZpbmRfb3V0cHV0c19kaXIocm9vdCkKICAgICMgRWl0aGVyIHRoZSBjb21tb24gZGlyZWN0b3J5IGV4aXN0cywgb3IgdGhlIGZhbGxiYWNrIGZvdW5kIGEgZGlyZWN0b3J5IHdpdGggSlNPTi4KICAgIGFzc2VydCBjYW5kaWRhdGUuaXNfZGlyKCkgb3Igb3V0cHV0cy5pc19kaXIoKQo=\"}\nDIR_STATE:[\"tests/conftest.py\", \"tests/test_smoke_artifacts.py\"]\n"
        }
      ]
    },
    {
      "id": "msg_0e8d74abddb4ce8a00694b40042ea48197b53a64e8f5cdfe75",
      "type": "message",
      "status": "completed",
      "content": [
        {
          "type": "output_text",
          "annotations": [],
          "logprobs": [],
          "text": "FILE_EXPORT:{\"path\":\"tests/test_smoke_artifacts.py\",\"size\":3515,\"encoding\":\"base64\",\"sha256\":\"e2538ed719964aaf28dc4f60da4799c6d45f4113699623d2a22256d3e188bd58\",\"content\":\"ZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmltcG9ydCBqc29uCmltcG9ydCBweXRlc3QKZGVmIF9wcm9qZWN0X3Jvb3QoKSAtPiBQYXRoOgogICAgIyB0ZXN0cy8uLiBpcyBhc3N1bWVkIHRvIGJlIHJlcG9zaXRvcnkgcm9vdAogICAgcmV0dXJuIFBhdGgoX19maWxlX18pLnJlc29sdmUoKS5wYXJlbnRzWzFdCgoKZGVmIF9maW5kX291dHB1dHNfZGlyKHJvb3Q6IFBhdGgpIC0+IFBhdGg6CiAgICBmb3IgbmFtZSBpbiAoIm91dHB1dHMiLCAib3V0cHV0IiwgIm91dCIpOgogICAgICAgIHAgPSByb290IC8gbmFtZQogICAgICAgIGlmIHAuaXNfZGlyKCk6CiAgICAgICAgICAgIHJldHVybiBwCiAgICAjIGZhbGxiYWNrOiBmaXJzdCBkaXJlY3RvcnkgY29udGFpbmluZyBhdCBsZWFzdCBvbmUgSlNPTiBmaWxlCiAgICBmb3IgcCBpbiBzb3J0ZWQocm9vdC5yZ2xvYigiKiIpKToKICAgICAgICBpZiBwLmlzX2RpcigpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiBhbnkoYy5zdWZmaXggPT0gIi5qc29uIiBmb3IgYyBpbiBwLml0ZXJkaXIoKSBpZiBjLmlzX2ZpbGUoKSk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAKICAgICAgICAgICAgZXhjZXB0IFBlcm1pc3Npb25FcnJvcjoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICByZXR1cm4gcm9vdCAvICJvdXRwdXRzIiAgIyB3aWxsIGZhaWwgd2l0aCBhIGNsZWFyIGFzc2VydGlvbgoKCmRlZiBfaXRlcl9qc29uX2ZpbGVzKG91dHB1dHNfZGlyOiBQYXRoKSAtPiBsaXN0W1BhdGhdOgogICAgZmlsZXMgPSBzb3J0ZWQoeypvdXRwdXRzX2Rpci5nbG9iKCIqLmpzb24iKSwgKm91dHB1dHNfZGlyLnJnbG9iKCIqLmpzb24iKX0pCiAgICByZXR1cm4gW3AgZm9yIHAgaW4gZmlsZXMgaWYgcC5pc19maWxlKCldCmRlZiBfbG9hZF9qc29uKHBhdGg6IFBhdGgpOgogICAgdHJ5OgogICAgICAgIHJldHVybiBqc29uLmxvYWRzKHBhdGgucmVhZF90ZXh0KGVuY29kaW5nPSJ1dGYtOCIpKQogICAgZXhjZXB0IFVuaWNvZGVEZWNvZGVFcnJvcjoKICAgICAgICByZXR1cm4ganNvbi5sb2FkcyhwYXRoLnJlYWRfdGV4dChlbmNvZGluZz0idXRmLTgtc2lnIikpCgoKZGVmIF9oYXNfbGlzdF9vZl9kaWN0cyhvYmopIC0+IGJvb2w6CiAgICBpZiBpc2luc3RhbmNlKG9iaiwgbGlzdCk6CiAgICAgICAgcmV0dXJuIGxlbihvYmopID4gMCBhbmQgYWxsKGlzaW5zdGFuY2UoeCwgZGljdCkgZm9yIHggaW4gb2JqKQogICAgaWYgaXNpbnN0YW5jZShvYmosIGRpY3QpOgogICAgICAgIHJldHVybiBhbnkoX2hhc19saXN0X29mX2RpY3RzKHYpIGZvciB2IGluIG9iai52YWx1ZXMoKSkKICAgIHJldHVybiBGYWxzZQoKCmRlZiBfYXNzZXJ0X3NjcmlwdGlzaF9zY2hlbWEoZGF0YSk6CiAgICBhc3NlcnQgZGF0YSBpcyBub3QgTm9uZQogICAgYXNzZXJ0IGlzaW5zdGFuY2UoZGF0YSwgKGRpY3QsIGxpc3QpKSwgZiJFeHBlY3RlZCBkaWN0L2xpc3QgSlNPTiwgZ290IHt0eXBlKGRhdGEpfSIKICAgICMgUHJlZmVyIGtub3duIHRvcC1sZXZlbCBrZXlzIHdoZW4gcHJlc2VudDsgb3RoZXJ3aXNlIGFjY2VwdCBhbnkgbmVzdGVkIGxpc3Qtb2YtZGljdHMuCiAgICBpZiBpc2luc3RhbmNlKGRhdGEsIGRpY3QpOgogICAgICAgIGFzc2VydCBkYXRhLCAiVG9wLWxldmVsIEpTT04gb2JqZWN0IGlzIGVtcHR5IgogICAgICAgIGZvciBrZXkgaW4gKCJzY2VuZXMiLCAic3RlcHMiLCAiZXZlbnRzIiwgIml0ZW1zIiwgInNlZ21lbnRzIik6CiAgICAgICAgICAgIGlmIGtleSBpbiBkYXRhOgogICAgICAgICAgICAgICAgYXNzZXJ0IGlzaW5zdGFuY2UoZGF0YVtrZXldLCBsaXN0KSwgZiJ7a2V5fSBtdXN0IGJlIGEgbGlzdCIKICAgICAgICAgICAgICAgIGFzc2VydCBkYXRhW2tleV0sIGYie2tleX0gbXVzdCBiZSBub24tZW1wdHkiCiAgICAgICAgICAgICAgICBhc3NlcnQgYWxsKGlzaW5zdGFuY2UoeCwgZGljdCkgZm9yIHggaW4gZGF0YVtrZXldKSwgZiJ7a2V5fSBlbGVtZW50cyBtdXN0IGJlIG9iamVjdHMiCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICBhc3NlcnQgX2hhc19saXN0X29mX2RpY3RzKGRhdGEpLCAiQ291bGQgbm90IGZpbmQgYW55IGxpc3Qtb2Ytb2JqZWN0cyBpbiBKU09OIgogICAgZWxzZToKICAgICAgICBhc3NlcnQgZGF0YSwgIlRvcC1sZXZlbCBKU09OIGFycmF5IGlzIGVtcHR5IgogICAgICAgIGFzc2VydCBhbnkoaXNpbnN0YW5jZSh4LCBkaWN0KSBmb3IgeCBpbiBkYXRhKSwgIlRvcC1sZXZlbCBKU09OIGFycmF5IGhhcyBubyBvYmplY3RzIgpkZWYgdGVzdF9vdXRwdXRzX2RpcmVjdG9yeV9oYXNfYXJ0aWZhY3RzKCk6CiAgICByb290ID0gX3Byb2plY3Rfcm9vdCgpCiAgICBvdXRwdXRzID0gX2ZpbmRfb3V0cHV0c19kaXIocm9vdCkKICAgIGFzc2VydCBvdXRwdXRzLmlzX2RpcigpLCBmIk91dHB1dHMgZGlyZWN0b3J5IG5vdCBmb3VuZDoge291dHB1dHN9IgogICAgZmlsZXMgPSBbcCBmb3IgcCBpbiBvdXRwdXRzLnJnbG9iKCIqIikgaWYgcC5pc19maWxlKCldCiAgICBhc3NlcnQgZmlsZXMsIGYiTm8gZmlsZXMgZm91bmQgdW5kZXIgb3V0cHV0cyBkaXJlY3Rvcnk6IHtvdXRwdXRzfSIKCgpkZWYgdGVzdF9hdF9sZWFzdF9vbmVfanNvbl9hcnRpZmFjdF9wYXJzZXNfYW5kX2xvb2tzX2xpa2VfYV9zY3JpcHQoKToKICAgIHJvb3QgPSBfcHJvamVjdF9yb290KCkKICAgIG91dHB1dHMgPSBfZmluZF9vdXRwdXRzX2Rpcihyb290KQogICAganNvbl9wYXRocyA9IF9pdGVyX2pzb25fZmlsZXMob3V0cHV0cykKICAgIGFzc2VydCBqc29uX3BhdGhzLCBmIk5vIEpTT04gYXJ0aWZhY3RzIGZvdW5kIGluOiB7b3V0cHV0c30iCgogICAgIyBTbW9rZS10ZXN0IHVwIHRvIDMgSlNPTiBmaWxlcyBzbyBhIHNpbmdsZSBub24tc2NyaXB0IEpTT04gZG9lc24ndCBmYWlsIHRoZSBzdWl0ZS4KICAgIGNoZWNrZWQgPSAwCiAgICBmb3IgcGF0aCBpbiBqc29uX3BhdGhzWzozXToKICAgICAgICBkYXRhID0gX2xvYWRfanNvbihwYXRoKQogICAgICAgIF9hc3NlcnRfc2NyaXB0aXNoX3NjaGVtYShkYXRhKQogICAgICAgIGNoZWNrZWQgKz0gMQogICAgYXNzZXJ0IGNoZWNrZWQgPj0gMQpAcHl0ZXN0Lm1hcmsucGFyYW1ldHJpemUoIm11c3RfZXhpc3RfbmFtZSIsIFsib3V0cHV0cyIsICJvdXRwdXQiLCAib3V0Il0pCmRlZiB0ZXN0X2NvbW1vbl9vdXRwdXRzX2RpcmVjdG9yeV9uYW1lX2lzX3ByZXNlbnRfb3JfanNvbl9mb3VuZChtdXN0X2V4aXN0X25hbWU6IHN0cik6CiAgICByb290ID0gX3Byb2plY3Rfcm9vdCgpCiAgICBjYW5kaWRhdGUgPSByb290IC8gbXVzdF9leGlzdF9uYW1lCiAgICBvdXRwdXRzID0gX2ZpbmRfb3V0cHV0c19kaXIocm9vdCkKICAgICMgRWl0aGVyIHRoZSBjb21tb24gZGlyZWN0b3J5IGV4aXN0cywgb3IgdGhlIGZhbGxiYWNrIGZvdW5kIGEgZGlyZWN0b3J5IHdpdGggSlNPTi4KICAgIGFzc2VydCBjYW5kaWRhdGUuaXNfZGlyKCkgb3Igb3V0cHV0cy5pc19kaXIoKQo=\"}\nDIR_STATE:[\"tests/conftest.py\",\"tests/test_smoke_artifacts.py\"]"
        }
      ],
      "role": "assistant"
    }
  ],
  "codeResults": []
}