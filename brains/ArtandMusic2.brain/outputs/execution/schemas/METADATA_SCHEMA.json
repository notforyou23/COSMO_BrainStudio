{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.org/schemas/METADATA_SCHEMA.json",
  "title": "COSMO Metadata Intake Schema",
  "type": "object",
  "additionalProperties": false,
  "required": ["claim_verbatim", "claimant", "source", "date", "evidence", "provenance"],
  "properties": {
    "schema_version": { "type": "string", "default": "1.0.0" },
    "id": { "type": "string", "minLength": 1, "description": "Local stable identifier for this metadata record." },
    "claim_verbatim": { "type": "string", "minLength": 1, "description": "Exact claim text as stated in the source (copy/paste verbatim)." },
    "claimant": {
      "type": "object",
      "additionalProperties": false,
      "required": ["name", "role"],
      "properties": {
        "name": { "type": "string", "minLength": 1 },
        "role": { "type": "string", "minLength": 1, "description": "e.g., author, spokesperson, researcher, organization." },
        "organization": { "type": "string" },
        "contact": { "type": "string", "description": "Optional contact handle (email, URL, etc.)." }
      }
    },
    "source": {
      "type": "object",
      "additionalProperties": false,
      "required": ["type", "reference"],
      "properties": {
        "type": { "type": "string", "enum": ["web", "pdf", "paper", "dataset", "press_release", "social", "other"] },
        "reference": { "type": "string", "minLength": 1, "description": "Primary reference (URL, citation string, filename, etc.)." },
        "title": { "type": "string" },
        "publisher": { "type": "string" },
        "authors": { "type": "array", "items": { "type": "string", "minLength": 1 } },
        "published_date": { "type": "string", "format": "date" }
      }
    },
    "date": {
      "type": "object",
      "additionalProperties": false,
      "required": ["observed_at"],
      "properties": {
        "observed_at": { "type": "string", "format": "date", "description": "Date the claim was observed/recorded." },
        "created_at": { "type": "string", "format": "date-time" },
        "updated_at": { "type": "string", "format": "date-time" }
      }
    },
    "evidence": {
      "type": "object",
      "additionalProperties": false,
      "required": ["links"],
      "properties": {
        "links": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": ["url_or_path", "kind"],
            "properties": {
              "url_or_path": { "type": "string", "minLength": 1, "description": "URL or local path to supporting artifact (screenshot, PDF, etc.)." },
              "kind": { "type": "string", "enum": ["link", "screenshot", "pdf", "image", "video", "other"] },
              "sha256": { "type": "string", "pattern": "^[A-Fa-f0-9]{64}$" },
              "captured_at": { "type": "string", "format": "date-time" },
              "notes": { "type": "string" }
            }
          }
        }
      }
    },
    "provenance": {
      "type": "object",
      "additionalProperties": false,
      "required": ["anchors"],
      "properties": {
        "anchors": {
          "type": "object",
          "additionalProperties": false,
          "required": ["doi_or_dataset_link"],
          "properties": {
            "doi_or_dataset_link": {
              "type": "string",
              "minLength": 1,
              "description": "DOI or dataset landing page URL (required provenance anchor)."
            },
            "doi": { "type": "string", "pattern": "^10\\.\\d{4,9}/[-._;()/:A-Za-z0-9]+$" },
            "dataset_url": { "type": "string", "format": "uri" },
            "repository_url": { "type": "string", "format": "uri" }
          }
        },
        "license": { "type": "string" },
        "accessed_at": { "type": "string", "format": "date-time" },
        "method": { "type": "string", "description": "How the evidence was obtained (manual capture, API, scrape, etc.)." }
      }
    },
    "tags": { "type": "array", "items": { "type": "string" } },
    "notes": { "type": "string" }
  }
}
