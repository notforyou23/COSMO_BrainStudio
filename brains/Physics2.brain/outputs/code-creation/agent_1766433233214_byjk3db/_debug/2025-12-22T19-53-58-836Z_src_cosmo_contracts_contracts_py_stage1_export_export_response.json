{
  "content": "FILE_EXPORT:{\"path\":\"src/cosmo_contracts/contracts.py\",\"size\":5891,\"encoding\":\"base64\",\"sha256\":\"a8913ddebf943918c28e2d29472dfffc6bb5a3472f6d49998a7b2b5e18f73870\",\"content\":\"IyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBqc29uCmltcG9ydCByZQpmcm9tIGRhdGFjbGFzc2VzIGltcG9ydCBkYXRhY2xhc3MKZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgRGljdCwgSXRlcmFibGUsIExpc3QsIE1hcHBpbmcsIE11dGFibGVNYXBwaW5nLCBPcHRpb25hbCwgU2VxdWVuY2UsIFR1cGxlCgoKQkVOQ0hNQVJLX0lEX1JFID0gcmUuY29tcGlsZShyIl5bYS16MC05XVthLXowLTlcLV0qKD86XC5bYS16MC05XVthLXowLTlcLV0qKSokIikKUkVRVUlSRURfTUVUQURBVEE6IFR1cGxlW3N0ciwgLi4uXSA9ICgKICAgICJ0aXRsZSIsCiAgICAidmVyc2lvbiIsCiAgICAic3VtbWFyeSIsCiAgICAiaW5wdXRzIiwKICAgICJvdXRwdXRzIiwKKQpkZWYgbm9ybWFsaXplX2JlbmNobWFya19pZChyYXc6IHN0cikgLT4gc3RyOgogICAgcyA9IChyYXcgb3IgIiIpLnN0cmlwKCkubG93ZXIoKQogICAgcyA9IHJlLnN1YihyIl5iZW5jaG1hcmtccypbOi9dXHMqIiwgIiIsIHMpCiAgICBzID0gcy5yZXBsYWNlKCJfIiwgIi0iKQogICAgcyA9IHJlLnN1YihyIlxzKyIsICItIiwgcykKICAgIHMgPSByZS5zdWIociJbXmEtejAtOVwuXC1dKyIsICItIiwgcykKICAgIHMgPSByZS5zdWIociItezIsfSIsICItIiwgcykuc3RyaXAoIi0uIikKICAgIGlmIG5vdCBzIG9yIG5vdCBCRU5DSE1BUktfSURfUkUubWF0Y2gocyk6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIkludmFsaWQgYmVuY2htYXJrX2lkIGFmdGVyIG5vcm1hbGl6YXRpb246IHtyYXchcn0gLT4ge3Mhcn0iKQogICAgcmV0dXJuIHMKCgpkZWYgX2pzb25hYmxlKHg6IEFueSkgLT4gQW55OgogICAgdHJ5OgogICAgICAgIGpzb24uZHVtcHMoeCwgc29ydF9rZXlzPVRydWUsIGVuc3VyZV9hc2NpaT1GYWxzZSkKICAgICAgICByZXR1cm4geAogICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICBpZiBoYXNhdHRyKHgsICJfX2RpY3RfXyIpOgogICAgICAgICAgICByZXR1cm4gX2pzb25hYmxlKHZhcnMoeCkpCiAgICAgICAgaWYgaXNpbnN0YW5jZSh4LCAoc2V0LCB0dXBsZSkpOgogICAgICAgICAgICByZXR1cm4gW19qc29uYWJsZSh2KSBmb3IgdiBpbiB4XQogICAgICAgIHJhaXNlCmRlZiBub3JtYWxpemVfbWV0YWRhdGEobWV0YTogTWFwcGluZ1tzdHIsIEFueV0pIC0+IERpY3Rbc3RyLCBBbnldOgogICAgbSA9IHtzdHIoaykuc3RyaXAoKTogX2pzb25hYmxlKHYpIGZvciBrLCB2IGluIGRpY3QobWV0YSBvciB7fSkuaXRlbXMoKX0KICAgIG1pc3NpbmcgPSBbayBmb3IgayBpbiBSRVFVSVJFRF9NRVRBREFUQSBpZiBub3QgbS5nZXQoayldCiAgICBpZiBtaXNzaW5nOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJNaXNzaW5nIHJlcXVpcmVkIG1ldGFkYXRhIGtleXM6IHttaXNzaW5nfSIpCiAgICBtWyJ2ZXJzaW9uIl0gPSBzdHIobVsidmVyc2lvbiJdKS5zdHJpcCgpCiAgICBtWyJ0aXRsZSJdID0gc3RyKG1bInRpdGxlIl0pLnN0cmlwKCkKICAgIG1bInN1bW1hcnkiXSA9IHN0cihtWyJzdW1tYXJ5Il0pLnN0cmlwKCkKICAgIGZvciBrIGluICgiaW5wdXRzIiwgIm91dHB1dHMiKToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShtW2tdLCAoZGljdCwgbGlzdCwgc3RyKSk6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJtZXRhZGF0YVt7ayFyfV0gbXVzdCBiZSBhIGRpY3QvbGlzdC9zdHIsIGdvdCB7dHlwZShtW2tdKS5fX25hbWVfX30iKQogICAgcmV0dXJuIG0KCgpkZWYgZGVmYXVsdF90b2xlcmFuY2VfcG9saWN5KCkgLT4gRGljdFtzdHIsIEFueV06CiAgICAjIENvbnNlcnZhdGl2ZSBkZWZhdWx0OiBleGFjdCBtYXRjaCB1bmxlc3MgYmVuY2htYXJrIG92ZXJyaWRlcy4KICAgIHJldHVybiB7Im1vZGUiOiAiZXhhY3QiLCAicnRvbCI6IDAuMCwgImF0b2wiOiAwLjAsICJuYW5fcG9saWN5IjogImVycm9yIn0KCgpkZWYgbm9ybWFsaXplX3RvbGVyYW5jZV9wb2xpY3kodHA6IE9wdGlvbmFsW01hcHBpbmdbc3RyLCBBbnldXSkgLT4gRGljdFtzdHIsIEFueV06CiAgICB0ID0gZGljdChkZWZhdWx0X3RvbGVyYW5jZV9wb2xpY3koKSkKICAgIGlmIHRwOgogICAgICAgIHQudXBkYXRlKHtzdHIoayk6IF9qc29uYWJsZSh2KSBmb3IgaywgdiBpbiBkaWN0KHRwKS5pdGVtcygpfSkKICAgIG1vZGUgPSBzdHIodC5nZXQoIm1vZGUiLCAiZXhhY3QiKSkuc3RyaXAoKS5sb3dlcigpCiAgICBpZiBtb2RlIG5vdCBpbiB7ImV4YWN0IiwgIm51bWVyaWMifToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ0b2xlcmFuY2UubW9kZSBtdXN0IGJlICdleGFjdCcgb3IgJ251bWVyaWMnIikKICAgIHRbIm1vZGUiXSA9IG1vZGUKICAgIHRbInJ0b2wiXSA9IGZsb2F0KHQuZ2V0KCJydG9sIiwgMC4wKSkKICAgIHRbImF0b2wiXSA9IGZsb2F0KHQuZ2V0KCJhdG9sIiwgMC4wKSkKICAgIG5hbnAgPSBzdHIodC5nZXQoIm5hbl9wb2xpY3kiLCAiZXJyb3IiKSkuc3RyaXAoKS5sb3dlcigpCiAgICBpZiBuYW5wIG5vdCBpbiB7ImVycm9yIiwgImFsbG93IiwgInByb3BhZ2F0ZSJ9OgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInRvbGVyYW5jZS5uYW5fcG9saWN5IG11c3QgYmUgJ2Vycm9yJywgJ2FsbG93Jywgb3IgJ3Byb3BhZ2F0ZSciKQogICAgdFsibmFuX3BvbGljeSJdID0gbmFucAogICAgcmV0dXJuIHQKZGVmIG5vcm1hbGl6ZV9pbnZhcmlhbnRzKGludmFyaWFudHM6IE9wdGlvbmFsW0l0ZXJhYmxlW3N0cl1dKSAtPiBMaXN0W3N0cl06CiAgICBpbnY6IExpc3Rbc3RyXSA9IFtdCiAgICBmb3IgeCBpbiBpbnZhcmlhbnRzIG9yIFtdOgogICAgICAgIHMgPSBzdHIoeCkuc3RyaXAoKQogICAgICAgIGlmIHM6CiAgICAgICAgICAgIGludi5hcHBlbmQocykKICAgICMgZGUtZHVwIHdoaWxlIHByZXNlcnZpbmcgb3JkZXIKICAgIHNlZW4gPSBzZXQoKQogICAgb3V0OiBMaXN0W3N0cl0gPSBbXQogICAgZm9yIHMgaW4gaW52OgogICAgICAgIGlmIHMgbm90IGluIHNlZW46CiAgICAgICAgICAgIG91dC5hcHBlbmQocykKICAgICAgICAgICAgc2Vlbi5hZGQocykKICAgIHJldHVybiBvdXQKCgpkZWYgbm9ybWFsaXplX3JlZmVyZW5jZShyZWZlcmVuY2U6IE1hcHBpbmdbc3RyLCBBbnldKSAtPiBEaWN0W3N0ciwgQW55XToKICAgIHIgPSB7c3RyKGspLnN0cmlwKCk6IF9qc29uYWJsZSh2KSBmb3IgaywgdiBpbiBkaWN0KHJlZmVyZW5jZSBvciB7fSkuaXRlbXMoKX0KICAgIGlmIG5vdCByLmdldCgicHNldWRvY29kZSIpOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInJlZmVyZW5jZS5wc2V1ZG9jb2RlIGlzIHJlcXVpcmVkIikKICAgIHJbInBzZXVkb2NvZGUiXSA9IHN0cihyWyJwc2V1ZG9jb2RlIl0pLnN0cmlwKCkKICAgIGlmIHIuZ2V0KCJub3RlcyIpIGlzIG5vdCBOb25lOgogICAgICAgIHJbIm5vdGVzIl0gPSBzdHIoclsibm90ZXMiXSkuc3RyaXAoKQogICAgcmV0dXJuIHIKZGVmIG5vcm1hbGl6ZV90ZXN0X3ZlY3Rvcih0djogTWFwcGluZ1tzdHIsIEFueV0pIC0+IERpY3Rbc3RyLCBBbnldOgogICAgaWYgbm90IGlzaW5zdGFuY2UodHYsIE1hcHBpbmcpOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInRlc3RfdmVjdG9yIG11c3QgYmUgYSBtYXBwaW5nIikKICAgIG91dCA9IHtzdHIoaykuc3RyaXAoKTogX2pzb25hYmxlKHYpIGZvciBrLCB2IGluIGRpY3QodHYpLml0ZW1zKCl9CiAgICBpZiAiaW5wdXRzIiBub3QgaW4gb3V0IG9yICJleHBlY3RlZCIgbm90IGluIG91dDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ0ZXN0X3ZlY3RvciBtdXN0IGNvbnRhaW4gJ2lucHV0cycgYW5kICdleHBlY3RlZCciKQogICAgcmV0dXJuIG91dAoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUpCmNsYXNzIENvbnRyYWN0OgogICAgYmVuY2htYXJrX2lkOiBzdHIKICAgIG1ldGFkYXRhOiBEaWN0W3N0ciwgQW55XQogICAgcmVmZXJlbmNlOiBEaWN0W3N0ciwgQW55XQogICAgaW52YXJpYW50czogTGlzdFtzdHJdCiAgICB0b2xlcmFuY2U6IERpY3Rbc3RyLCBBbnldCiAgICBjYW5vbmljYWxfdGVzdF92ZWN0b3I6IERpY3Rbc3RyLCBBbnldCgogICAgZGVmIGFzX2RpY3Qoc2VsZikgLT4gRGljdFtzdHIsIEFueV06CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgImJlbmNobWFya19pZCI6IHNlbGYuYmVuY2htYXJrX2lkLAogICAgICAgICAgICAibWV0YWRhdGEiOiBzZWxmLm1ldGFkYXRhLAogICAgICAgICAgICAicmVmZXJlbmNlIjogc2VsZi5yZWZlcmVuY2UsCiAgICAgICAgICAgICJpbnZhcmlhbnRzIjogc2VsZi5pbnZhcmlhbnRzLAogICAgICAgICAgICAidG9sZXJhbmNlIjogc2VsZi50b2xlcmFuY2UsCiAgICAgICAgICAgICJjYW5vbmljYWxfdGVzdF92ZWN0b3IiOiBzZWxmLmNhbm9uaWNhbF90ZXN0X3ZlY3RvciwKICAgICAgICB9CmRlZiBidWlsZF9jb250cmFjdCgKICAgIGJlbmNobWFya19pZDogc3RyLAogICAgKiwKICAgIG1ldGFkYXRhOiBNYXBwaW5nW3N0ciwgQW55XSwKICAgIHJlZmVyZW5jZTogTWFwcGluZ1tzdHIsIEFueV0sCiAgICBpbnZhcmlhbnRzOiBPcHRpb25hbFtJdGVyYWJsZVtzdHJdXSA9IE5vbmUsCiAgICB0b2xlcmFuY2U6IE9wdGlvbmFsW01hcHBpbmdbc3RyLCBBbnldXSA9IE5vbmUsCiAgICBjYW5vbmljYWxfdGVzdF92ZWN0b3I6IE1hcHBpbmdbc3RyLCBBbnldLAopIC0+IENvbnRyYWN0OgogICAgcmV0dXJuIENvbnRyYWN0KAogICAgICAgIGJlbmNobWFya19pZD1ub3JtYWxpemVfYmVuY2htYXJrX2lkKGJlbmNobWFya19pZCksCiAgICAgICAgbWV0YWRhdGE9bm9ybWFsaXplX21ldGFkYXRhKG1ldGFkYXRhKSwKICAgICAgICByZWZlcmVuY2U9bm9ybWFsaXplX3JlZmVyZW5jZShyZWZlcmVuY2UpLAogICAgICAgIGludmFyaWFudHM9bm9ybWFsaXplX2ludmFyaWFudHMoaW52YXJpYW50cyksCiAgICAgICAgdG9sZXJhbmNlPW5vcm1hbGl6ZV90b2xlcmFuY2VfcG9saWN5KHRvbGVyYW5jZSksCiAgICAgICAgY2Fub25pY2FsX3Rlc3RfdmVjdG9yPW5vcm1hbGl6ZV90ZXN0X3ZlY3RvcihjYW5vbmljYWxfdGVzdF92ZWN0b3IpLAogICAgKQoKCmRlZiByZW5kZXJfY29udHJhY3RfbWFya2Rvd24oY29udHJhY3Q6IENvbnRyYWN0KSAtPiBzdHI6CiAgICBjID0gY29udHJhY3QuYXNfZGljdCgpCiAgICBtZXRhID0ganNvbi5kdW1wcyhjWyJtZXRhZGF0YSJdLCBpbmRlbnQ9Miwgc29ydF9rZXlzPVRydWUsIGVuc3VyZV9hc2NpaT1GYWxzZSkKICAgIHJlZiA9IGNbInJlZmVyZW5jZSJdLmdldCgicHNldWRvY29kZSIsICIiKQogICAgaW52ID0gIlxuIi5qb2luKGYiLSB7c30iIGZvciBzIGluIGNbImludmFyaWFudHMiXSkgb3IgIi0gKG5vbmUpIgogICAgdG9sID0ganNvbi5kdW1wcyhjWyJ0b2xlcmFuY2UiXSwgaW5kZW50PTIsIHNvcnRfa2V5cz1UcnVlLCBlbnN1cmVfYXNjaWk9RmFsc2UpCiAgICB0diA9IGpzb24uZHVtcHMoY1siY2Fub25pY2FsX3Rlc3RfdmVjdG9yIl0sIGluZGVudD0yLCBzb3J0X2tleXM9VHJ1ZSwgZW5zdXJlX2FzY2lpPUZhbHNlKQogICAgcmV0dXJuICgKICAgICAgICAiIyMgQ29udHJhY3RcblxuIgogICAgICAgICIjIyMgUmVxdWlyZWQgbWV0YWRhdGFcblxuYGBganNvblxuIiArIG1ldGEgKyAiXG5gYGBcblxuIgogICAgICAgICIjIyMgUmVmZXJlbmNlIGFsZ29yaXRobSAvIHBzZXVkb2NvZGVcblxuYGBgdGV4dFxuIiArIHJlZiArICJcbmBgYFxuXG4iCiAgICAgICAgIiMjIyBPdXRwdXQgaW52YXJpYW50c1xuXG4iICsgaW52ICsgIlxuXG4iCiAgICAgICAgIiMjIyBUb2xlcmFuY2UgcG9saWN5XG5cbmBgYGpzb25cbiIgKyB0b2wgKyAiXG5gYGBcblxuIgogICAgICAgICIjIyMgQ2Fub25pY2FsIHRlc3QgdmVjdG9yXG5cbmBgYGpzb25cbiIgKyB0diArICJcbmBgYFxuIgogICAgKQo=\"}\nDIR_STATE:[\"src/cosmo_contracts/__init__.py\",\"src/cosmo_contracts/__main__.py\",\"src/cosmo_contracts/cli.py\",\"src/cosmo_contracts/contracts.py\",\"src/cosmo_contracts/markdown.py\",\"src/cosmo_contracts/runner.py\",\"src/cosmo_contracts/schema.py\"]",
  "reasoning": "",
  "responseId": "resp_0af3fc784dc8f234006949a4c6b5448190ad92fb4c0ada7766",
  "model": "gpt-5.2-2025-12-11",
  "usage": {
    "input_tokens": 6245,
    "input_tokens_details": {
      "cached_tokens": 0
    },
    "output_tokens": 5210,
    "output_tokens_details": {
      "reasoning_tokens": 9
    },
    "total_tokens": 11455
  },
  "hadError": false,
  "errorType": null,
  "webSearchSources": [],
  "citations": [],
  "output": [
    {
      "id": "rs_0af3fc784dc8f234006949a4c77e2c819093dbbddcb63af270",
      "type": "reasoning",
      "summary": []
    },
    {
      "id": "ci_0af3fc784dc8f234006949a4c7b070819083b49c0890024df1",
      "type": "code_interpreter_call",
      "status": "completed",
      "code": "from pathlib import Path\nimport base64, json, hashlib, gzip\n\ntarget_path = Path('/mnt/data').joinpath('src/cosmo_contracts/contracts.py')\nassert target_path.is_file(), 'Expected src/cosmo_contracts/contracts.py to exist before export'\ndata = target_path.read_bytes()\npayload = {\n  'path': 'src/cosmo_contracts/contracts.py',\n  'size': len(data),\n  'encoding': 'base64',\n  'sha256': hashlib.sha256(data).hexdigest(),\n  'content': None\n}\nif len(data) > 20000:\n    compressed = gzip.compress(data)\n    payload['encoding'] = 'gzip+base64'\n    payload['content'] = base64.b64encode(compressed).decode('ascii')\nelse:\n    payload['content'] = base64.b64encode(data).decode('ascii')\n\nprint('FILE_EXPORT:' + json.dumps(payload, separators=(',', ':')))\nprint('DIR_STATE:' + json.dumps(sorted(str(p.relative_to(Path(\"/mnt/data\"))) for p in target_path.parent.glob('*') if p.is_file())))",
      "container_id": "cntr_6949a1d5445881908092d2723527a8b207f782e9910e8fd5",
      "outputs": [
        {
          "type": "logs",
          "logs": "FILE_EXPORT:{\"path\":\"src/cosmo_contracts/contracts.py\",\"size\":5891,\"encoding\":\"base64\",\"sha256\":\"a8913ddebf943918c28e2d29472dfffc6bb5a3472f6d49998a7b2b5e18f73870\",\"content\":\"IyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBqc29uCmltcG9ydCByZQpmcm9tIGRhdGFjbGFzc2VzIGltcG9ydCBkYXRhY2xhc3MKZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgRGljdCwgSXRlcmFibGUsIExpc3QsIE1hcHBpbmcsIE11dGFibGVNYXBwaW5nLCBPcHRpb25hbCwgU2VxdWVuY2UsIFR1cGxlCgoKQkVOQ0hNQVJLX0lEX1JFID0gcmUuY29tcGlsZShyIl5bYS16MC05XVthLXowLTlcLV0qKD86XC5bYS16MC05XVthLXowLTlcLV0qKSokIikKUkVRVUlSRURfTUVUQURBVEE6IFR1cGxlW3N0ciwgLi4uXSA9ICgKICAgICJ0aXRsZSIsCiAgICAidmVyc2lvbiIsCiAgICAic3VtbWFyeSIsCiAgICAiaW5wdXRzIiwKICAgICJvdXRwdXRzIiwKKQpkZWYgbm9ybWFsaXplX2JlbmNobWFya19pZChyYXc6IHN0cikgLT4gc3RyOgogICAgcyA9IChyYXcgb3IgIiIpLnN0cmlwKCkubG93ZXIoKQogICAgcyA9IHJlLnN1YihyIl5iZW5jaG1hcmtccypbOi9dXHMqIiwgIiIsIHMpCiAgICBzID0gcy5yZXBsYWNlKCJfIiwgIi0iKQogICAgcyA9IHJlLnN1YihyIlxzKyIsICItIiwgcykKICAgIHMgPSByZS5zdWIociJbXmEtejAtOVwuXC1dKyIsICItIiwgcykKICAgIHMgPSByZS5zdWIociItezIsfSIsICItIiwgcykuc3RyaXAoIi0uIikKICAgIGlmIG5vdCBzIG9yIG5vdCBCRU5DSE1BUktfSURfUkUubWF0Y2gocyk6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIkludmFsaWQgYmVuY2htYXJrX2lkIGFmdGVyIG5vcm1hbGl6YXRpb246IHtyYXchcn0gLT4ge3Mhcn0iKQogICAgcmV0dXJuIHMKCgpkZWYgX2pzb25hYmxlKHg6IEFueSkgLT4gQW55OgogICAgdHJ5OgogICAgICAgIGpzb24uZHVtcHMoeCwgc29ydF9rZXlzPVRydWUsIGVuc3VyZV9hc2NpaT1GYWxzZSkKICAgICAgICByZXR1cm4geAogICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICBpZiBoYXNhdHRyKHgsICJfX2RpY3RfXyIpOgogICAgICAgICAgICByZXR1cm4gX2pzb25hYmxlKHZhcnMoeCkpCiAgICAgICAgaWYgaXNpbnN0YW5jZSh4LCAoc2V0LCB0dXBsZSkpOgogICAgICAgICAgICByZXR1cm4gW19qc29uYWJsZSh2KSBmb3IgdiBpbiB4XQogICAgICAgIHJhaXNlCmRlZiBub3JtYWxpemVfbWV0YWRhdGEobWV0YTogTWFwcGluZ1tzdHIsIEFueV0pIC0+IERpY3Rbc3RyLCBBbnldOgogICAgbSA9IHtzdHIoaykuc3RyaXAoKTogX2pzb25hYmxlKHYpIGZvciBrLCB2IGluIGRpY3QobWV0YSBvciB7fSkuaXRlbXMoKX0KICAgIG1pc3NpbmcgPSBbayBmb3IgayBpbiBSRVFVSVJFRF9NRVRBREFUQSBpZiBub3QgbS5nZXQoayldCiAgICBpZiBtaXNzaW5nOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJNaXNzaW5nIHJlcXVpcmVkIG1ldGFkYXRhIGtleXM6IHttaXNzaW5nfSIpCiAgICBtWyJ2ZXJzaW9uIl0gPSBzdHIobVsidmVyc2lvbiJdKS5zdHJpcCgpCiAgICBtWyJ0aXRsZSJdID0gc3RyKG1bInRpdGxlIl0pLnN0cmlwKCkKICAgIG1bInN1bW1hcnkiXSA9IHN0cihtWyJzdW1tYXJ5Il0pLnN0cmlwKCkKICAgIGZvciBrIGluICgiaW5wdXRzIiwgIm91dHB1dHMiKToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShtW2tdLCAoZGljdCwgbGlzdCwgc3RyKSk6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJtZXRhZGF0YVt7ayFyfV0gbXVzdCBiZSBhIGRpY3QvbGlzdC9zdHIsIGdvdCB7dHlwZShtW2tdKS5fX25hbWVfX30iKQogICAgcmV0dXJuIG0KCgpkZWYgZGVmYXVsdF90b2xlcmFuY2VfcG9saWN5KCkgLT4gRGljdFtzdHIsIEFueV06CiAgICAjIENvbnNlcnZhdGl2ZSBkZWZhdWx0OiBleGFjdCBtYXRjaCB1bmxlc3MgYmVuY2htYXJrIG92ZXJyaWRlcy4KICAgIHJldHVybiB7Im1vZGUiOiAiZXhhY3QiLCAicnRvbCI6IDAuMCwgImF0b2wiOiAwLjAsICJuYW5fcG9saWN5IjogImVycm9yIn0KCgpkZWYgbm9ybWFsaXplX3RvbGVyYW5jZV9wb2xpY3kodHA6IE9wdGlvbmFsW01hcHBpbmdbc3RyLCBBbnldXSkgLT4gRGljdFtzdHIsIEFueV06CiAgICB0ID0gZGljdChkZWZhdWx0X3RvbGVyYW5jZV9wb2xpY3koKSkKICAgIGlmIHRwOgogICAgICAgIHQudXBkYXRlKHtzdHIoayk6IF9qc29uYWJsZSh2KSBmb3IgaywgdiBpbiBkaWN0KHRwKS5pdGVtcygpfSkKICAgIG1vZGUgPSBzdHIodC5nZXQoIm1vZGUiLCAiZXhhY3QiKSkuc3RyaXAoKS5sb3dlcigpCiAgICBpZiBtb2RlIG5vdCBpbiB7ImV4YWN0IiwgIm51bWVyaWMifToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ0b2xlcmFuY2UubW9kZSBtdXN0IGJlICdleGFjdCcgb3IgJ251bWVyaWMnIikKICAgIHRbIm1vZGUiXSA9IG1vZGUKICAgIHRbInJ0b2wiXSA9IGZsb2F0KHQuZ2V0KCJydG9sIiwgMC4wKSkKICAgIHRbImF0b2wiXSA9IGZsb2F0KHQuZ2V0KCJhdG9sIiwgMC4wKSkKICAgIG5hbnAgPSBzdHIodC5nZXQoIm5hbl9wb2xpY3kiLCAiZXJyb3IiKSkuc3RyaXAoKS5sb3dlcigpCiAgICBpZiBuYW5wIG5vdCBpbiB7ImVycm9yIiwgImFsbG93IiwgInByb3BhZ2F0ZSJ9OgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInRvbGVyYW5jZS5uYW5fcG9saWN5IG11c3QgYmUgJ2Vycm9yJywgJ2FsbG93Jywgb3IgJ3Byb3BhZ2F0ZSciKQogICAgdFsibmFuX3BvbGljeSJdID0gbmFucAogICAgcmV0dXJuIHQKZGVmIG5vcm1hbGl6ZV9pbnZhcmlhbnRzKGludmFyaWFudHM6IE9wdGlvbmFsW0l0ZXJhYmxlW3N0cl1dKSAtPiBMaXN0W3N0cl06CiAgICBpbnY6IExpc3Rbc3RyXSA9IFtdCiAgICBmb3IgeCBpbiBpbnZhcmlhbnRzIG9yIFtdOgogICAgICAgIHMgPSBzdHIoeCkuc3RyaXAoKQogICAgICAgIGlmIHM6CiAgICAgICAgICAgIGludi5hcHBlbmQocykKICAgICMgZGUtZHVwIHdoaWxlIHByZXNlcnZpbmcgb3JkZXIKICAgIHNlZW4gPSBzZXQoKQogICAgb3V0OiBMaXN0W3N0cl0gPSBbXQogICAgZm9yIHMgaW4gaW52OgogICAgICAgIGlmIHMgbm90IGluIHNlZW46CiAgICAgICAgICAgIG91dC5hcHBlbmQocykKICAgICAgICAgICAgc2Vlbi5hZGQocykKICAgIHJldHVybiBvdXQKCgpkZWYgbm9ybWFsaXplX3JlZmVyZW5jZShyZWZlcmVuY2U6IE1hcHBpbmdbc3RyLCBBbnldKSAtPiBEaWN0W3N0ciwgQW55XToKICAgIHIgPSB7c3RyKGspLnN0cmlwKCk6IF9qc29uYWJsZSh2KSBmb3IgaywgdiBpbiBkaWN0KHJlZmVyZW5jZSBvciB7fSkuaXRlbXMoKX0KICAgIGlmIG5vdCByLmdldCgicHNldWRvY29kZSIpOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInJlZmVyZW5jZS5wc2V1ZG9jb2RlIGlzIHJlcXVpcmVkIikKICAgIHJbInBzZXVkb2NvZGUiXSA9IHN0cihyWyJwc2V1ZG9jb2RlIl0pLnN0cmlwKCkKICAgIGlmIHIuZ2V0KCJub3RlcyIpIGlzIG5vdCBOb25lOgogICAgICAgIHJbIm5vdGVzIl0gPSBzdHIoclsibm90ZXMiXSkuc3RyaXAoKQogICAgcmV0dXJuIHIKZGVmIG5vcm1hbGl6ZV90ZXN0X3ZlY3Rvcih0djogTWFwcGluZ1tzdHIsIEFueV0pIC0+IERpY3Rbc3RyLCBBbnldOgogICAgaWYgbm90IGlzaW5zdGFuY2UodHYsIE1hcHBpbmcpOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInRlc3RfdmVjdG9yIG11c3QgYmUgYSBtYXBwaW5nIikKICAgIG91dCA9IHtzdHIoaykuc3RyaXAoKTogX2pzb25hYmxlKHYpIGZvciBrLCB2IGluIGRpY3QodHYpLml0ZW1zKCl9CiAgICBpZiAiaW5wdXRzIiBub3QgaW4gb3V0IG9yICJleHBlY3RlZCIgbm90IGluIG91dDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ0ZXN0X3ZlY3RvciBtdXN0IGNvbnRhaW4gJ2lucHV0cycgYW5kICdleHBlY3RlZCciKQogICAgcmV0dXJuIG91dAoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUpCmNsYXNzIENvbnRyYWN0OgogICAgYmVuY2htYXJrX2lkOiBzdHIKICAgIG1ldGFkYXRhOiBEaWN0W3N0ciwgQW55XQogICAgcmVmZXJlbmNlOiBEaWN0W3N0ciwgQW55XQogICAgaW52YXJpYW50czogTGlzdFtzdHJdCiAgICB0b2xlcmFuY2U6IERpY3Rbc3RyLCBBbnldCiAgICBjYW5vbmljYWxfdGVzdF92ZWN0b3I6IERpY3Rbc3RyLCBBbnldCgogICAgZGVmIGFzX2RpY3Qoc2VsZikgLT4gRGljdFtzdHIsIEFueV06CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgImJlbmNobWFya19pZCI6IHNlbGYuYmVuY2htYXJrX2lkLAogICAgICAgICAgICAibWV0YWRhdGEiOiBzZWxmLm1ldGFkYXRhLAogICAgICAgICAgICAicmVmZXJlbmNlIjogc2VsZi5yZWZlcmVuY2UsCiAgICAgICAgICAgICJpbnZhcmlhbnRzIjogc2VsZi5pbnZhcmlhbnRzLAogICAgICAgICAgICAidG9sZXJhbmNlIjogc2VsZi50b2xlcmFuY2UsCiAgICAgICAgICAgICJjYW5vbmljYWxfdGVzdF92ZWN0b3IiOiBzZWxmLmNhbm9uaWNhbF90ZXN0X3ZlY3RvciwKICAgICAgICB9CmRlZiBidWlsZF9jb250cmFjdCgKICAgIGJlbmNobWFya19pZDogc3RyLAogICAgKiwKICAgIG1ldGFkYXRhOiBNYXBwaW5nW3N0ciwgQW55XSwKICAgIHJlZmVyZW5jZTogTWFwcGluZ1tzdHIsIEFueV0sCiAgICBpbnZhcmlhbnRzOiBPcHRpb25hbFtJdGVyYWJsZVtzdHJdXSA9IE5vbmUsCiAgICB0b2xlcmFuY2U6IE9wdGlvbmFsW01hcHBpbmdbc3RyLCBBbnldXSA9IE5vbmUsCiAgICBjYW5vbmljYWxfdGVzdF92ZWN0b3I6IE1hcHBpbmdbc3RyLCBBbnldLAopIC0+IENvbnRyYWN0OgogICAgcmV0dXJuIENvbnRyYWN0KAogICAgICAgIGJlbmNobWFya19pZD1ub3JtYWxpemVfYmVuY2htYXJrX2lkKGJlbmNobWFya19pZCksCiAgICAgICAgbWV0YWRhdGE9bm9ybWFsaXplX21ldGFkYXRhKG1ldGFkYXRhKSwKICAgICAgICByZWZlcmVuY2U9bm9ybWFsaXplX3JlZmVyZW5jZShyZWZlcmVuY2UpLAogICAgICAgIGludmFyaWFudHM9bm9ybWFsaXplX2ludmFyaWFudHMoaW52YXJpYW50cyksCiAgICAgICAgdG9sZXJhbmNlPW5vcm1hbGl6ZV90b2xlcmFuY2VfcG9saWN5KHRvbGVyYW5jZSksCiAgICAgICAgY2Fub25pY2FsX3Rlc3RfdmVjdG9yPW5vcm1hbGl6ZV90ZXN0X3ZlY3RvcihjYW5vbmljYWxfdGVzdF92ZWN0b3IpLAogICAgKQoKCmRlZiByZW5kZXJfY29udHJhY3RfbWFya2Rvd24oY29udHJhY3Q6IENvbnRyYWN0KSAtPiBzdHI6CiAgICBjID0gY29udHJhY3QuYXNfZGljdCgpCiAgICBtZXRhID0ganNvbi5kdW1wcyhjWyJtZXRhZGF0YSJdLCBpbmRlbnQ9Miwgc29ydF9rZXlzPVRydWUsIGVuc3VyZV9hc2NpaT1GYWxzZSkKICAgIHJlZiA9IGNbInJlZmVyZW5jZSJdLmdldCgicHNldWRvY29kZSIsICIiKQogICAgaW52ID0gIlxuIi5qb2luKGYiLSB7c30iIGZvciBzIGluIGNbImludmFyaWFudHMiXSkgb3IgIi0gKG5vbmUpIgogICAgdG9sID0ganNvbi5kdW1wcyhjWyJ0b2xlcmFuY2UiXSwgaW5kZW50PTIsIHNvcnRfa2V5cz1UcnVlLCBlbnN1cmVfYXNjaWk9RmFsc2UpCiAgICB0diA9IGpzb24uZHVtcHMoY1siY2Fub25pY2FsX3Rlc3RfdmVjdG9yIl0sIGluZGVudD0yLCBzb3J0X2tleXM9VHJ1ZSwgZW5zdXJlX2FzY2lpPUZhbHNlKQogICAgcmV0dXJuICgKICAgICAgICAiIyMgQ29udHJhY3RcblxuIgogICAgICAgICIjIyMgUmVxdWlyZWQgbWV0YWRhdGFcblxuYGBganNvblxuIiArIG1ldGEgKyAiXG5gYGBcblxuIgogICAgICAgICIjIyMgUmVmZXJlbmNlIGFsZ29yaXRobSAvIHBzZXVkb2NvZGVcblxuYGBgdGV4dFxuIiArIHJlZiArICJcbmBgYFxuXG4iCiAgICAgICAgIiMjIyBPdXRwdXQgaW52YXJpYW50c1xuXG4iICsgaW52ICsgIlxuXG4iCiAgICAgICAgIiMjIyBUb2xlcmFuY2UgcG9saWN5XG5cbmBgYGpzb25cbiIgKyB0b2wgKyAiXG5gYGBcblxuIgogICAgICAgICIjIyMgQ2Fub25pY2FsIHRlc3QgdmVjdG9yXG5cbmBgYGpzb25cbiIgKyB0diArICJcbmBgYFxuIgogICAgKQo=\"}\nDIR_STATE:[\"src/cosmo_contracts/__init__.py\", \"src/cosmo_contracts/__main__.py\", \"src/cosmo_contracts/cli.py\", \"src/cosmo_contracts/contracts.py\", \"src/cosmo_contracts/markdown.py\", \"src/cosmo_contracts/runner.py\", \"src/cosmo_contracts/schema.py\"]\n"
        }
      ]
    },
    {
      "id": "msg_0af3fc784dc8f234006949a4cb304881908bb5060419935061",
      "type": "message",
      "status": "completed",
      "content": [
        {
          "type": "output_text",
          "annotations": [],
          "logprobs": [],
          "text": "FILE_EXPORT:{\"path\":\"src/cosmo_contracts/contracts.py\",\"size\":5891,\"encoding\":\"base64\",\"sha256\":\"a8913ddebf943918c28e2d29472dfffc6bb5a3472f6d49998a7b2b5e18f73870\",\"content\":\"IyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmltcG9ydCBqc29uCmltcG9ydCByZQpmcm9tIGRhdGFjbGFzc2VzIGltcG9ydCBkYXRhY2xhc3MKZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgRGljdCwgSXRlcmFibGUsIExpc3QsIE1hcHBpbmcsIE11dGFibGVNYXBwaW5nLCBPcHRpb25hbCwgU2VxdWVuY2UsIFR1cGxlCgoKQkVOQ0hNQVJLX0lEX1JFID0gcmUuY29tcGlsZShyIl5bYS16MC05XVthLXowLTlcLV0qKD86XC5bYS16MC05XVthLXowLTlcLV0qKSokIikKUkVRVUlSRURfTUVUQURBVEE6IFR1cGxlW3N0ciwgLi4uXSA9ICgKICAgICJ0aXRsZSIsCiAgICAidmVyc2lvbiIsCiAgICAic3VtbWFyeSIsCiAgICAiaW5wdXRzIiwKICAgICJvdXRwdXRzIiwKKQpkZWYgbm9ybWFsaXplX2JlbmNobWFya19pZChyYXc6IHN0cikgLT4gc3RyOgogICAgcyA9IChyYXcgb3IgIiIpLnN0cmlwKCkubG93ZXIoKQogICAgcyA9IHJlLnN1YihyIl5iZW5jaG1hcmtccypbOi9dXHMqIiwgIiIsIHMpCiAgICBzID0gcy5yZXBsYWNlKCJfIiwgIi0iKQogICAgcyA9IHJlLnN1YihyIlxzKyIsICItIiwgcykKICAgIHMgPSByZS5zdWIociJbXmEtejAtOVwuXC1dKyIsICItIiwgcykKICAgIHMgPSByZS5zdWIociItezIsfSIsICItIiwgcykuc3RyaXAoIi0uIikKICAgIGlmIG5vdCBzIG9yIG5vdCBCRU5DSE1BUktfSURfUkUubWF0Y2gocyk6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIkludmFsaWQgYmVuY2htYXJrX2lkIGFmdGVyIG5vcm1hbGl6YXRpb246IHtyYXchcn0gLT4ge3Mhcn0iKQogICAgcmV0dXJuIHMKCgpkZWYgX2pzb25hYmxlKHg6IEFueSkgLT4gQW55OgogICAgdHJ5OgogICAgICAgIGpzb24uZHVtcHMoeCwgc29ydF9rZXlzPVRydWUsIGVuc3VyZV9hc2NpaT1GYWxzZSkKICAgICAgICByZXR1cm4geAogICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgICBpZiBoYXNhdHRyKHgsICJfX2RpY3RfXyIpOgogICAgICAgICAgICByZXR1cm4gX2pzb25hYmxlKHZhcnMoeCkpCiAgICAgICAgaWYgaXNpbnN0YW5jZSh4LCAoc2V0LCB0dXBsZSkpOgogICAgICAgICAgICByZXR1cm4gW19qc29uYWJsZSh2KSBmb3IgdiBpbiB4XQogICAgICAgIHJhaXNlCmRlZiBub3JtYWxpemVfbWV0YWRhdGEobWV0YTogTWFwcGluZ1tzdHIsIEFueV0pIC0+IERpY3Rbc3RyLCBBbnldOgogICAgbSA9IHtzdHIoaykuc3RyaXAoKTogX2pzb25hYmxlKHYpIGZvciBrLCB2IGluIGRpY3QobWV0YSBvciB7fSkuaXRlbXMoKX0KICAgIG1pc3NpbmcgPSBbayBmb3IgayBpbiBSRVFVSVJFRF9NRVRBREFUQSBpZiBub3QgbS5nZXQoayldCiAgICBpZiBtaXNzaW5nOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJNaXNzaW5nIHJlcXVpcmVkIG1ldGFkYXRhIGtleXM6IHttaXNzaW5nfSIpCiAgICBtWyJ2ZXJzaW9uIl0gPSBzdHIobVsidmVyc2lvbiJdKS5zdHJpcCgpCiAgICBtWyJ0aXRsZSJdID0gc3RyKG1bInRpdGxlIl0pLnN0cmlwKCkKICAgIG1bInN1bW1hcnkiXSA9IHN0cihtWyJzdW1tYXJ5Il0pLnN0cmlwKCkKICAgIGZvciBrIGluICgiaW5wdXRzIiwgIm91dHB1dHMiKToKICAgICAgICBpZiBub3QgaXNpbnN0YW5jZShtW2tdLCAoZGljdCwgbGlzdCwgc3RyKSk6CiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJtZXRhZGF0YVt7ayFyfV0gbXVzdCBiZSBhIGRpY3QvbGlzdC9zdHIsIGdvdCB7dHlwZShtW2tdKS5fX25hbWVfX30iKQogICAgcmV0dXJuIG0KCgpkZWYgZGVmYXVsdF90b2xlcmFuY2VfcG9saWN5KCkgLT4gRGljdFtzdHIsIEFueV06CiAgICAjIENvbnNlcnZhdGl2ZSBkZWZhdWx0OiBleGFjdCBtYXRjaCB1bmxlc3MgYmVuY2htYXJrIG92ZXJyaWRlcy4KICAgIHJldHVybiB7Im1vZGUiOiAiZXhhY3QiLCAicnRvbCI6IDAuMCwgImF0b2wiOiAwLjAsICJuYW5fcG9saWN5IjogImVycm9yIn0KCgpkZWYgbm9ybWFsaXplX3RvbGVyYW5jZV9wb2xpY3kodHA6IE9wdGlvbmFsW01hcHBpbmdbc3RyLCBBbnldXSkgLT4gRGljdFtzdHIsIEFueV06CiAgICB0ID0gZGljdChkZWZhdWx0X3RvbGVyYW5jZV9wb2xpY3koKSkKICAgIGlmIHRwOgogICAgICAgIHQudXBkYXRlKHtzdHIoayk6IF9qc29uYWJsZSh2KSBmb3IgaywgdiBpbiBkaWN0KHRwKS5pdGVtcygpfSkKICAgIG1vZGUgPSBzdHIodC5nZXQoIm1vZGUiLCAiZXhhY3QiKSkuc3RyaXAoKS5sb3dlcigpCiAgICBpZiBtb2RlIG5vdCBpbiB7ImV4YWN0IiwgIm51bWVyaWMifToKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ0b2xlcmFuY2UubW9kZSBtdXN0IGJlICdleGFjdCcgb3IgJ251bWVyaWMnIikKICAgIHRbIm1vZGUiXSA9IG1vZGUKICAgIHRbInJ0b2wiXSA9IGZsb2F0KHQuZ2V0KCJydG9sIiwgMC4wKSkKICAgIHRbImF0b2wiXSA9IGZsb2F0KHQuZ2V0KCJhdG9sIiwgMC4wKSkKICAgIG5hbnAgPSBzdHIodC5nZXQoIm5hbl9wb2xpY3kiLCAiZXJyb3IiKSkuc3RyaXAoKS5sb3dlcigpCiAgICBpZiBuYW5wIG5vdCBpbiB7ImVycm9yIiwgImFsbG93IiwgInByb3BhZ2F0ZSJ9OgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInRvbGVyYW5jZS5uYW5fcG9saWN5IG11c3QgYmUgJ2Vycm9yJywgJ2FsbG93Jywgb3IgJ3Byb3BhZ2F0ZSciKQogICAgdFsibmFuX3BvbGljeSJdID0gbmFucAogICAgcmV0dXJuIHQKZGVmIG5vcm1hbGl6ZV9pbnZhcmlhbnRzKGludmFyaWFudHM6IE9wdGlvbmFsW0l0ZXJhYmxlW3N0cl1dKSAtPiBMaXN0W3N0cl06CiAgICBpbnY6IExpc3Rbc3RyXSA9IFtdCiAgICBmb3IgeCBpbiBpbnZhcmlhbnRzIG9yIFtdOgogICAgICAgIHMgPSBzdHIoeCkuc3RyaXAoKQogICAgICAgIGlmIHM6CiAgICAgICAgICAgIGludi5hcHBlbmQocykKICAgICMgZGUtZHVwIHdoaWxlIHByZXNlcnZpbmcgb3JkZXIKICAgIHNlZW4gPSBzZXQoKQogICAgb3V0OiBMaXN0W3N0cl0gPSBbXQogICAgZm9yIHMgaW4gaW52OgogICAgICAgIGlmIHMgbm90IGluIHNlZW46CiAgICAgICAgICAgIG91dC5hcHBlbmQocykKICAgICAgICAgICAgc2Vlbi5hZGQocykKICAgIHJldHVybiBvdXQKCgpkZWYgbm9ybWFsaXplX3JlZmVyZW5jZShyZWZlcmVuY2U6IE1hcHBpbmdbc3RyLCBBbnldKSAtPiBEaWN0W3N0ciwgQW55XToKICAgIHIgPSB7c3RyKGspLnN0cmlwKCk6IF9qc29uYWJsZSh2KSBmb3IgaywgdiBpbiBkaWN0KHJlZmVyZW5jZSBvciB7fSkuaXRlbXMoKX0KICAgIGlmIG5vdCByLmdldCgicHNldWRvY29kZSIpOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInJlZmVyZW5jZS5wc2V1ZG9jb2RlIGlzIHJlcXVpcmVkIikKICAgIHJbInBzZXVkb2NvZGUiXSA9IHN0cihyWyJwc2V1ZG9jb2RlIl0pLnN0cmlwKCkKICAgIGlmIHIuZ2V0KCJub3RlcyIpIGlzIG5vdCBOb25lOgogICAgICAgIHJbIm5vdGVzIl0gPSBzdHIoclsibm90ZXMiXSkuc3RyaXAoKQogICAgcmV0dXJuIHIKZGVmIG5vcm1hbGl6ZV90ZXN0X3ZlY3Rvcih0djogTWFwcGluZ1tzdHIsIEFueV0pIC0+IERpY3Rbc3RyLCBBbnldOgogICAgaWYgbm90IGlzaW5zdGFuY2UodHYsIE1hcHBpbmcpOgogICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoInRlc3RfdmVjdG9yIG11c3QgYmUgYSBtYXBwaW5nIikKICAgIG91dCA9IHtzdHIoaykuc3RyaXAoKTogX2pzb25hYmxlKHYpIGZvciBrLCB2IGluIGRpY3QodHYpLml0ZW1zKCl9CiAgICBpZiAiaW5wdXRzIiBub3QgaW4gb3V0IG9yICJleHBlY3RlZCIgbm90IGluIG91dDoKICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJ0ZXN0X3ZlY3RvciBtdXN0IGNvbnRhaW4gJ2lucHV0cycgYW5kICdleHBlY3RlZCciKQogICAgcmV0dXJuIG91dAoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUpCmNsYXNzIENvbnRyYWN0OgogICAgYmVuY2htYXJrX2lkOiBzdHIKICAgIG1ldGFkYXRhOiBEaWN0W3N0ciwgQW55XQogICAgcmVmZXJlbmNlOiBEaWN0W3N0ciwgQW55XQogICAgaW52YXJpYW50czogTGlzdFtzdHJdCiAgICB0b2xlcmFuY2U6IERpY3Rbc3RyLCBBbnldCiAgICBjYW5vbmljYWxfdGVzdF92ZWN0b3I6IERpY3Rbc3RyLCBBbnldCgogICAgZGVmIGFzX2RpY3Qoc2VsZikgLT4gRGljdFtzdHIsIEFueV06CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgImJlbmNobWFya19pZCI6IHNlbGYuYmVuY2htYXJrX2lkLAogICAgICAgICAgICAibWV0YWRhdGEiOiBzZWxmLm1ldGFkYXRhLAogICAgICAgICAgICAicmVmZXJlbmNlIjogc2VsZi5yZWZlcmVuY2UsCiAgICAgICAgICAgICJpbnZhcmlhbnRzIjogc2VsZi5pbnZhcmlhbnRzLAogICAgICAgICAgICAidG9sZXJhbmNlIjogc2VsZi50b2xlcmFuY2UsCiAgICAgICAgICAgICJjYW5vbmljYWxfdGVzdF92ZWN0b3IiOiBzZWxmLmNhbm9uaWNhbF90ZXN0X3ZlY3RvciwKICAgICAgICB9CmRlZiBidWlsZF9jb250cmFjdCgKICAgIGJlbmNobWFya19pZDogc3RyLAogICAgKiwKICAgIG1ldGFkYXRhOiBNYXBwaW5nW3N0ciwgQW55XSwKICAgIHJlZmVyZW5jZTogTWFwcGluZ1tzdHIsIEFueV0sCiAgICBpbnZhcmlhbnRzOiBPcHRpb25hbFtJdGVyYWJsZVtzdHJdXSA9IE5vbmUsCiAgICB0b2xlcmFuY2U6IE9wdGlvbmFsW01hcHBpbmdbc3RyLCBBbnldXSA9IE5vbmUsCiAgICBjYW5vbmljYWxfdGVzdF92ZWN0b3I6IE1hcHBpbmdbc3RyLCBBbnldLAopIC0+IENvbnRyYWN0OgogICAgcmV0dXJuIENvbnRyYWN0KAogICAgICAgIGJlbmNobWFya19pZD1ub3JtYWxpemVfYmVuY2htYXJrX2lkKGJlbmNobWFya19pZCksCiAgICAgICAgbWV0YWRhdGE9bm9ybWFsaXplX21ldGFkYXRhKG1ldGFkYXRhKSwKICAgICAgICByZWZlcmVuY2U9bm9ybWFsaXplX3JlZmVyZW5jZShyZWZlcmVuY2UpLAogICAgICAgIGludmFyaWFudHM9bm9ybWFsaXplX2ludmFyaWFudHMoaW52YXJpYW50cyksCiAgICAgICAgdG9sZXJhbmNlPW5vcm1hbGl6ZV90b2xlcmFuY2VfcG9saWN5KHRvbGVyYW5jZSksCiAgICAgICAgY2Fub25pY2FsX3Rlc3RfdmVjdG9yPW5vcm1hbGl6ZV90ZXN0X3ZlY3RvcihjYW5vbmljYWxfdGVzdF92ZWN0b3IpLAogICAgKQoKCmRlZiByZW5kZXJfY29udHJhY3RfbWFya2Rvd24oY29udHJhY3Q6IENvbnRyYWN0KSAtPiBzdHI6CiAgICBjID0gY29udHJhY3QuYXNfZGljdCgpCiAgICBtZXRhID0ganNvbi5kdW1wcyhjWyJtZXRhZGF0YSJdLCBpbmRlbnQ9Miwgc29ydF9rZXlzPVRydWUsIGVuc3VyZV9hc2NpaT1GYWxzZSkKICAgIHJlZiA9IGNbInJlZmVyZW5jZSJdLmdldCgicHNldWRvY29kZSIsICIiKQogICAgaW52ID0gIlxuIi5qb2luKGYiLSB7c30iIGZvciBzIGluIGNbImludmFyaWFudHMiXSkgb3IgIi0gKG5vbmUpIgogICAgdG9sID0ganNvbi5kdW1wcyhjWyJ0b2xlcmFuY2UiXSwgaW5kZW50PTIsIHNvcnRfa2V5cz1UcnVlLCBlbnN1cmVfYXNjaWk9RmFsc2UpCiAgICB0diA9IGpzb24uZHVtcHMoY1siY2Fub25pY2FsX3Rlc3RfdmVjdG9yIl0sIGluZGVudD0yLCBzb3J0X2tleXM9VHJ1ZSwgZW5zdXJlX2FzY2lpPUZhbHNlKQogICAgcmV0dXJuICgKICAgICAgICAiIyMgQ29udHJhY3RcblxuIgogICAgICAgICIjIyMgUmVxdWlyZWQgbWV0YWRhdGFcblxuYGBganNvblxuIiArIG1ldGEgKyAiXG5gYGBcblxuIgogICAgICAgICIjIyMgUmVmZXJlbmNlIGFsZ29yaXRobSAvIHBzZXVkb2NvZGVcblxuYGBgdGV4dFxuIiArIHJlZiArICJcbmBgYFxuXG4iCiAgICAgICAgIiMjIyBPdXRwdXQgaW52YXJpYW50c1xuXG4iICsgaW52ICsgIlxuXG4iCiAgICAgICAgIiMjIyBUb2xlcmFuY2UgcG9saWN5XG5cbmBgYGpzb25cbiIgKyB0b2wgKyAiXG5gYGBcblxuIgogICAgICAgICIjIyMgQ2Fub25pY2FsIHRlc3QgdmVjdG9yXG5cbmBgYGpzb25cbiIgKyB0diArICJcbmBgYFxuIgogICAgKQo=\"}\nDIR_STATE:[\"src/cosmo_contracts/__init__.py\",\"src/cosmo_contracts/__main__.py\",\"src/cosmo_contracts/cli.py\",\"src/cosmo_contracts/contracts.py\",\"src/cosmo_contracts/markdown.py\",\"src/cosmo_contracts/runner.py\",\"src/cosmo_contracts/schema.py\"]"
        }
      ],
      "role": "assistant"
    }
  ],
  "codeResults": []
}