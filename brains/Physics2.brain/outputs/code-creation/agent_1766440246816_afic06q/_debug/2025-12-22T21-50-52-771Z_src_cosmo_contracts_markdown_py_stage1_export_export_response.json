{
  "content": "FILE_EXPORT:{\"path\":\"src/cosmo_contracts/markdown.py\",\"size\":6044,\"encoding\":\"base64\",\"sha256\":\"af5616577ecec7b22ad5ef479e259375dace90351af9d037163d3bce1a9a11d7\",\"content\":\"IiIiY29zbW9fY29udHJhY3RzLm1hcmtkb3duCgpTbWFsbCwgZGVwZW5kZW5jeS1mcmVlIGhlbHBlcnMgZm9yIGdlbmVyYXRpbmcgTWFya2Rvd24gdGV4dC4KClRoZSBwcm9qZWN0IHVzZXMgdGhlc2UgaGVscGVycyBhdCBydW50aW1lIChlLmcuLCBDTEkgb3V0cHV0IGFuZCByZXBvcnRzKSwgc28gdGhpcwptb2R1bGUgbXVzdCBiZSBpbXBvcnQtc2FmZSBhbmQgZnJlZSBvZiBoZWF2eSBkZXBlbmRlbmNpZXMuCiIiIgoKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBJdGVyYWJsZSwgTGlzdCwgTWFwcGluZywgT3B0aW9uYWwsIFNlcXVlbmNlLCBUdXBsZSwgVW5pb24KCgpfX2FsbF9fID0gWwogICAgImVzY2FwZV9tYXJrZG93biIsCiAgICAiaGVhZGluZyIsCiAgICAicGFyYWdyYXBoIiwKICAgICJidWxsZXRfbGlzdCIsCiAgICAiY29kZV9ibG9jayIsCiAgICAiaW5saW5lX2NvZGUiLAogICAgImxpbmsiLAogICAgImJsb2NrcXVvdGUiLAogICAgInRhYmxlIiwKICAgICJqb2luX2Jsb2NrcyIsCiAgICAiS2V5VmFsdWUiLAogICAgImtleV92YWx1ZV90YWJsZSIsCl0KZGVmIGVzY2FwZV9tYXJrZG93bih0ZXh0OiBzdHIpIC0+IHN0cjoKICAgICIiIkVzY2FwZSBjaGFyYWN0ZXJzIHRoYXQgY29tbW9ubHkgYWZmZWN0IE1hcmtkb3duIHJlbmRlcmluZy4KCiAgICBUaGlzIGlzIGludGVudGlvbmFsbHkgY29uc2VydmF0aXZlOiBpdCBlc2NhcGVzIGNoYXJhY3RlcnMgdGhhdCBhcmUgZnJlcXVlbnRseQogICAgaW50ZXJwcmV0ZWQgYnkgY29tbW9uIE1hcmtkb3duIHJlbmRlcmVycyAoR2l0SHViLWZsYXZvcmVkIE1hcmtkb3duKS4KICAgICIiIgogICAgaWYgdGV4dCBpcyBOb25lOgogICAgICAgIHJldHVybiAiIgogICAgIyBCYWNrc2xhc2ggZmlyc3QsIHRoZW4gb3RoZXIgc3BlY2lhbHMuCiAgICBzcGVjaWFscyA9IHIiXFxgKl97fVxbXF0oKSMrXC0uIXw+IgogICAgb3V0OiBMaXN0W3N0cl0gPSBbXQogICAgZm9yIGNoIGluIHN0cih0ZXh0KToKICAgICAgICBpZiBjaCA9PSAiXFwiOiAgIyBhbHJlYWR5IHNwZWNpYWwtY2FzZWQKICAgICAgICAgICAgb3V0LmFwcGVuZCgiXFxcXCIpCiAgICAgICAgZWxpZiBjaCBpbiAiYCpfe31bXSgpIystLiF8PiI6CiAgICAgICAgICAgIG91dC5hcHBlbmQoIlxcIiArIGNoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG91dC5hcHBlbmQoY2gpCiAgICByZXR1cm4gIiIuam9pbihvdXQpCmRlZiBoZWFkaW5nKHRleHQ6IHN0ciwgbGV2ZWw6IGludCA9IDEpIC0+IHN0cjoKICAgICIiIlJldHVybiBhIE1hcmtkb3duIGhlYWRpbmcuIiIiCiAgICBsdmwgPSAxIGlmIGxldmVsIGlzIE5vbmUgZWxzZSBpbnQobGV2ZWwpCiAgICBsdmwgPSAxIGlmIGx2bCA8IDEgZWxzZSAoNiBpZiBsdmwgPiA2IGVsc2UgbHZsKQogICAgcmV0dXJuIGYieycjJyAqIGx2bH0ge3RleHR9Ii5yc3RyaXAoKQoKCmRlZiBwYXJhZ3JhcGgodGV4dDogc3RyKSAtPiBzdHI6CiAgICAiIiJOb3JtYWxpemUgYSBzdHJpbmcgdG8gYSBzaW5nbGUgTWFya2Rvd24gcGFyYWdyYXBoLiIiIgogICAgaWYgdGV4dCBpcyBOb25lOgogICAgICAgIHJldHVybiAiIgogICAgIyBDb2xsYXBzZSBpbnRlcm5hbCB3aGl0ZXNwYWNlL25ld2xpbmVzIHdoaWxlIGtlZXBpbmcgaW50ZW50aW9uYWwgc3BhY2VzLgogICAgbGluZXMgPSBbbG4uc3RyaXAoKSBmb3IgbG4gaW4gc3RyKHRleHQpLnNwbGl0bGluZXMoKSBpZiBsbi5zdHJpcCgpXQogICAgcmV0dXJuICIgIi5qb2luKGxpbmVzKQoKCmRlZiBpbmxpbmVfY29kZShjb2RlOiBzdHIpIC0+IHN0cjoKICAgICIiIkZvcm1hdCBpbmxpbmUgY29kZSwgY2hvb3NpbmcgYSBkZWxpbWl0ZXIgdGhhdCBkb2Vzbid0IGNvbmZsaWN0LiIiIgogICAgcyA9ICIiIGlmIGNvZGUgaXMgTm9uZSBlbHNlIHN0cihjb2RlKQogICAgIyBJZiBjb2RlIGNvbnRhaW5zIGJhY2t0aWNrcywgdXNlIGxvbmdlciBydW5zLgogICAgbWF4X3J1biA9IDAKICAgIHJ1biA9IDAKICAgIGZvciBjaCBpbiBzOgogICAgICAgIGlmIGNoID09ICJgIjoKICAgICAgICAgICAgcnVuICs9IDEKICAgICAgICAgICAgbWF4X3J1biA9IG1heChtYXhfcnVuLCBydW4pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcnVuID0gMAogICAgZGVsaW0gPSAiYCIgKiAobWF4X3J1biArIDEgb3IgMSkKICAgIHJldHVybiBmIntkZWxpbX17c317ZGVsaW19IgpkZWYgY29kZV9ibG9jayhjb2RlOiBzdHIsIGxhbmd1YWdlOiBzdHIgPSAiIikgLT4gc3RyOgogICAgIiIiUmV0dXJuIGEgZmVuY2VkIE1hcmtkb3duIGNvZGUgYmxvY2suCgogICAgSWYgdGhlIGNvZGUgY29udGFpbnMgdHJpcGxlIGJhY2t0aWNrcywgYSBsb25nZXIgZmVuY2UgaXMgY2hvc2VuLgogICAgIiIiCiAgICBzID0gIiIgaWYgY29kZSBpcyBOb25lIGVsc2Ugc3RyKGNvZGUpCiAgICAjIENob29zZSBhIGZlbmNlIGxvbmdlciB0aGFuIGFueSBiYWNrdGljayBydW4gaW4gdGhlIGNvZGUuCiAgICBtYXhfcnVuID0gMAogICAgcnVuID0gMAogICAgZm9yIGNoIGluIHM6CiAgICAgICAgaWYgY2ggPT0gImAiOgogICAgICAgICAgICBydW4gKz0gMQogICAgICAgICAgICBtYXhfcnVuID0gbWF4KG1heF9ydW4sIHJ1bikKICAgICAgICBlbHNlOgogICAgICAgICAgICBydW4gPSAwCiAgICBmZW5jZSA9ICJgIiAqIG1heCgzLCBtYXhfcnVuICsgMSkKICAgIGxhbmcgPSAobGFuZ3VhZ2Ugb3IgIiIpLnN0cmlwKCkKICAgIGhlYWRlciA9IGYie2ZlbmNlfXtsYW5nfSIucnN0cmlwKCkKICAgIHJldHVybiAiXG4iLmpvaW4oW2hlYWRlciwgcy5yc3RyaXAoIlxuIiksIGZlbmNlXSkKZGVmIGJ1bGxldF9saXN0KGl0ZW1zOiBJdGVyYWJsZVtzdHJdLCBvcmRlcmVkOiBib29sID0gRmFsc2UsIHN0YXJ0OiBpbnQgPSAxKSAtPiBzdHI6CiAgICAiIiJSZW5kZXIgYSBNYXJrZG93biBsaXN0IGZyb20gaXRlbXMuIiIiCiAgICBpZiBpdGVtcyBpcyBOb25lOgogICAgICAgIHJldHVybiAiIgogICAgbGluZXM6IExpc3Rbc3RyXSA9IFtdCiAgICBuID0gaW50KHN0YXJ0KSBpZiBvcmRlcmVkIGVsc2UgMAogICAgZm9yIGl0ZW0gaW4gaXRlbXM6CiAgICAgICAgaWYgaXRlbSBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIHR4dCA9IHN0cihpdGVtKS5zdHJpcCgpCiAgICAgICAgaWYgbm90IHR4dDoKICAgICAgICAgICAgY29udGludWUKICAgICAgICBpZiBvcmRlcmVkOgogICAgICAgICAgICBsaW5lcy5hcHBlbmQoZiJ7bn0uIHt0eHR9IikKICAgICAgICAgICAgbiArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbGluZXMuYXBwZW5kKGYiLSB7dHh0fSIpCiAgICByZXR1cm4gIlxuIi5qb2luKGxpbmVzKQoKCmRlZiBsaW5rKGxhYmVsOiBzdHIsIHVybDogc3RyKSAtPiBzdHI6CiAgICAiIiJSZXR1cm4gYSBNYXJrZG93biBsaW5rLiIiIgogICAgcmV0dXJuIGYiW3tsYWJlbH1dKHt1cmx9KSIKCgpkZWYgYmxvY2txdW90ZSh0ZXh0OiBzdHIpIC0+IHN0cjoKICAgICIiIlJldHVybiBhIE1hcmtkb3duIGJsb2NrcXVvdGUuIiIiCiAgICBpZiB0ZXh0IGlzIE5vbmU6CiAgICAgICAgcmV0dXJuICIiCiAgICBsaW5lcyA9IHN0cih0ZXh0KS5zcGxpdGxpbmVzKCkgb3IgWyIiXQogICAgcmV0dXJuICJcbiIuam9pbihbZiI+IHtsbn0iIGlmIGxuIGVsc2UgIj4iIGZvciBsbiBpbiBsaW5lc10pCmRlZiBfZm9ybWF0X2NlbGwodmFsdWU6IG9iamVjdCkgLT4gc3RyOgogICAgcyA9ICIiIGlmIHZhbHVlIGlzIE5vbmUgZWxzZSBzdHIodmFsdWUpCiAgICAjIEtlZXAgdGFibGVzIHJlYWRhYmxlOiBlc2NhcGUgcGlwZXMgYW5kIGNvbGxhcHNlIG5ld2xpbmVzLgogICAgcyA9IHMucmVwbGFjZSgifCIsICJcXHwiKQogICAgcyA9ICIgIi5qb2luKGxuLnN0cmlwKCkgZm9yIGxuIGluIHMuc3BsaXRsaW5lcygpIGlmIGxuLnN0cmlwKCkpCiAgICByZXR1cm4gcwoKCmRlZiB0YWJsZSgKICAgIGhlYWRlcnM6IFNlcXVlbmNlW3N0cl0sCiAgICByb3dzOiBTZXF1ZW5jZVtTZXF1ZW5jZVtvYmplY3RdXSwKICAgIGFsaWduOiBPcHRpb25hbFtTZXF1ZW5jZVtzdHJdXSA9IE5vbmUsCikgLT4gc3RyOgogICAgIiIiUmVuZGVyIGEgc2ltcGxlIEdpdEh1Yi1mbGF2b3JlZCBNYXJrZG93biB0YWJsZS4KCiAgICBhbGlnbiBtYXkgY29udGFpbiAnbGVmdCcsICdyaWdodCcsICdjZW50ZXInIGVudHJpZXMgKGNhc2UtaW5zZW5zaXRpdmUpLgogICAgIiIiCiAgICBoZHIgPSBbc3RyKGgpIGZvciBoIGluIChoZWFkZXJzIG9yICgpKV0KICAgIGlmIG5vdCBoZHI6CiAgICAgICAgcmV0dXJuICIiCiAgICBuY29sID0gbGVuKGhkcikKICAgIGRlZiBub3JtX2FsaWduKGE6IHN0cikgLT4gc3RyOgogICAgICAgIGEgPSAoYSBvciAiIikubG93ZXIoKQogICAgICAgIGlmIGEgaW4geyJyIiwgInJpZ2h0In06CiAgICAgICAgICAgIHJldHVybiAiLS0tOiIKICAgICAgICBpZiBhIGluIHsiYyIsICJjZW50ZXIiLCAiY2VudHJlIn06CiAgICAgICAgICAgIHJldHVybiAiOi0tLToiCiAgICAgICAgcmV0dXJuICI6LS0tIiAgIyBkZWZhdWx0IGxlZnQKICAgIGFsaWducyA9IFtub3JtX2FsaWduKGEpIGZvciBhIGluIChhbGlnbiBvciBbXSldCiAgICBhbGlnbnMgPSAoYWxpZ25zICsgWyI6LS0tIl0gKiBuY29sKVs6bmNvbF0KCiAgICBkZWYgcm93X2xpbmUoY2VsbHM6IFNlcXVlbmNlW29iamVjdF0pIC0+IHN0cjoKICAgICAgICBjZWxscyA9IGxpc3QoY2VsbHMgb3IgKCkpCiAgICAgICAgY2VsbHMgPSAoY2VsbHMgKyBbIiJdICogbmNvbClbOm5jb2xdCiAgICAgICAgcmV0dXJuICJ8ICIgKyAiIHwgIi5qb2luKF9mb3JtYXRfY2VsbChjKSBmb3IgYyBpbiBjZWxscykgKyAiIHwiCgogICAgbGluZXMgPSBbcm93X2xpbmUoaGRyKSwgInwgIiArICIgfCAiLmpvaW4oYWxpZ25zKSArICIgfCJdCiAgICBmb3IgciBpbiByb3dzIG9yICgpOgogICAgICAgIGxpbmVzLmFwcGVuZChyb3dfbGluZShyKSkKICAgIHJldHVybiAiXG4iLmpvaW4obGluZXMpCmRlZiBqb2luX2Jsb2NrcygqYmxvY2tzOiBPcHRpb25hbFtzdHJdKSAtPiBzdHI6CiAgICAiIiJKb2luIG1hcmtkb3duIGJsb2NrcyB3aXRoIGEgc2luZ2xlIGJsYW5rIGxpbmUgYmV0d2VlbiBub24tZW1wdHkgYmxvY2tzLiIiIgogICAgb3V0OiBMaXN0W3N0cl0gPSBbXQogICAgZm9yIGIgaW4gYmxvY2tzOgogICAgICAgIGlmIG5vdCBiOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIHMgPSBzdHIoYikuc3RyaXAoKQogICAgICAgIGlmIHM6CiAgICAgICAgICAgIG91dC5hcHBlbmQocykKICAgIHJldHVybiAiXG5cbiIuam9pbihvdXQpCgoKQGRhdGFjbGFzcyhmcm96ZW49VHJ1ZSkKY2xhc3MgS2V5VmFsdWU6CiAgICBrZXk6IHN0cgogICAgdmFsdWU6IHN0cgoKCmRlZiBrZXlfdmFsdWVfdGFibGUoaXRlbXM6IFVuaW9uW01hcHBpbmdbc3RyLCBvYmplY3RdLCBTZXF1ZW5jZVtLZXlWYWx1ZV0sIFNlcXVlbmNlW1R1cGxlW3N0ciwgb2JqZWN0XV1dKSAtPiBzdHI6CiAgICAiIiJSZW5kZXIgYSB0d28tY29sdW1uIHRhYmxlIGZyb20ga2V5L3ZhbHVlIHBhaXJzLiIiIgogICAgcGFpcnM6IExpc3RbVHVwbGVbc3RyLCBvYmplY3RdXSA9IFtdCiAgICBpZiBpdGVtcyBpcyBOb25lOgogICAgICAgIHJldHVybiAiIgogICAgaWYgaXNpbnN0YW5jZShpdGVtcywgTWFwcGluZyk6CiAgICAgICAgcGFpcnMgPSBbKHN0cihrKSwgdikgZm9yIGssIHYgaW4gaXRlbXMuaXRlbXMoKV0KICAgIGVsc2U6CiAgICAgICAgZm9yIGl0IGluIGl0ZW1zOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGl0LCBLZXlWYWx1ZSk6CiAgICAgICAgICAgICAgICBwYWlycy5hcHBlbmQoKGl0LmtleSwgaXQudmFsdWUpKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaywgdiA9IGl0ICAjIHR5cGU6IGlnbm9yZVttaXNjXQogICAgICAgICAgICAgICAgcGFpcnMuYXBwZW5kKChzdHIoayksIHYpKQogICAgcmV0dXJuIHRhYmxlKFsiS2V5IiwgIlZhbHVlIl0sIFsoaywgdikgZm9yIGssIHYgaW4gcGFpcnNdKQo=\"}\nDIR_STATE:[\"src/cosmo_contracts/markdown.py\"]",
  "reasoning": "",
  "responseId": "resp_02b4d5dcf0fcafc6006949bddbab548195ba64674c314badcc",
  "model": "gpt-5.2-2025-12-11",
  "usage": {
    "input_tokens": 6212,
    "input_tokens_details": {
      "cached_tokens": 0
    },
    "output_tokens": 5178,
    "output_tokens_details": {
      "reasoning_tokens": 42
    },
    "total_tokens": 11390
  },
  "hadError": false,
  "errorType": null,
  "webSearchSources": [],
  "citations": [],
  "output": [
    {
      "id": "rs_02b4d5dcf0fcafc6006949bddc71e88195a4bd44fb62d12456",
      "type": "reasoning",
      "summary": []
    },
    {
      "id": "ci_02b4d5dcf0fcafc6006949bddd508c8195a0b69f24ba31bbca",
      "type": "code_interpreter_call",
      "status": "completed",
      "code": "from pathlib import Path\nimport base64, json, hashlib, gzip\n\ntarget_path = Path('/mnt/data').joinpath('src/cosmo_contracts/markdown.py')\nassert target_path.is_file(), 'Expected src/cosmo_contracts/markdown.py to exist before export'\ndata = target_path.read_bytes()\npayload = {\n  'path': 'src/cosmo_contracts/markdown.py',\n  'size': len(data),\n  'encoding': 'base64',\n  'sha256': hashlib.sha256(data).hexdigest(),\n  'content': None\n}\nif len(data) > 20000:\n    compressed = gzip.compress(data)\n    payload['encoding'] = 'gzip+base64'\n    payload['content'] = base64.b64encode(compressed).decode('ascii')\nelse:\n    payload['content'] = base64.b64encode(data).decode('ascii')\n\nprint('FILE_EXPORT:' + json.dumps(payload, separators=(',', ':')))\nprint('DIR_STATE:' + json.dumps(sorted(str(p.relative_to(Path(\"/mnt/data\"))) for p in target_path.parent.glob('*') if p.is_file())))",
      "container_id": "cntr_6949bd3ad3008190ae5a8c57bd6f39a6057985b8d7003fbc",
      "outputs": [
        {
          "type": "logs",
          "logs": "FILE_EXPORT:{\"path\":\"src/cosmo_contracts/markdown.py\",\"size\":6044,\"encoding\":\"base64\",\"sha256\":\"af5616577ecec7b22ad5ef479e259375dace90351af9d037163d3bce1a9a11d7\",\"content\":\"IiIiY29zbW9fY29udHJhY3RzLm1hcmtkb3duCgpTbWFsbCwgZGVwZW5kZW5jeS1mcmVlIGhlbHBlcnMgZm9yIGdlbmVyYXRpbmcgTWFya2Rvd24gdGV4dC4KClRoZSBwcm9qZWN0IHVzZXMgdGhlc2UgaGVscGVycyBhdCBydW50aW1lIChlLmcuLCBDTEkgb3V0cHV0IGFuZCByZXBvcnRzKSwgc28gdGhpcwptb2R1bGUgbXVzdCBiZSBpbXBvcnQtc2FmZSBhbmQgZnJlZSBvZiBoZWF2eSBkZXBlbmRlbmNpZXMuCiIiIgoKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBJdGVyYWJsZSwgTGlzdCwgTWFwcGluZywgT3B0aW9uYWwsIFNlcXVlbmNlLCBUdXBsZSwgVW5pb24KCgpfX2FsbF9fID0gWwogICAgImVzY2FwZV9tYXJrZG93biIsCiAgICAiaGVhZGluZyIsCiAgICAicGFyYWdyYXBoIiwKICAgICJidWxsZXRfbGlzdCIsCiAgICAiY29kZV9ibG9jayIsCiAgICAiaW5saW5lX2NvZGUiLAogICAgImxpbmsiLAogICAgImJsb2NrcXVvdGUiLAogICAgInRhYmxlIiwKICAgICJqb2luX2Jsb2NrcyIsCiAgICAiS2V5VmFsdWUiLAogICAgImtleV92YWx1ZV90YWJsZSIsCl0KZGVmIGVzY2FwZV9tYXJrZG93bih0ZXh0OiBzdHIpIC0+IHN0cjoKICAgICIiIkVzY2FwZSBjaGFyYWN0ZXJzIHRoYXQgY29tbW9ubHkgYWZmZWN0IE1hcmtkb3duIHJlbmRlcmluZy4KCiAgICBUaGlzIGlzIGludGVudGlvbmFsbHkgY29uc2VydmF0aXZlOiBpdCBlc2NhcGVzIGNoYXJhY3RlcnMgdGhhdCBhcmUgZnJlcXVlbnRseQogICAgaW50ZXJwcmV0ZWQgYnkgY29tbW9uIE1hcmtkb3duIHJlbmRlcmVycyAoR2l0SHViLWZsYXZvcmVkIE1hcmtkb3duKS4KICAgICIiIgogICAgaWYgdGV4dCBpcyBOb25lOgogICAgICAgIHJldHVybiAiIgogICAgIyBCYWNrc2xhc2ggZmlyc3QsIHRoZW4gb3RoZXIgc3BlY2lhbHMuCiAgICBzcGVjaWFscyA9IHIiXFxgKl97fVxbXF0oKSMrXC0uIXw+IgogICAgb3V0OiBMaXN0W3N0cl0gPSBbXQogICAgZm9yIGNoIGluIHN0cih0ZXh0KToKICAgICAgICBpZiBjaCA9PSAiXFwiOiAgIyBhbHJlYWR5IHNwZWNpYWwtY2FzZWQKICAgICAgICAgICAgb3V0LmFwcGVuZCgiXFxcXCIpCiAgICAgICAgZWxpZiBjaCBpbiAiYCpfe31bXSgpIystLiF8PiI6CiAgICAgICAgICAgIG91dC5hcHBlbmQoIlxcIiArIGNoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG91dC5hcHBlbmQoY2gpCiAgICByZXR1cm4gIiIuam9pbihvdXQpCmRlZiBoZWFkaW5nKHRleHQ6IHN0ciwgbGV2ZWw6IGludCA9IDEpIC0+IHN0cjoKICAgICIiIlJldHVybiBhIE1hcmtkb3duIGhlYWRpbmcuIiIiCiAgICBsdmwgPSAxIGlmIGxldmVsIGlzIE5vbmUgZWxzZSBpbnQobGV2ZWwpCiAgICBsdmwgPSAxIGlmIGx2bCA8IDEgZWxzZSAoNiBpZiBsdmwgPiA2IGVsc2UgbHZsKQogICAgcmV0dXJuIGYieycjJyAqIGx2bH0ge3RleHR9Ii5yc3RyaXAoKQoKCmRlZiBwYXJhZ3JhcGgodGV4dDogc3RyKSAtPiBzdHI6CiAgICAiIiJOb3JtYWxpemUgYSBzdHJpbmcgdG8gYSBzaW5nbGUgTWFya2Rvd24gcGFyYWdyYXBoLiIiIgogICAgaWYgdGV4dCBpcyBOb25lOgogICAgICAgIHJldHVybiAiIgogICAgIyBDb2xsYXBzZSBpbnRlcm5hbCB3aGl0ZXNwYWNlL25ld2xpbmVzIHdoaWxlIGtlZXBpbmcgaW50ZW50aW9uYWwgc3BhY2VzLgogICAgbGluZXMgPSBbbG4uc3RyaXAoKSBmb3IgbG4gaW4gc3RyKHRleHQpLnNwbGl0bGluZXMoKSBpZiBsbi5zdHJpcCgpXQogICAgcmV0dXJuICIgIi5qb2luKGxpbmVzKQoKCmRlZiBpbmxpbmVfY29kZShjb2RlOiBzdHIpIC0+IHN0cjoKICAgICIiIkZvcm1hdCBpbmxpbmUgY29kZSwgY2hvb3NpbmcgYSBkZWxpbWl0ZXIgdGhhdCBkb2Vzbid0IGNvbmZsaWN0LiIiIgogICAgcyA9ICIiIGlmIGNvZGUgaXMgTm9uZSBlbHNlIHN0cihjb2RlKQogICAgIyBJZiBjb2RlIGNvbnRhaW5zIGJhY2t0aWNrcywgdXNlIGxvbmdlciBydW5zLgogICAgbWF4X3J1biA9IDAKICAgIHJ1biA9IDAKICAgIGZvciBjaCBpbiBzOgogICAgICAgIGlmIGNoID09ICJgIjoKICAgICAgICAgICAgcnVuICs9IDEKICAgICAgICAgICAgbWF4X3J1biA9IG1heChtYXhfcnVuLCBydW4pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcnVuID0gMAogICAgZGVsaW0gPSAiYCIgKiAobWF4X3J1biArIDEgb3IgMSkKICAgIHJldHVybiBmIntkZWxpbX17c317ZGVsaW19IgpkZWYgY29kZV9ibG9jayhjb2RlOiBzdHIsIGxhbmd1YWdlOiBzdHIgPSAiIikgLT4gc3RyOgogICAgIiIiUmV0dXJuIGEgZmVuY2VkIE1hcmtkb3duIGNvZGUgYmxvY2suCgogICAgSWYgdGhlIGNvZGUgY29udGFpbnMgdHJpcGxlIGJhY2t0aWNrcywgYSBsb25nZXIgZmVuY2UgaXMgY2hvc2VuLgogICAgIiIiCiAgICBzID0gIiIgaWYgY29kZSBpcyBOb25lIGVsc2Ugc3RyKGNvZGUpCiAgICAjIENob29zZSBhIGZlbmNlIGxvbmdlciB0aGFuIGFueSBiYWNrdGljayBydW4gaW4gdGhlIGNvZGUuCiAgICBtYXhfcnVuID0gMAogICAgcnVuID0gMAogICAgZm9yIGNoIGluIHM6CiAgICAgICAgaWYgY2ggPT0gImAiOgogICAgICAgICAgICBydW4gKz0gMQogICAgICAgICAgICBtYXhfcnVuID0gbWF4KG1heF9ydW4sIHJ1bikKICAgICAgICBlbHNlOgogICAgICAgICAgICBydW4gPSAwCiAgICBmZW5jZSA9ICJgIiAqIG1heCgzLCBtYXhfcnVuICsgMSkKICAgIGxhbmcgPSAobGFuZ3VhZ2Ugb3IgIiIpLnN0cmlwKCkKICAgIGhlYWRlciA9IGYie2ZlbmNlfXtsYW5nfSIucnN0cmlwKCkKICAgIHJldHVybiAiXG4iLmpvaW4oW2hlYWRlciwgcy5yc3RyaXAoIlxuIiksIGZlbmNlXSkKZGVmIGJ1bGxldF9saXN0KGl0ZW1zOiBJdGVyYWJsZVtzdHJdLCBvcmRlcmVkOiBib29sID0gRmFsc2UsIHN0YXJ0OiBpbnQgPSAxKSAtPiBzdHI6CiAgICAiIiJSZW5kZXIgYSBNYXJrZG93biBsaXN0IGZyb20gaXRlbXMuIiIiCiAgICBpZiBpdGVtcyBpcyBOb25lOgogICAgICAgIHJldHVybiAiIgogICAgbGluZXM6IExpc3Rbc3RyXSA9IFtdCiAgICBuID0gaW50KHN0YXJ0KSBpZiBvcmRlcmVkIGVsc2UgMAogICAgZm9yIGl0ZW0gaW4gaXRlbXM6CiAgICAgICAgaWYgaXRlbSBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIHR4dCA9IHN0cihpdGVtKS5zdHJpcCgpCiAgICAgICAgaWYgbm90IHR4dDoKICAgICAgICAgICAgY29udGludWUKICAgICAgICBpZiBvcmRlcmVkOgogICAgICAgICAgICBsaW5lcy5hcHBlbmQoZiJ7bn0uIHt0eHR9IikKICAgICAgICAgICAgbiArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbGluZXMuYXBwZW5kKGYiLSB7dHh0fSIpCiAgICByZXR1cm4gIlxuIi5qb2luKGxpbmVzKQoKCmRlZiBsaW5rKGxhYmVsOiBzdHIsIHVybDogc3RyKSAtPiBzdHI6CiAgICAiIiJSZXR1cm4gYSBNYXJrZG93biBsaW5rLiIiIgogICAgcmV0dXJuIGYiW3tsYWJlbH1dKHt1cmx9KSIKCgpkZWYgYmxvY2txdW90ZSh0ZXh0OiBzdHIpIC0+IHN0cjoKICAgICIiIlJldHVybiBhIE1hcmtkb3duIGJsb2NrcXVvdGUuIiIiCiAgICBpZiB0ZXh0IGlzIE5vbmU6CiAgICAgICAgcmV0dXJuICIiCiAgICBsaW5lcyA9IHN0cih0ZXh0KS5zcGxpdGxpbmVzKCkgb3IgWyIiXQogICAgcmV0dXJuICJcbiIuam9pbihbZiI+IHtsbn0iIGlmIGxuIGVsc2UgIj4iIGZvciBsbiBpbiBsaW5lc10pCmRlZiBfZm9ybWF0X2NlbGwodmFsdWU6IG9iamVjdCkgLT4gc3RyOgogICAgcyA9ICIiIGlmIHZhbHVlIGlzIE5vbmUgZWxzZSBzdHIodmFsdWUpCiAgICAjIEtlZXAgdGFibGVzIHJlYWRhYmxlOiBlc2NhcGUgcGlwZXMgYW5kIGNvbGxhcHNlIG5ld2xpbmVzLgogICAgcyA9IHMucmVwbGFjZSgifCIsICJcXHwiKQogICAgcyA9ICIgIi5qb2luKGxuLnN0cmlwKCkgZm9yIGxuIGluIHMuc3BsaXRsaW5lcygpIGlmIGxuLnN0cmlwKCkpCiAgICByZXR1cm4gcwoKCmRlZiB0YWJsZSgKICAgIGhlYWRlcnM6IFNlcXVlbmNlW3N0cl0sCiAgICByb3dzOiBTZXF1ZW5jZVtTZXF1ZW5jZVtvYmplY3RdXSwKICAgIGFsaWduOiBPcHRpb25hbFtTZXF1ZW5jZVtzdHJdXSA9IE5vbmUsCikgLT4gc3RyOgogICAgIiIiUmVuZGVyIGEgc2ltcGxlIEdpdEh1Yi1mbGF2b3JlZCBNYXJrZG93biB0YWJsZS4KCiAgICBhbGlnbiBtYXkgY29udGFpbiAnbGVmdCcsICdyaWdodCcsICdjZW50ZXInIGVudHJpZXMgKGNhc2UtaW5zZW5zaXRpdmUpLgogICAgIiIiCiAgICBoZHIgPSBbc3RyKGgpIGZvciBoIGluIChoZWFkZXJzIG9yICgpKV0KICAgIGlmIG5vdCBoZHI6CiAgICAgICAgcmV0dXJuICIiCiAgICBuY29sID0gbGVuKGhkcikKICAgIGRlZiBub3JtX2FsaWduKGE6IHN0cikgLT4gc3RyOgogICAgICAgIGEgPSAoYSBvciAiIikubG93ZXIoKQogICAgICAgIGlmIGEgaW4geyJyIiwgInJpZ2h0In06CiAgICAgICAgICAgIHJldHVybiAiLS0tOiIKICAgICAgICBpZiBhIGluIHsiYyIsICJjZW50ZXIiLCAiY2VudHJlIn06CiAgICAgICAgICAgIHJldHVybiAiOi0tLToiCiAgICAgICAgcmV0dXJuICI6LS0tIiAgIyBkZWZhdWx0IGxlZnQKICAgIGFsaWducyA9IFtub3JtX2FsaWduKGEpIGZvciBhIGluIChhbGlnbiBvciBbXSldCiAgICBhbGlnbnMgPSAoYWxpZ25zICsgWyI6LS0tIl0gKiBuY29sKVs6bmNvbF0KCiAgICBkZWYgcm93X2xpbmUoY2VsbHM6IFNlcXVlbmNlW29iamVjdF0pIC0+IHN0cjoKICAgICAgICBjZWxscyA9IGxpc3QoY2VsbHMgb3IgKCkpCiAgICAgICAgY2VsbHMgPSAoY2VsbHMgKyBbIiJdICogbmNvbClbOm5jb2xdCiAgICAgICAgcmV0dXJuICJ8ICIgKyAiIHwgIi5qb2luKF9mb3JtYXRfY2VsbChjKSBmb3IgYyBpbiBjZWxscykgKyAiIHwiCgogICAgbGluZXMgPSBbcm93X2xpbmUoaGRyKSwgInwgIiArICIgfCAiLmpvaW4oYWxpZ25zKSArICIgfCJdCiAgICBmb3IgciBpbiByb3dzIG9yICgpOgogICAgICAgIGxpbmVzLmFwcGVuZChyb3dfbGluZShyKSkKICAgIHJldHVybiAiXG4iLmpvaW4obGluZXMpCmRlZiBqb2luX2Jsb2NrcygqYmxvY2tzOiBPcHRpb25hbFtzdHJdKSAtPiBzdHI6CiAgICAiIiJKb2luIG1hcmtkb3duIGJsb2NrcyB3aXRoIGEgc2luZ2xlIGJsYW5rIGxpbmUgYmV0d2VlbiBub24tZW1wdHkgYmxvY2tzLiIiIgogICAgb3V0OiBMaXN0W3N0cl0gPSBbXQogICAgZm9yIGIgaW4gYmxvY2tzOgogICAgICAgIGlmIG5vdCBiOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIHMgPSBzdHIoYikuc3RyaXAoKQogICAgICAgIGlmIHM6CiAgICAgICAgICAgIG91dC5hcHBlbmQocykKICAgIHJldHVybiAiXG5cbiIuam9pbihvdXQpCgoKQGRhdGFjbGFzcyhmcm96ZW49VHJ1ZSkKY2xhc3MgS2V5VmFsdWU6CiAgICBrZXk6IHN0cgogICAgdmFsdWU6IHN0cgoKCmRlZiBrZXlfdmFsdWVfdGFibGUoaXRlbXM6IFVuaW9uW01hcHBpbmdbc3RyLCBvYmplY3RdLCBTZXF1ZW5jZVtLZXlWYWx1ZV0sIFNlcXVlbmNlW1R1cGxlW3N0ciwgb2JqZWN0XV1dKSAtPiBzdHI6CiAgICAiIiJSZW5kZXIgYSB0d28tY29sdW1uIHRhYmxlIGZyb20ga2V5L3ZhbHVlIHBhaXJzLiIiIgogICAgcGFpcnM6IExpc3RbVHVwbGVbc3RyLCBvYmplY3RdXSA9IFtdCiAgICBpZiBpdGVtcyBpcyBOb25lOgogICAgICAgIHJldHVybiAiIgogICAgaWYgaXNpbnN0YW5jZShpdGVtcywgTWFwcGluZyk6CiAgICAgICAgcGFpcnMgPSBbKHN0cihrKSwgdikgZm9yIGssIHYgaW4gaXRlbXMuaXRlbXMoKV0KICAgIGVsc2U6CiAgICAgICAgZm9yIGl0IGluIGl0ZW1zOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGl0LCBLZXlWYWx1ZSk6CiAgICAgICAgICAgICAgICBwYWlycy5hcHBlbmQoKGl0LmtleSwgaXQudmFsdWUpKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaywgdiA9IGl0ICAjIHR5cGU6IGlnbm9yZVttaXNjXQogICAgICAgICAgICAgICAgcGFpcnMuYXBwZW5kKChzdHIoayksIHYpKQogICAgcmV0dXJuIHRhYmxlKFsiS2V5IiwgIlZhbHVlIl0sIFsoaywgdikgZm9yIGssIHYgaW4gcGFpcnNdKQo=\"}\nDIR_STATE:[\"src/cosmo_contracts/markdown.py\"]\n"
        }
      ]
    },
    {
      "id": "msg_02b4d5dcf0fcafc6006949bde0fb68819590f7d82f74f1eec5",
      "type": "message",
      "status": "completed",
      "content": [
        {
          "type": "output_text",
          "annotations": [],
          "logprobs": [],
          "text": "FILE_EXPORT:{\"path\":\"src/cosmo_contracts/markdown.py\",\"size\":6044,\"encoding\":\"base64\",\"sha256\":\"af5616577ecec7b22ad5ef479e259375dace90351af9d037163d3bce1a9a11d7\",\"content\":\"IiIiY29zbW9fY29udHJhY3RzLm1hcmtkb3duCgpTbWFsbCwgZGVwZW5kZW5jeS1mcmVlIGhlbHBlcnMgZm9yIGdlbmVyYXRpbmcgTWFya2Rvd24gdGV4dC4KClRoZSBwcm9qZWN0IHVzZXMgdGhlc2UgaGVscGVycyBhdCBydW50aW1lIChlLmcuLCBDTEkgb3V0cHV0IGFuZCByZXBvcnRzKSwgc28gdGhpcwptb2R1bGUgbXVzdCBiZSBpbXBvcnQtc2FmZSBhbmQgZnJlZSBvZiBoZWF2eSBkZXBlbmRlbmNpZXMuCiIiIgoKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gdHlwaW5nIGltcG9ydCBJdGVyYWJsZSwgTGlzdCwgTWFwcGluZywgT3B0aW9uYWwsIFNlcXVlbmNlLCBUdXBsZSwgVW5pb24KCgpfX2FsbF9fID0gWwogICAgImVzY2FwZV9tYXJrZG93biIsCiAgICAiaGVhZGluZyIsCiAgICAicGFyYWdyYXBoIiwKICAgICJidWxsZXRfbGlzdCIsCiAgICAiY29kZV9ibG9jayIsCiAgICAiaW5saW5lX2NvZGUiLAogICAgImxpbmsiLAogICAgImJsb2NrcXVvdGUiLAogICAgInRhYmxlIiwKICAgICJqb2luX2Jsb2NrcyIsCiAgICAiS2V5VmFsdWUiLAogICAgImtleV92YWx1ZV90YWJsZSIsCl0KZGVmIGVzY2FwZV9tYXJrZG93bih0ZXh0OiBzdHIpIC0+IHN0cjoKICAgICIiIkVzY2FwZSBjaGFyYWN0ZXJzIHRoYXQgY29tbW9ubHkgYWZmZWN0IE1hcmtkb3duIHJlbmRlcmluZy4KCiAgICBUaGlzIGlzIGludGVudGlvbmFsbHkgY29uc2VydmF0aXZlOiBpdCBlc2NhcGVzIGNoYXJhY3RlcnMgdGhhdCBhcmUgZnJlcXVlbnRseQogICAgaW50ZXJwcmV0ZWQgYnkgY29tbW9uIE1hcmtkb3duIHJlbmRlcmVycyAoR2l0SHViLWZsYXZvcmVkIE1hcmtkb3duKS4KICAgICIiIgogICAgaWYgdGV4dCBpcyBOb25lOgogICAgICAgIHJldHVybiAiIgogICAgIyBCYWNrc2xhc2ggZmlyc3QsIHRoZW4gb3RoZXIgc3BlY2lhbHMuCiAgICBzcGVjaWFscyA9IHIiXFxgKl97fVxbXF0oKSMrXC0uIXw+IgogICAgb3V0OiBMaXN0W3N0cl0gPSBbXQogICAgZm9yIGNoIGluIHN0cih0ZXh0KToKICAgICAgICBpZiBjaCA9PSAiXFwiOiAgIyBhbHJlYWR5IHNwZWNpYWwtY2FzZWQKICAgICAgICAgICAgb3V0LmFwcGVuZCgiXFxcXCIpCiAgICAgICAgZWxpZiBjaCBpbiAiYCpfe31bXSgpIystLiF8PiI6CiAgICAgICAgICAgIG91dC5hcHBlbmQoIlxcIiArIGNoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG91dC5hcHBlbmQoY2gpCiAgICByZXR1cm4gIiIuam9pbihvdXQpCmRlZiBoZWFkaW5nKHRleHQ6IHN0ciwgbGV2ZWw6IGludCA9IDEpIC0+IHN0cjoKICAgICIiIlJldHVybiBhIE1hcmtkb3duIGhlYWRpbmcuIiIiCiAgICBsdmwgPSAxIGlmIGxldmVsIGlzIE5vbmUgZWxzZSBpbnQobGV2ZWwpCiAgICBsdmwgPSAxIGlmIGx2bCA8IDEgZWxzZSAoNiBpZiBsdmwgPiA2IGVsc2UgbHZsKQogICAgcmV0dXJuIGYieycjJyAqIGx2bH0ge3RleHR9Ii5yc3RyaXAoKQoKCmRlZiBwYXJhZ3JhcGgodGV4dDogc3RyKSAtPiBzdHI6CiAgICAiIiJOb3JtYWxpemUgYSBzdHJpbmcgdG8gYSBzaW5nbGUgTWFya2Rvd24gcGFyYWdyYXBoLiIiIgogICAgaWYgdGV4dCBpcyBOb25lOgogICAgICAgIHJldHVybiAiIgogICAgIyBDb2xsYXBzZSBpbnRlcm5hbCB3aGl0ZXNwYWNlL25ld2xpbmVzIHdoaWxlIGtlZXBpbmcgaW50ZW50aW9uYWwgc3BhY2VzLgogICAgbGluZXMgPSBbbG4uc3RyaXAoKSBmb3IgbG4gaW4gc3RyKHRleHQpLnNwbGl0bGluZXMoKSBpZiBsbi5zdHJpcCgpXQogICAgcmV0dXJuICIgIi5qb2luKGxpbmVzKQoKCmRlZiBpbmxpbmVfY29kZShjb2RlOiBzdHIpIC0+IHN0cjoKICAgICIiIkZvcm1hdCBpbmxpbmUgY29kZSwgY2hvb3NpbmcgYSBkZWxpbWl0ZXIgdGhhdCBkb2Vzbid0IGNvbmZsaWN0LiIiIgogICAgcyA9ICIiIGlmIGNvZGUgaXMgTm9uZSBlbHNlIHN0cihjb2RlKQogICAgIyBJZiBjb2RlIGNvbnRhaW5zIGJhY2t0aWNrcywgdXNlIGxvbmdlciBydW5zLgogICAgbWF4X3J1biA9IDAKICAgIHJ1biA9IDAKICAgIGZvciBjaCBpbiBzOgogICAgICAgIGlmIGNoID09ICJgIjoKICAgICAgICAgICAgcnVuICs9IDEKICAgICAgICAgICAgbWF4X3J1biA9IG1heChtYXhfcnVuLCBydW4pCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcnVuID0gMAogICAgZGVsaW0gPSAiYCIgKiAobWF4X3J1biArIDEgb3IgMSkKICAgIHJldHVybiBmIntkZWxpbX17c317ZGVsaW19IgpkZWYgY29kZV9ibG9jayhjb2RlOiBzdHIsIGxhbmd1YWdlOiBzdHIgPSAiIikgLT4gc3RyOgogICAgIiIiUmV0dXJuIGEgZmVuY2VkIE1hcmtkb3duIGNvZGUgYmxvY2suCgogICAgSWYgdGhlIGNvZGUgY29udGFpbnMgdHJpcGxlIGJhY2t0aWNrcywgYSBsb25nZXIgZmVuY2UgaXMgY2hvc2VuLgogICAgIiIiCiAgICBzID0gIiIgaWYgY29kZSBpcyBOb25lIGVsc2Ugc3RyKGNvZGUpCiAgICAjIENob29zZSBhIGZlbmNlIGxvbmdlciB0aGFuIGFueSBiYWNrdGljayBydW4gaW4gdGhlIGNvZGUuCiAgICBtYXhfcnVuID0gMAogICAgcnVuID0gMAogICAgZm9yIGNoIGluIHM6CiAgICAgICAgaWYgY2ggPT0gImAiOgogICAgICAgICAgICBydW4gKz0gMQogICAgICAgICAgICBtYXhfcnVuID0gbWF4KG1heF9ydW4sIHJ1bikKICAgICAgICBlbHNlOgogICAgICAgICAgICBydW4gPSAwCiAgICBmZW5jZSA9ICJgIiAqIG1heCgzLCBtYXhfcnVuICsgMSkKICAgIGxhbmcgPSAobGFuZ3VhZ2Ugb3IgIiIpLnN0cmlwKCkKICAgIGhlYWRlciA9IGYie2ZlbmNlfXtsYW5nfSIucnN0cmlwKCkKICAgIHJldHVybiAiXG4iLmpvaW4oW2hlYWRlciwgcy5yc3RyaXAoIlxuIiksIGZlbmNlXSkKZGVmIGJ1bGxldF9saXN0KGl0ZW1zOiBJdGVyYWJsZVtzdHJdLCBvcmRlcmVkOiBib29sID0gRmFsc2UsIHN0YXJ0OiBpbnQgPSAxKSAtPiBzdHI6CiAgICAiIiJSZW5kZXIgYSBNYXJrZG93biBsaXN0IGZyb20gaXRlbXMuIiIiCiAgICBpZiBpdGVtcyBpcyBOb25lOgogICAgICAgIHJldHVybiAiIgogICAgbGluZXM6IExpc3Rbc3RyXSA9IFtdCiAgICBuID0gaW50KHN0YXJ0KSBpZiBvcmRlcmVkIGVsc2UgMAogICAgZm9yIGl0ZW0gaW4gaXRlbXM6CiAgICAgICAgaWYgaXRlbSBpcyBOb25lOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIHR4dCA9IHN0cihpdGVtKS5zdHJpcCgpCiAgICAgICAgaWYgbm90IHR4dDoKICAgICAgICAgICAgY29udGludWUKICAgICAgICBpZiBvcmRlcmVkOgogICAgICAgICAgICBsaW5lcy5hcHBlbmQoZiJ7bn0uIHt0eHR9IikKICAgICAgICAgICAgbiArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgbGluZXMuYXBwZW5kKGYiLSB7dHh0fSIpCiAgICByZXR1cm4gIlxuIi5qb2luKGxpbmVzKQoKCmRlZiBsaW5rKGxhYmVsOiBzdHIsIHVybDogc3RyKSAtPiBzdHI6CiAgICAiIiJSZXR1cm4gYSBNYXJrZG93biBsaW5rLiIiIgogICAgcmV0dXJuIGYiW3tsYWJlbH1dKHt1cmx9KSIKCgpkZWYgYmxvY2txdW90ZSh0ZXh0OiBzdHIpIC0+IHN0cjoKICAgICIiIlJldHVybiBhIE1hcmtkb3duIGJsb2NrcXVvdGUuIiIiCiAgICBpZiB0ZXh0IGlzIE5vbmU6CiAgICAgICAgcmV0dXJuICIiCiAgICBsaW5lcyA9IHN0cih0ZXh0KS5zcGxpdGxpbmVzKCkgb3IgWyIiXQogICAgcmV0dXJuICJcbiIuam9pbihbZiI+IHtsbn0iIGlmIGxuIGVsc2UgIj4iIGZvciBsbiBpbiBsaW5lc10pCmRlZiBfZm9ybWF0X2NlbGwodmFsdWU6IG9iamVjdCkgLT4gc3RyOgogICAgcyA9ICIiIGlmIHZhbHVlIGlzIE5vbmUgZWxzZSBzdHIodmFsdWUpCiAgICAjIEtlZXAgdGFibGVzIHJlYWRhYmxlOiBlc2NhcGUgcGlwZXMgYW5kIGNvbGxhcHNlIG5ld2xpbmVzLgogICAgcyA9IHMucmVwbGFjZSgifCIsICJcXHwiKQogICAgcyA9ICIgIi5qb2luKGxuLnN0cmlwKCkgZm9yIGxuIGluIHMuc3BsaXRsaW5lcygpIGlmIGxuLnN0cmlwKCkpCiAgICByZXR1cm4gcwoKCmRlZiB0YWJsZSgKICAgIGhlYWRlcnM6IFNlcXVlbmNlW3N0cl0sCiAgICByb3dzOiBTZXF1ZW5jZVtTZXF1ZW5jZVtvYmplY3RdXSwKICAgIGFsaWduOiBPcHRpb25hbFtTZXF1ZW5jZVtzdHJdXSA9IE5vbmUsCikgLT4gc3RyOgogICAgIiIiUmVuZGVyIGEgc2ltcGxlIEdpdEh1Yi1mbGF2b3JlZCBNYXJrZG93biB0YWJsZS4KCiAgICBhbGlnbiBtYXkgY29udGFpbiAnbGVmdCcsICdyaWdodCcsICdjZW50ZXInIGVudHJpZXMgKGNhc2UtaW5zZW5zaXRpdmUpLgogICAgIiIiCiAgICBoZHIgPSBbc3RyKGgpIGZvciBoIGluIChoZWFkZXJzIG9yICgpKV0KICAgIGlmIG5vdCBoZHI6CiAgICAgICAgcmV0dXJuICIiCiAgICBuY29sID0gbGVuKGhkcikKICAgIGRlZiBub3JtX2FsaWduKGE6IHN0cikgLT4gc3RyOgogICAgICAgIGEgPSAoYSBvciAiIikubG93ZXIoKQogICAgICAgIGlmIGEgaW4geyJyIiwgInJpZ2h0In06CiAgICAgICAgICAgIHJldHVybiAiLS0tOiIKICAgICAgICBpZiBhIGluIHsiYyIsICJjZW50ZXIiLCAiY2VudHJlIn06CiAgICAgICAgICAgIHJldHVybiAiOi0tLToiCiAgICAgICAgcmV0dXJuICI6LS0tIiAgIyBkZWZhdWx0IGxlZnQKICAgIGFsaWducyA9IFtub3JtX2FsaWduKGEpIGZvciBhIGluIChhbGlnbiBvciBbXSldCiAgICBhbGlnbnMgPSAoYWxpZ25zICsgWyI6LS0tIl0gKiBuY29sKVs6bmNvbF0KCiAgICBkZWYgcm93X2xpbmUoY2VsbHM6IFNlcXVlbmNlW29iamVjdF0pIC0+IHN0cjoKICAgICAgICBjZWxscyA9IGxpc3QoY2VsbHMgb3IgKCkpCiAgICAgICAgY2VsbHMgPSAoY2VsbHMgKyBbIiJdICogbmNvbClbOm5jb2xdCiAgICAgICAgcmV0dXJuICJ8ICIgKyAiIHwgIi5qb2luKF9mb3JtYXRfY2VsbChjKSBmb3IgYyBpbiBjZWxscykgKyAiIHwiCgogICAgbGluZXMgPSBbcm93X2xpbmUoaGRyKSwgInwgIiArICIgfCAiLmpvaW4oYWxpZ25zKSArICIgfCJdCiAgICBmb3IgciBpbiByb3dzIG9yICgpOgogICAgICAgIGxpbmVzLmFwcGVuZChyb3dfbGluZShyKSkKICAgIHJldHVybiAiXG4iLmpvaW4obGluZXMpCmRlZiBqb2luX2Jsb2NrcygqYmxvY2tzOiBPcHRpb25hbFtzdHJdKSAtPiBzdHI6CiAgICAiIiJKb2luIG1hcmtkb3duIGJsb2NrcyB3aXRoIGEgc2luZ2xlIGJsYW5rIGxpbmUgYmV0d2VlbiBub24tZW1wdHkgYmxvY2tzLiIiIgogICAgb3V0OiBMaXN0W3N0cl0gPSBbXQogICAgZm9yIGIgaW4gYmxvY2tzOgogICAgICAgIGlmIG5vdCBiOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIHMgPSBzdHIoYikuc3RyaXAoKQogICAgICAgIGlmIHM6CiAgICAgICAgICAgIG91dC5hcHBlbmQocykKICAgIHJldHVybiAiXG5cbiIuam9pbihvdXQpCgoKQGRhdGFjbGFzcyhmcm96ZW49VHJ1ZSkKY2xhc3MgS2V5VmFsdWU6CiAgICBrZXk6IHN0cgogICAgdmFsdWU6IHN0cgoKCmRlZiBrZXlfdmFsdWVfdGFibGUoaXRlbXM6IFVuaW9uW01hcHBpbmdbc3RyLCBvYmplY3RdLCBTZXF1ZW5jZVtLZXlWYWx1ZV0sIFNlcXVlbmNlW1R1cGxlW3N0ciwgb2JqZWN0XV1dKSAtPiBzdHI6CiAgICAiIiJSZW5kZXIgYSB0d28tY29sdW1uIHRhYmxlIGZyb20ga2V5L3ZhbHVlIHBhaXJzLiIiIgogICAgcGFpcnM6IExpc3RbVHVwbGVbc3RyLCBvYmplY3RdXSA9IFtdCiAgICBpZiBpdGVtcyBpcyBOb25lOgogICAgICAgIHJldHVybiAiIgogICAgaWYgaXNpbnN0YW5jZShpdGVtcywgTWFwcGluZyk6CiAgICAgICAgcGFpcnMgPSBbKHN0cihrKSwgdikgZm9yIGssIHYgaW4gaXRlbXMuaXRlbXMoKV0KICAgIGVsc2U6CiAgICAgICAgZm9yIGl0IGluIGl0ZW1zOgogICAgICAgICAgICBpZiBpc2luc3RhbmNlKGl0LCBLZXlWYWx1ZSk6CiAgICAgICAgICAgICAgICBwYWlycy5hcHBlbmQoKGl0LmtleSwgaXQudmFsdWUpKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaywgdiA9IGl0ICAjIHR5cGU6IGlnbm9yZVttaXNjXQogICAgICAgICAgICAgICAgcGFpcnMuYXBwZW5kKChzdHIoayksIHYpKQogICAgcmV0dXJuIHRhYmxlKFsiS2V5IiwgIlZhbHVlIl0sIFsoaywgdikgZm9yIGssIHYgaW4gcGFpcnNdKQo=\"}\nDIR_STATE:[\"src/cosmo_contracts/markdown.py\"]"
        }
      ],
      "role": "assistant"
    }
  ],
  "codeResults": []
}