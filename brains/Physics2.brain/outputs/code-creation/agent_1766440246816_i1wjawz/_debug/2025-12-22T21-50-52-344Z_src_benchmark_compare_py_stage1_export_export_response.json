{
  "content": "FILE_EXPORT:{\"path\":\"src/benchmark_compare.py\",\"size\":7336,\"encoding\":\"base64\",\"sha256\":\"b4ca293ead185504dab0de013c3a73bc7d6a3bd65fb2b80136308b5c14c18b9c\",\"content\":\"IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgppbXBvcnQgYXJncGFyc2UKaW1wb3J0IGpzb24KaW1wb3J0IG1hdGgKaW1wb3J0IG9zCmltcG9ydCByYW5kb20KaW1wb3J0IHN5cwpmcm9tIGRhdGFjbGFzc2VzIGltcG9ydCBkYXRhY2xhc3MKZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIERpY3QsIEl0ZXJhYmxlLCBMaXN0LCBUdXBsZSwgVW5pb24KCk51bWJlciA9IFVuaW9uW2ludCwgZmxvYXRdCmRlZiBlbmZvcmNlX2RldGVybWluaXNtKHNlZWQ6IGludCkgLT4gTm9uZToKICAgICMgQmVzdC1lZmZvcnQgZGV0ZXJtaW5pc20gZm9yIGJlbmNobWFyayBydW5zIGFuZCBjb21wYXJpc29ucy4KICAgIHJhbmRvbS5zZWVkKHNlZWQpCiAgICBvcy5lbnZpcm9uLnNldGRlZmF1bHQoIlBZVEhPTkhBU0hTRUVEIiwgc3RyKHNlZWQpKQogICAgdHJ5OgogICAgICAgIGltcG9ydCBudW1weSBhcyBucCAgIyB0eXBlOiBpZ25vcmUKICAgICAgICBucC5yYW5kb20uc2VlZChzZWVkKQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICBwYXNzCmRlZiBjYW5vbmljYWxfZHVtcHMob2JqOiBBbnkpIC0+IHN0cjoKICAgICMgU3RhYmxlIEpTT04gZm9yIENJIGxvZ3MvYXJ0aWZhY3RzIChrZXkgb3JkZXJpbmcsIG5vcm1hbGl6ZWQgd2hpdGVzcGFjZSkuCiAgICByZXR1cm4ganNvbi5kdW1wcyhvYmosIHNvcnRfa2V5cz1UcnVlLCBlbnN1cmVfYXNjaWk9RmFsc2UsIGluZGVudD0yKSArICJcbiIKCgpkZWYgX2lzX251bWJlcih4OiBBbnkpIC0+IGJvb2w6CiAgICByZXR1cm4gaXNpbnN0YW5jZSh4LCAoaW50LCBmbG9hdCkpIGFuZCBub3QgaXNpbnN0YW5jZSh4LCBib29sKQoKCmRlZiBfcGF0aF9qb2luKGJhc2U6IHN0ciwga2V5OiBVbmlvbltzdHIsIGludF0pIC0+IHN0cjoKICAgIGlmIGlzaW5zdGFuY2Uoa2V5LCBpbnQpOgogICAgICAgIHJldHVybiBmIntiYXNlfVt7a2V5fV0iCiAgICAjIEpTT04tcG9pbnRlci1pc2ggYnV0IGh1bWFuIGZyaWVuZGx5LgogICAgcmV0dXJuIGYie2Jhc2V9LntrZXl9IiBpZiBiYXNlIGVsc2Ugc3RyKGtleSkKQGRhdGFjbGFzcwpjbGFzcyBEaWZmOgogICAgcGF0aDogc3RyCiAgICBleHBlY3RlZDogQW55CiAgICBhY3R1YWw6IEFueQogICAgbWVzc2FnZTogc3RyCgogICAgZGVmIGFzX2RpY3Qoc2VsZikgLT4gRGljdFtzdHIsIEFueV06CiAgICAgICAgcmV0dXJuIHsicGF0aCI6IHNlbGYucGF0aCwgImV4cGVjdGVkIjogc2VsZi5leHBlY3RlZCwgImFjdHVhbCI6IHNlbGYuYWN0dWFsLCAibWVzc2FnZSI6IHNlbGYubWVzc2FnZX0KZGVmIF90b2xfZm9yX3BhdGgocGF0aDogc3RyLCBiYXNlX2F0b2w6IGZsb2F0LCBiYXNlX3J0b2w6IGZsb2F0LCBvdmVycmlkZXM6IERpY3Rbc3RyLCBEaWN0W3N0ciwgZmxvYXRdXSkgLT4gVHVwbGVbZmxvYXQsIGZsb2F0XToKICAgIGlmIHBhdGggaW4gb3ZlcnJpZGVzOgogICAgICAgIG8gPSBvdmVycmlkZXNbcGF0aF0KICAgICAgICByZXR1cm4gZmxvYXQoby5nZXQoImF0b2wiLCBiYXNlX2F0b2wpKSwgZmxvYXQoby5nZXQoInJ0b2wiLCBiYXNlX3J0b2wpKQogICAgcmV0dXJuIGJhc2VfYXRvbCwgYmFzZV9ydG9sCgoKZGVmIG51bWJlcnNfY2xvc2UoYTogTnVtYmVyLCBiOiBOdW1iZXIsIGF0b2w6IGZsb2F0LCBydG9sOiBmbG9hdCkgLT4gYm9vbDoKICAgICMgTmFOPT1OYU4sIGluZiBtdXN0IG1hdGNoIHNpZ24uCiAgICBpZiBpc2luc3RhbmNlKGEsIGJvb2wpIG9yIGlzaW5zdGFuY2UoYiwgYm9vbCk6CiAgICAgICAgcmV0dXJuIGEgPT0gYgogICAgaWYgaXNpbnN0YW5jZShhLCBmbG9hdCkgYW5kIG1hdGguaXNuYW4oYSk6CiAgICAgICAgcmV0dXJuIGlzaW5zdGFuY2UoYiwgZmxvYXQpIGFuZCBtYXRoLmlzbmFuKGIpCiAgICBpZiBpc2luc3RhbmNlKGIsIGZsb2F0KSBhbmQgbWF0aC5pc25hbihiKToKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGlmIGlzaW5zdGFuY2UoYSwgZmxvYXQpIGFuZCBtYXRoLmlzaW5mKGEpIG9yIGlzaW5zdGFuY2UoYiwgZmxvYXQpIGFuZCBtYXRoLmlzaW5mKGIpOgogICAgICAgIHJldHVybiBhID09IGIKICAgIHJldHVybiBhYnMoYSAtIGIpIDw9IChhdG9sICsgcnRvbCAqIGFicyhiKSkKZGVmIGRpZmZfanNvbigKICAgIGV4cGVjdGVkOiBBbnksCiAgICBhY3R1YWw6IEFueSwKICAgICosCiAgICBhdG9sOiBmbG9hdCA9IDFlLTgsCiAgICBydG9sOiBmbG9hdCA9IDFlLTYsCiAgICBvdmVycmlkZXM6IERpY3Rbc3RyLCBEaWN0W3N0ciwgZmxvYXRdXSB8IE5vbmUgPSBOb25lLAogICAgcGF0aDogc3RyID0gIiIsCikgLT4gTGlzdFtEaWZmXToKICAgIG92ZXJyaWRlcyA9IG92ZXJyaWRlcyBvciB7fQogICAgZGlmZnM6IExpc3RbRGlmZl0gPSBbXQoKICAgIGlmIF9pc19udW1iZXIoZXhwZWN0ZWQpIGFuZCBfaXNfbnVtYmVyKGFjdHVhbCk6CiAgICAgICAgcGFfYXRvbCwgcGFfcnRvbCA9IF90b2xfZm9yX3BhdGgocGF0aCwgYXRvbCwgcnRvbCwgb3ZlcnJpZGVzKQogICAgICAgIGlmIG5vdCBudW1iZXJzX2Nsb3NlKGZsb2F0KGV4cGVjdGVkKSwgZmxvYXQoYWN0dWFsKSwgcGFfYXRvbCwgcGFfcnRvbCk6CiAgICAgICAgICAgIGRpZmZzLmFwcGVuZChEaWZmKHBhdGgsIGV4cGVjdGVkLCBhY3R1YWwsIGYibnVtYmVycyBkaWZmZXIgKGF0b2w9e3BhX2F0b2x9LCBydG9sPXtwYV9ydG9sfSkiKSkKICAgICAgICByZXR1cm4gZGlmZnMKCiAgICBpZiB0eXBlKGV4cGVjdGVkKSAhPSB0eXBlKGFjdHVhbCk6CiAgICAgICAgZGlmZnMuYXBwZW5kKERpZmYocGF0aCwgZXhwZWN0ZWQsIGFjdHVhbCwgZiJ0eXBlIG1pc21hdGNoOiB7dHlwZShleHBlY3RlZCkuX19uYW1lX199IHZzIHt0eXBlKGFjdHVhbCkuX19uYW1lX199IikpCiAgICAgICAgcmV0dXJuIGRpZmZzCgogICAgaWYgaXNpbnN0YW5jZShleHBlY3RlZCwgZGljdCk6CiAgICAgICAgZWtleXMsIGFrZXlzID0gc2V0KGV4cGVjdGVkLmtleXMoKSksIHNldChhY3R1YWwua2V5cygpKSAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGVdCiAgICAgICAgZm9yIGsgaW4gc29ydGVkKGVrZXlzIC0gYWtleXMpOgogICAgICAgICAgICBkaWZmcy5hcHBlbmQoRGlmZihfcGF0aF9qb2luKHBhdGgsIHN0cihrKSksIGV4cGVjdGVkW2tdLCBOb25lLCAibWlzc2luZyBrZXkgaW4gYWN0dWFsIikpICAjIHR5cGU6IGlnbm9yZVtpbmRleF0KICAgICAgICBmb3IgayBpbiBzb3J0ZWQoYWtleXMgLSBla2V5cyk6CiAgICAgICAgICAgIGRpZmZzLmFwcGVuZChEaWZmKF9wYXRoX2pvaW4ocGF0aCwgc3RyKGspKSwgTm9uZSwgYWN0dWFsW2tdLCAiZXh0cmEga2V5IGluIGFjdHVhbCIpKSAgIyB0eXBlOiBpZ25vcmVbaW5kZXhdCiAgICAgICAgZm9yIGsgaW4gc29ydGVkKGVrZXlzICYgYWtleXMpOgogICAgICAgICAgICBkaWZmcy5leHRlbmQoZGlmZl9qc29uKGV4cGVjdGVkW2tdLCBhY3R1YWxba10sIGF0b2w9YXRvbCwgcnRvbD1ydG9sLCBvdmVycmlkZXM9b3ZlcnJpZGVzLCBwYXRoPV9wYXRoX2pvaW4ocGF0aCwgc3RyKGspKSkpICAjIHR5cGU6IGlnbm9yZVtpbmRleF0KICAgICAgICByZXR1cm4gZGlmZnMKCiAgICBpZiBpc2luc3RhbmNlKGV4cGVjdGVkLCBsaXN0KToKICAgICAgICBpZiBsZW4oZXhwZWN0ZWQpICE9IGxlbihhY3R1YWwpOiAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGVdCiAgICAgICAgICAgIGRpZmZzLmFwcGVuZChEaWZmKHBhdGgsIGxlbihleHBlY3RlZCksIGxlbihhY3R1YWwpLCAibGlzdCBsZW5ndGggZGlmZmVycyIpKQogICAgICAgIGZvciBpLCAoZSwgYSkgaW4gZW51bWVyYXRlKHppcChleHBlY3RlZCwgYWN0dWFsKSk6ICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZV0KICAgICAgICAgICAgZGlmZnMuZXh0ZW5kKGRpZmZfanNvbihlLCBhLCBhdG9sPWF0b2wsIHJ0b2w9cnRvbCwgb3ZlcnJpZGVzPW92ZXJyaWRlcywgcGF0aD1fcGF0aF9qb2luKHBhdGgsIGkpKSkKICAgICAgICByZXR1cm4gZGlmZnMKCiAgICBpZiBleHBlY3RlZCAhPSBhY3R1YWw6CiAgICAgICAgZGlmZnMuYXBwZW5kKERpZmYocGF0aCwgZXhwZWN0ZWQsIGFjdHVhbCwgInZhbHVlIGRpZmZlcnMiKSkKICAgIHJldHVybiBkaWZmcwpkZWYgbG9hZF9qc29uKHBhdGg6IFBhdGgpIC0+IEFueToKICAgIHdpdGggcGF0aC5vcGVuKCJyIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgZjoKICAgICAgICByZXR1cm4ganNvbi5sb2FkKGYpCgoKZGVmIHBhcnNlX292ZXJyaWRlcyhyYXc6IHN0ciB8IE5vbmUpIC0+IERpY3Rbc3RyLCBEaWN0W3N0ciwgZmxvYXRdXToKICAgIGlmIG5vdCByYXc6CiAgICAgICAgcmV0dXJuIHt9CiAgICB0cnk6CiAgICAgICAgZGF0YSA9IGpzb24ubG9hZHMocmF3KQogICAgICAgIGlmIGlzaW5zdGFuY2UoZGF0YSwgZGljdCk6CiAgICAgICAgICAgIHJldHVybiB7c3RyKGspOiBkaWN0KHYpIGZvciBrLCB2IGluIGRhdGEuaXRlbXMoKSBpZiBpc2luc3RhbmNlKHYsIGRpY3QpfQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICBwYXNzCiAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIHRvbGVyYW5jZXMgSlNPTjsgZXhwZWN0ZWQgb2JqZWN0IG1hcHBpbmcgcGF0aC0+IHthdG9sLCBydG9sfSIpCgoKZGVmIGNvbXBhcmVfZmlsZXMoCiAgICBhY3R1YWxfcGF0aDogUGF0aCwKICAgIGV4cGVjdGVkX3BhdGg6IFBhdGgsCiAgICAqLAogICAgc2VlZDogaW50ID0gMCwKICAgIGF0b2w6IGZsb2F0ID0gMWUtOCwKICAgIHJ0b2w6IGZsb2F0ID0gMWUtNiwKICAgIG92ZXJyaWRlczogRGljdFtzdHIsIERpY3Rbc3RyLCBmbG9hdF1dIHwgTm9uZSA9IE5vbmUsCiAgICByZXBvcnRfcGF0aDogUGF0aCB8IE5vbmUgPSBOb25lLAopIC0+IGludDoKICAgIGVuZm9yY2VfZGV0ZXJtaW5pc20oc2VlZCkKICAgIHRyeToKICAgICAgICBleHBlY3RlZCA9IGxvYWRfanNvbihleHBlY3RlZF9wYXRoKQogICAgICAgIGFjdHVhbCA9IGxvYWRfanNvbihhY3R1YWxfcGF0aCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBzeXMuc3RkZXJyLndyaXRlKGYiRVJST1I6IGZhaWxlZCB0byBsb2FkIEpTT046IHtlfVxuIikKICAgICAgICByZXR1cm4gMgoKICAgIGRpZmZzID0gZGlmZl9qc29uKGV4cGVjdGVkLCBhY3R1YWwsIGF0b2w9YXRvbCwgcnRvbD1ydG9sLCBvdmVycmlkZXM9b3ZlcnJpZGVzIG9yIHt9KQogICAgcmVwb3J0ID0gewogICAgICAgICJvayI6IG5vdCBkaWZmcywKICAgICAgICAic2VlZCI6IHNlZWQsCiAgICAgICAgImF0b2wiOiBhdG9sLAogICAgICAgICJydG9sIjogcnRvbCwKICAgICAgICAiZXhwZWN0ZWRfcGF0aCI6IHN0cihleHBlY3RlZF9wYXRoKSwKICAgICAgICAiYWN0dWFsX3BhdGgiOiBzdHIoYWN0dWFsX3BhdGgpLAogICAgICAgICJkaWZmX2NvdW50IjogbGVuKGRpZmZzKSwKICAgICAgICAiZGlmZnMiOiBbZC5hc19kaWN0KCkgZm9yIGQgaW4gZGlmZnNbOjIwMF1dLAogICAgICAgICJ0cnVuY2F0ZWQiOiBsZW4oZGlmZnMpID4gMjAwLAogICAgfQogICAgaWYgcmVwb3J0X3BhdGg6CiAgICAgICAgcmVwb3J0X3BhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICByZXBvcnRfcGF0aC53cml0ZV90ZXh0KGNhbm9uaWNhbF9kdW1wcyhyZXBvcnQpLCBlbmNvZGluZz0idXRmLTgiKQoKICAgIGlmIGRpZmZzOgogICAgICAgIHN5cy5zdGRlcnIud3JpdGUoZiJGQUlMOiB7bGVuKGRpZmZzKX0gZGlmZnNcbiIpCiAgICAgICAgc3lzLnN0ZGVyci53cml0ZShjYW5vbmljYWxfZHVtcHMocmVwb3J0IGlmIGxlbihkaWZmcykgPD0gMjAgZWxzZSB7KipyZXBvcnQsICJkaWZmcyI6IHJlcG9ydFsiZGlmZnMiXVs6MjBdLCAidHJ1bmNhdGVkIjogVHJ1ZX0pKQogICAgICAgIHJldHVybiAxCiAgICBzeXMuc3Rkb3V0LndyaXRlKCJQQVNTXG4iKQogICAgcmV0dXJuIDAKZGVmIG1haW4oYXJndjogTGlzdFtzdHJdIHwgTm9uZSA9IE5vbmUpIC0+IGludDoKICAgIGhlcmUgPSBQYXRoKF9fZmlsZV9fKS5yZXNvbHZlKCkKICAgIGRlZmF1bHRfZXhwZWN0ZWQgPSBoZXJlLnBhcmVudHNbMV0gLyAiZXhwZWN0ZWQiIC8gImJlbmNobWFya19jYXNlXzAwMS5leHBlY3RlZC5qc29uIgoKICAgIHAgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcihkZXNjcmlwdGlvbj0iQmVuY2htYXJrIGV4cGVjdGVkLXZzLWFjdHVhbCBKU09OIGNvbXBhcmF0b3Igd2l0aCBkZXRlcm1pbmlzbSArIG51bWVyaWMgdG9sZXJhbmNlcy4iKQogICAgcC5hZGRfYXJndW1lbnQoIi0tYWN0dWFsIiwgdHlwZT1QYXRoLCByZXF1aXJlZD1UcnVlLCBoZWxwPSJQYXRoIHRvIGFjdHVhbCBiZW5jaG1hcmsgSlNPTiBvdXRwdXQuIikKICAgIHAuYWRkX2FyZ3VtZW50KCItLWV4cGVjdGVkIiwgdHlwZT1QYXRoLCBkZWZhdWx0PWRlZmF1bHRfZXhwZWN0ZWQsIGhlbHA9ZiJQYXRoIHRvIGV4cGVjdGVkIEpTT04gKGRlZmF1bHQ6IHtkZWZhdWx0X2V4cGVjdGVkfSkiKQogICAgcC5hZGRfYXJndW1lbnQoIi0tc2VlZCIsIHR5cGU9aW50LCBkZWZhdWx0PWludChvcy5lbnZpcm9uLmdldCgiQkVOQ0hNQVJLX1NFRUQiLCAiMCIpKSkKICAgIHAuYWRkX2FyZ3VtZW50KCItLWF0b2wiLCB0eXBlPWZsb2F0LCBkZWZhdWx0PWZsb2F0KG9zLmVudmlyb24uZ2V0KCJCRU5DSE1BUktfQVRPTCIsICIxZS04IikpKQogICAgcC5hZGRfYXJndW1lbnQoIi0tcnRvbCIsIHR5cGU9ZmxvYXQsIGRlZmF1bHQ9ZmxvYXQob3MuZW52aXJvbi5nZXQoIkJFTkNITUFSS19SVE9MIiwgIjFlLTYiKSkpCiAgICBwLmFkZF9hcmd1bWVudCgiLS10b2xlcmFuY2VzLWpzb24iLCB0eXBlPXN0ciwgZGVmYXVsdD1vcy5lbnZpcm9uLmdldCgiQkVOQ0hNQVJLX1RPTEVSQU5DRVNfSlNPTiIpKQogICAgcC5hZGRfYXJndW1lbnQoIi0tcmVwb3J0IiwgdHlwZT1QYXRoLCBkZWZhdWx0PU5vbmUsIGhlbHA9Ik9wdGlvbmFsIHBhdGggdG8gd3JpdGUgYSBjYW5vbmljYWwgSlNPTiByZXBvcnQgZm9yIENJIGFydGlmYWN0cy4iKQogICAgYXJncyA9IHAucGFyc2VfYXJncyhhcmd2KQoKICAgIG92ZXJyaWRlcyA9IHBhcnNlX292ZXJyaWRlcyhhcmdzLnRvbGVyYW5jZXNfanNvbikKICAgIHJldHVybiBjb21wYXJlX2ZpbGVzKAogICAgICAgIGFyZ3MuYWN0dWFsLAogICAgICAgIGFyZ3MuZXhwZWN0ZWQsCiAgICAgICAgc2VlZD1hcmdzLnNlZWQsCiAgICAgICAgYXRvbD1hcmdzLmF0b2wsCiAgICAgICAgcnRvbD1hcmdzLnJ0b2wsCiAgICAgICAgb3ZlcnJpZGVzPW92ZXJyaWRlcywKICAgICAgICByZXBvcnRfcGF0aD1hcmdzLnJlcG9ydCwKICAgICkKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgcmFpc2UgU3lzdGVtRXhpdChtYWluKCkpCg==\"}\nDIR_STATE:[\"src/benchmark_compare.py\",\"src/determinism.py\",\"src/numeric_tolerance_diff.py\",\"src/stable_json.py\"]",
  "reasoning": "",
  "responseId": "resp_02e7ea6d64dddc6a006949bf3dd53c8196afabe288656a3cbc",
  "model": "gpt-5.2-2025-12-11",
  "usage": {
    "input_tokens": 7534,
    "input_tokens_details": {
      "cached_tokens": 0
    },
    "output_tokens": 6492,
    "output_tokens_details": {
      "reasoning_tokens": 32
    },
    "total_tokens": 14026
  },
  "hadError": false,
  "errorType": null,
  "webSearchSources": [],
  "citations": [],
  "output": [
    {
      "id": "rs_02e7ea6d64dddc6a006949bf3e7fb88196a10c9c1cb78888d5",
      "type": "reasoning",
      "summary": []
    },
    {
      "id": "ci_02e7ea6d64dddc6a006949bf3f87048196b0bf27223302f4d9",
      "type": "code_interpreter_call",
      "status": "completed",
      "code": "from pathlib import Path\r\nimport base64, json, hashlib, gzip\r\n\r\ntarget_path = Path('/mnt/data').joinpath('src/benchmark_compare.py')\r\nassert target_path.is_file(), 'Expected src/benchmark_compare.py to exist before export'\r\ndata = target_path.read_bytes()\r\npayload = {\r\n   'path': 'src/benchmark_compare.py',\r\n   'size': len(data),\r\n   'encoding': 'base64',\r\n   'sha256': hashlib.sha256(data).hexdigest(),\r\n   'content': None\r\n}\r\nif len(data) > 20000:\r\n    compressed = gzip.compress(data)\r\n    payload['encoding'] = 'gzip+base64'\r\n    payload['content'] = base64.b64encode(compressed).decode('ascii')\r\nelse:\r\n    payload['content'] = base64.b64encode(data).decode('ascii')\r\nprint('FILE_EXPORT:' + json.dumps(payload, separators=(',', ':')))\r\nprint('DIR_STATE:' + json.dumps(sorted(str(p.relative_to(Path(\"/mnt/data\"))) for p in target_path.parent.glob('*') if p.is_file())))",
      "container_id": "cntr_6949bd39c7008190b2d314f911169a74060596b8e6d512ff",
      "outputs": [
        {
          "type": "logs",
          "logs": "FILE_EXPORT:{\"path\":\"src/benchmark_compare.py\",\"size\":7336,\"encoding\":\"base64\",\"sha256\":\"b4ca293ead185504dab0de013c3a73bc7d6a3bd65fb2b80136308b5c14c18b9c\",\"content\":\"IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgppbXBvcnQgYXJncGFyc2UKaW1wb3J0IGpzb24KaW1wb3J0IG1hdGgKaW1wb3J0IG9zCmltcG9ydCByYW5kb20KaW1wb3J0IHN5cwpmcm9tIGRhdGFjbGFzc2VzIGltcG9ydCBkYXRhY2xhc3MKZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIERpY3QsIEl0ZXJhYmxlLCBMaXN0LCBUdXBsZSwgVW5pb24KCk51bWJlciA9IFVuaW9uW2ludCwgZmxvYXRdCmRlZiBlbmZvcmNlX2RldGVybWluaXNtKHNlZWQ6IGludCkgLT4gTm9uZToKICAgICMgQmVzdC1lZmZvcnQgZGV0ZXJtaW5pc20gZm9yIGJlbmNobWFyayBydW5zIGFuZCBjb21wYXJpc29ucy4KICAgIHJhbmRvbS5zZWVkKHNlZWQpCiAgICBvcy5lbnZpcm9uLnNldGRlZmF1bHQoIlBZVEhPTkhBU0hTRUVEIiwgc3RyKHNlZWQpKQogICAgdHJ5OgogICAgICAgIGltcG9ydCBudW1weSBhcyBucCAgIyB0eXBlOiBpZ25vcmUKICAgICAgICBucC5yYW5kb20uc2VlZChzZWVkKQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICBwYXNzCmRlZiBjYW5vbmljYWxfZHVtcHMob2JqOiBBbnkpIC0+IHN0cjoKICAgICMgU3RhYmxlIEpTT04gZm9yIENJIGxvZ3MvYXJ0aWZhY3RzIChrZXkgb3JkZXJpbmcsIG5vcm1hbGl6ZWQgd2hpdGVzcGFjZSkuCiAgICByZXR1cm4ganNvbi5kdW1wcyhvYmosIHNvcnRfa2V5cz1UcnVlLCBlbnN1cmVfYXNjaWk9RmFsc2UsIGluZGVudD0yKSArICJcbiIKCgpkZWYgX2lzX251bWJlcih4OiBBbnkpIC0+IGJvb2w6CiAgICByZXR1cm4gaXNpbnN0YW5jZSh4LCAoaW50LCBmbG9hdCkpIGFuZCBub3QgaXNpbnN0YW5jZSh4LCBib29sKQoKCmRlZiBfcGF0aF9qb2luKGJhc2U6IHN0ciwga2V5OiBVbmlvbltzdHIsIGludF0pIC0+IHN0cjoKICAgIGlmIGlzaW5zdGFuY2Uoa2V5LCBpbnQpOgogICAgICAgIHJldHVybiBmIntiYXNlfVt7a2V5fV0iCiAgICAjIEpTT04tcG9pbnRlci1pc2ggYnV0IGh1bWFuIGZyaWVuZGx5LgogICAgcmV0dXJuIGYie2Jhc2V9LntrZXl9IiBpZiBiYXNlIGVsc2Ugc3RyKGtleSkKQGRhdGFjbGFzcwpjbGFzcyBEaWZmOgogICAgcGF0aDogc3RyCiAgICBleHBlY3RlZDogQW55CiAgICBhY3R1YWw6IEFueQogICAgbWVzc2FnZTogc3RyCgogICAgZGVmIGFzX2RpY3Qoc2VsZikgLT4gRGljdFtzdHIsIEFueV06CiAgICAgICAgcmV0dXJuIHsicGF0aCI6IHNlbGYucGF0aCwgImV4cGVjdGVkIjogc2VsZi5leHBlY3RlZCwgImFjdHVhbCI6IHNlbGYuYWN0dWFsLCAibWVzc2FnZSI6IHNlbGYubWVzc2FnZX0KZGVmIF90b2xfZm9yX3BhdGgocGF0aDogc3RyLCBiYXNlX2F0b2w6IGZsb2F0LCBiYXNlX3J0b2w6IGZsb2F0LCBvdmVycmlkZXM6IERpY3Rbc3RyLCBEaWN0W3N0ciwgZmxvYXRdXSkgLT4gVHVwbGVbZmxvYXQsIGZsb2F0XToKICAgIGlmIHBhdGggaW4gb3ZlcnJpZGVzOgogICAgICAgIG8gPSBvdmVycmlkZXNbcGF0aF0KICAgICAgICByZXR1cm4gZmxvYXQoby5nZXQoImF0b2wiLCBiYXNlX2F0b2wpKSwgZmxvYXQoby5nZXQoInJ0b2wiLCBiYXNlX3J0b2wpKQogICAgcmV0dXJuIGJhc2VfYXRvbCwgYmFzZV9ydG9sCgoKZGVmIG51bWJlcnNfY2xvc2UoYTogTnVtYmVyLCBiOiBOdW1iZXIsIGF0b2w6IGZsb2F0LCBydG9sOiBmbG9hdCkgLT4gYm9vbDoKICAgICMgTmFOPT1OYU4sIGluZiBtdXN0IG1hdGNoIHNpZ24uCiAgICBpZiBpc2luc3RhbmNlKGEsIGJvb2wpIG9yIGlzaW5zdGFuY2UoYiwgYm9vbCk6CiAgICAgICAgcmV0dXJuIGEgPT0gYgogICAgaWYgaXNpbnN0YW5jZShhLCBmbG9hdCkgYW5kIG1hdGguaXNuYW4oYSk6CiAgICAgICAgcmV0dXJuIGlzaW5zdGFuY2UoYiwgZmxvYXQpIGFuZCBtYXRoLmlzbmFuKGIpCiAgICBpZiBpc2luc3RhbmNlKGIsIGZsb2F0KSBhbmQgbWF0aC5pc25hbihiKToKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGlmIGlzaW5zdGFuY2UoYSwgZmxvYXQpIGFuZCBtYXRoLmlzaW5mKGEpIG9yIGlzaW5zdGFuY2UoYiwgZmxvYXQpIGFuZCBtYXRoLmlzaW5mKGIpOgogICAgICAgIHJldHVybiBhID09IGIKICAgIHJldHVybiBhYnMoYSAtIGIpIDw9IChhdG9sICsgcnRvbCAqIGFicyhiKSkKZGVmIGRpZmZfanNvbigKICAgIGV4cGVjdGVkOiBBbnksCiAgICBhY3R1YWw6IEFueSwKICAgICosCiAgICBhdG9sOiBmbG9hdCA9IDFlLTgsCiAgICBydG9sOiBmbG9hdCA9IDFlLTYsCiAgICBvdmVycmlkZXM6IERpY3Rbc3RyLCBEaWN0W3N0ciwgZmxvYXRdXSB8IE5vbmUgPSBOb25lLAogICAgcGF0aDogc3RyID0gIiIsCikgLT4gTGlzdFtEaWZmXToKICAgIG92ZXJyaWRlcyA9IG92ZXJyaWRlcyBvciB7fQogICAgZGlmZnM6IExpc3RbRGlmZl0gPSBbXQoKICAgIGlmIF9pc19udW1iZXIoZXhwZWN0ZWQpIGFuZCBfaXNfbnVtYmVyKGFjdHVhbCk6CiAgICAgICAgcGFfYXRvbCwgcGFfcnRvbCA9IF90b2xfZm9yX3BhdGgocGF0aCwgYXRvbCwgcnRvbCwgb3ZlcnJpZGVzKQogICAgICAgIGlmIG5vdCBudW1iZXJzX2Nsb3NlKGZsb2F0KGV4cGVjdGVkKSwgZmxvYXQoYWN0dWFsKSwgcGFfYXRvbCwgcGFfcnRvbCk6CiAgICAgICAgICAgIGRpZmZzLmFwcGVuZChEaWZmKHBhdGgsIGV4cGVjdGVkLCBhY3R1YWwsIGYibnVtYmVycyBkaWZmZXIgKGF0b2w9e3BhX2F0b2x9LCBydG9sPXtwYV9ydG9sfSkiKSkKICAgICAgICByZXR1cm4gZGlmZnMKCiAgICBpZiB0eXBlKGV4cGVjdGVkKSAhPSB0eXBlKGFjdHVhbCk6CiAgICAgICAgZGlmZnMuYXBwZW5kKERpZmYocGF0aCwgZXhwZWN0ZWQsIGFjdHVhbCwgZiJ0eXBlIG1pc21hdGNoOiB7dHlwZShleHBlY3RlZCkuX19uYW1lX199IHZzIHt0eXBlKGFjdHVhbCkuX19uYW1lX199IikpCiAgICAgICAgcmV0dXJuIGRpZmZzCgogICAgaWYgaXNpbnN0YW5jZShleHBlY3RlZCwgZGljdCk6CiAgICAgICAgZWtleXMsIGFrZXlzID0gc2V0KGV4cGVjdGVkLmtleXMoKSksIHNldChhY3R1YWwua2V5cygpKSAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGVdCiAgICAgICAgZm9yIGsgaW4gc29ydGVkKGVrZXlzIC0gYWtleXMpOgogICAgICAgICAgICBkaWZmcy5hcHBlbmQoRGlmZihfcGF0aF9qb2luKHBhdGgsIHN0cihrKSksIGV4cGVjdGVkW2tdLCBOb25lLCAibWlzc2luZyBrZXkgaW4gYWN0dWFsIikpICAjIHR5cGU6IGlnbm9yZVtpbmRleF0KICAgICAgICBmb3IgayBpbiBzb3J0ZWQoYWtleXMgLSBla2V5cyk6CiAgICAgICAgICAgIGRpZmZzLmFwcGVuZChEaWZmKF9wYXRoX2pvaW4ocGF0aCwgc3RyKGspKSwgTm9uZSwgYWN0dWFsW2tdLCAiZXh0cmEga2V5IGluIGFjdHVhbCIpKSAgIyB0eXBlOiBpZ25vcmVbaW5kZXhdCiAgICAgICAgZm9yIGsgaW4gc29ydGVkKGVrZXlzICYgYWtleXMpOgogICAgICAgICAgICBkaWZmcy5leHRlbmQoZGlmZl9qc29uKGV4cGVjdGVkW2tdLCBhY3R1YWxba10sIGF0b2w9YXRvbCwgcnRvbD1ydG9sLCBvdmVycmlkZXM9b3ZlcnJpZGVzLCBwYXRoPV9wYXRoX2pvaW4ocGF0aCwgc3RyKGspKSkpICAjIHR5cGU6IGlnbm9yZVtpbmRleF0KICAgICAgICByZXR1cm4gZGlmZnMKCiAgICBpZiBpc2luc3RhbmNlKGV4cGVjdGVkLCBsaXN0KToKICAgICAgICBpZiBsZW4oZXhwZWN0ZWQpICE9IGxlbihhY3R1YWwpOiAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGVdCiAgICAgICAgICAgIGRpZmZzLmFwcGVuZChEaWZmKHBhdGgsIGxlbihleHBlY3RlZCksIGxlbihhY3R1YWwpLCAibGlzdCBsZW5ndGggZGlmZmVycyIpKQogICAgICAgIGZvciBpLCAoZSwgYSkgaW4gZW51bWVyYXRlKHppcChleHBlY3RlZCwgYWN0dWFsKSk6ICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZV0KICAgICAgICAgICAgZGlmZnMuZXh0ZW5kKGRpZmZfanNvbihlLCBhLCBhdG9sPWF0b2wsIHJ0b2w9cnRvbCwgb3ZlcnJpZGVzPW92ZXJyaWRlcywgcGF0aD1fcGF0aF9qb2luKHBhdGgsIGkpKSkKICAgICAgICByZXR1cm4gZGlmZnMKCiAgICBpZiBleHBlY3RlZCAhPSBhY3R1YWw6CiAgICAgICAgZGlmZnMuYXBwZW5kKERpZmYocGF0aCwgZXhwZWN0ZWQsIGFjdHVhbCwgInZhbHVlIGRpZmZlcnMiKSkKICAgIHJldHVybiBkaWZmcwpkZWYgbG9hZF9qc29uKHBhdGg6IFBhdGgpIC0+IEFueToKICAgIHdpdGggcGF0aC5vcGVuKCJyIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgZjoKICAgICAgICByZXR1cm4ganNvbi5sb2FkKGYpCgoKZGVmIHBhcnNlX292ZXJyaWRlcyhyYXc6IHN0ciB8IE5vbmUpIC0+IERpY3Rbc3RyLCBEaWN0W3N0ciwgZmxvYXRdXToKICAgIGlmIG5vdCByYXc6CiAgICAgICAgcmV0dXJuIHt9CiAgICB0cnk6CiAgICAgICAgZGF0YSA9IGpzb24ubG9hZHMocmF3KQogICAgICAgIGlmIGlzaW5zdGFuY2UoZGF0YSwgZGljdCk6CiAgICAgICAgICAgIHJldHVybiB7c3RyKGspOiBkaWN0KHYpIGZvciBrLCB2IGluIGRhdGEuaXRlbXMoKSBpZiBpc2luc3RhbmNlKHYsIGRpY3QpfQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICBwYXNzCiAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIHRvbGVyYW5jZXMgSlNPTjsgZXhwZWN0ZWQgb2JqZWN0IG1hcHBpbmcgcGF0aC0+IHthdG9sLCBydG9sfSIpCgoKZGVmIGNvbXBhcmVfZmlsZXMoCiAgICBhY3R1YWxfcGF0aDogUGF0aCwKICAgIGV4cGVjdGVkX3BhdGg6IFBhdGgsCiAgICAqLAogICAgc2VlZDogaW50ID0gMCwKICAgIGF0b2w6IGZsb2F0ID0gMWUtOCwKICAgIHJ0b2w6IGZsb2F0ID0gMWUtNiwKICAgIG92ZXJyaWRlczogRGljdFtzdHIsIERpY3Rbc3RyLCBmbG9hdF1dIHwgTm9uZSA9IE5vbmUsCiAgICByZXBvcnRfcGF0aDogUGF0aCB8IE5vbmUgPSBOb25lLAopIC0+IGludDoKICAgIGVuZm9yY2VfZGV0ZXJtaW5pc20oc2VlZCkKICAgIHRyeToKICAgICAgICBleHBlY3RlZCA9IGxvYWRfanNvbihleHBlY3RlZF9wYXRoKQogICAgICAgIGFjdHVhbCA9IGxvYWRfanNvbihhY3R1YWxfcGF0aCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBzeXMuc3RkZXJyLndyaXRlKGYiRVJST1I6IGZhaWxlZCB0byBsb2FkIEpTT046IHtlfVxuIikKICAgICAgICByZXR1cm4gMgoKICAgIGRpZmZzID0gZGlmZl9qc29uKGV4cGVjdGVkLCBhY3R1YWwsIGF0b2w9YXRvbCwgcnRvbD1ydG9sLCBvdmVycmlkZXM9b3ZlcnJpZGVzIG9yIHt9KQogICAgcmVwb3J0ID0gewogICAgICAgICJvayI6IG5vdCBkaWZmcywKICAgICAgICAic2VlZCI6IHNlZWQsCiAgICAgICAgImF0b2wiOiBhdG9sLAogICAgICAgICJydG9sIjogcnRvbCwKICAgICAgICAiZXhwZWN0ZWRfcGF0aCI6IHN0cihleHBlY3RlZF9wYXRoKSwKICAgICAgICAiYWN0dWFsX3BhdGgiOiBzdHIoYWN0dWFsX3BhdGgpLAogICAgICAgICJkaWZmX2NvdW50IjogbGVuKGRpZmZzKSwKICAgICAgICAiZGlmZnMiOiBbZC5hc19kaWN0KCkgZm9yIGQgaW4gZGlmZnNbOjIwMF1dLAogICAgICAgICJ0cnVuY2F0ZWQiOiBsZW4oZGlmZnMpID4gMjAwLAogICAgfQogICAgaWYgcmVwb3J0X3BhdGg6CiAgICAgICAgcmVwb3J0X3BhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICByZXBvcnRfcGF0aC53cml0ZV90ZXh0KGNhbm9uaWNhbF9kdW1wcyhyZXBvcnQpLCBlbmNvZGluZz0idXRmLTgiKQoKICAgIGlmIGRpZmZzOgogICAgICAgIHN5cy5zdGRlcnIud3JpdGUoZiJGQUlMOiB7bGVuKGRpZmZzKX0gZGlmZnNcbiIpCiAgICAgICAgc3lzLnN0ZGVyci53cml0ZShjYW5vbmljYWxfZHVtcHMocmVwb3J0IGlmIGxlbihkaWZmcykgPD0gMjAgZWxzZSB7KipyZXBvcnQsICJkaWZmcyI6IHJlcG9ydFsiZGlmZnMiXVs6MjBdLCAidHJ1bmNhdGVkIjogVHJ1ZX0pKQogICAgICAgIHJldHVybiAxCiAgICBzeXMuc3Rkb3V0LndyaXRlKCJQQVNTXG4iKQogICAgcmV0dXJuIDAKZGVmIG1haW4oYXJndjogTGlzdFtzdHJdIHwgTm9uZSA9IE5vbmUpIC0+IGludDoKICAgIGhlcmUgPSBQYXRoKF9fZmlsZV9fKS5yZXNvbHZlKCkKICAgIGRlZmF1bHRfZXhwZWN0ZWQgPSBoZXJlLnBhcmVudHNbMV0gLyAiZXhwZWN0ZWQiIC8gImJlbmNobWFya19jYXNlXzAwMS5leHBlY3RlZC5qc29uIgoKICAgIHAgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcihkZXNjcmlwdGlvbj0iQmVuY2htYXJrIGV4cGVjdGVkLXZzLWFjdHVhbCBKU09OIGNvbXBhcmF0b3Igd2l0aCBkZXRlcm1pbmlzbSArIG51bWVyaWMgdG9sZXJhbmNlcy4iKQogICAgcC5hZGRfYXJndW1lbnQoIi0tYWN0dWFsIiwgdHlwZT1QYXRoLCByZXF1aXJlZD1UcnVlLCBoZWxwPSJQYXRoIHRvIGFjdHVhbCBiZW5jaG1hcmsgSlNPTiBvdXRwdXQuIikKICAgIHAuYWRkX2FyZ3VtZW50KCItLWV4cGVjdGVkIiwgdHlwZT1QYXRoLCBkZWZhdWx0PWRlZmF1bHRfZXhwZWN0ZWQsIGhlbHA9ZiJQYXRoIHRvIGV4cGVjdGVkIEpTT04gKGRlZmF1bHQ6IHtkZWZhdWx0X2V4cGVjdGVkfSkiKQogICAgcC5hZGRfYXJndW1lbnQoIi0tc2VlZCIsIHR5cGU9aW50LCBkZWZhdWx0PWludChvcy5lbnZpcm9uLmdldCgiQkVOQ0hNQVJLX1NFRUQiLCAiMCIpKSkKICAgIHAuYWRkX2FyZ3VtZW50KCItLWF0b2wiLCB0eXBlPWZsb2F0LCBkZWZhdWx0PWZsb2F0KG9zLmVudmlyb24uZ2V0KCJCRU5DSE1BUktfQVRPTCIsICIxZS04IikpKQogICAgcC5hZGRfYXJndW1lbnQoIi0tcnRvbCIsIHR5cGU9ZmxvYXQsIGRlZmF1bHQ9ZmxvYXQob3MuZW52aXJvbi5nZXQoIkJFTkNITUFSS19SVE9MIiwgIjFlLTYiKSkpCiAgICBwLmFkZF9hcmd1bWVudCgiLS10b2xlcmFuY2VzLWpzb24iLCB0eXBlPXN0ciwgZGVmYXVsdD1vcy5lbnZpcm9uLmdldCgiQkVOQ0hNQVJLX1RPTEVSQU5DRVNfSlNPTiIpKQogICAgcC5hZGRfYXJndW1lbnQoIi0tcmVwb3J0IiwgdHlwZT1QYXRoLCBkZWZhdWx0PU5vbmUsIGhlbHA9Ik9wdGlvbmFsIHBhdGggdG8gd3JpdGUgYSBjYW5vbmljYWwgSlNPTiByZXBvcnQgZm9yIENJIGFydGlmYWN0cy4iKQogICAgYXJncyA9IHAucGFyc2VfYXJncyhhcmd2KQoKICAgIG92ZXJyaWRlcyA9IHBhcnNlX292ZXJyaWRlcyhhcmdzLnRvbGVyYW5jZXNfanNvbikKICAgIHJldHVybiBjb21wYXJlX2ZpbGVzKAogICAgICAgIGFyZ3MuYWN0dWFsLAogICAgICAgIGFyZ3MuZXhwZWN0ZWQsCiAgICAgICAgc2VlZD1hcmdzLnNlZWQsCiAgICAgICAgYXRvbD1hcmdzLmF0b2wsCiAgICAgICAgcnRvbD1hcmdzLnJ0b2wsCiAgICAgICAgb3ZlcnJpZGVzPW92ZXJyaWRlcywKICAgICAgICByZXBvcnRfcGF0aD1hcmdzLnJlcG9ydCwKICAgICkKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgcmFpc2UgU3lzdGVtRXhpdChtYWluKCkpCg==\"}\nDIR_STATE:[\"src/benchmark_compare.py\", \"src/determinism.py\", \"src/numeric_tolerance_diff.py\", \"src/stable_json.py\"]\n"
        }
      ]
    },
    {
      "id": "msg_02e7ea6d64dddc6a006949bf43e7708196b323efaaa43f4e49",
      "type": "message",
      "status": "completed",
      "content": [
        {
          "type": "output_text",
          "annotations": [],
          "logprobs": [],
          "text": "FILE_EXPORT:{\"path\":\"src/benchmark_compare.py\",\"size\":7336,\"encoding\":\"base64\",\"sha256\":\"b4ca293ead185504dab0de013c3a73bc7d6a3bd65fb2b80136308b5c14c18b9c\",\"content\":\"IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwpmcm9tIF9fZnV0dXJlX18gaW1wb3J0IGFubm90YXRpb25zCgppbXBvcnQgYXJncGFyc2UKaW1wb3J0IGpzb24KaW1wb3J0IG1hdGgKaW1wb3J0IG9zCmltcG9ydCByYW5kb20KaW1wb3J0IHN5cwpmcm9tIGRhdGFjbGFzc2VzIGltcG9ydCBkYXRhY2xhc3MKZnJvbSBwYXRobGliIGltcG9ydCBQYXRoCmZyb20gdHlwaW5nIGltcG9ydCBBbnksIERpY3QsIEl0ZXJhYmxlLCBMaXN0LCBUdXBsZSwgVW5pb24KCk51bWJlciA9IFVuaW9uW2ludCwgZmxvYXRdCmRlZiBlbmZvcmNlX2RldGVybWluaXNtKHNlZWQ6IGludCkgLT4gTm9uZToKICAgICMgQmVzdC1lZmZvcnQgZGV0ZXJtaW5pc20gZm9yIGJlbmNobWFyayBydW5zIGFuZCBjb21wYXJpc29ucy4KICAgIHJhbmRvbS5zZWVkKHNlZWQpCiAgICBvcy5lbnZpcm9uLnNldGRlZmF1bHQoIlBZVEhPTkhBU0hTRUVEIiwgc3RyKHNlZWQpKQogICAgdHJ5OgogICAgICAgIGltcG9ydCBudW1weSBhcyBucCAgIyB0eXBlOiBpZ25vcmUKICAgICAgICBucC5yYW5kb20uc2VlZChzZWVkKQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICBwYXNzCmRlZiBjYW5vbmljYWxfZHVtcHMob2JqOiBBbnkpIC0+IHN0cjoKICAgICMgU3RhYmxlIEpTT04gZm9yIENJIGxvZ3MvYXJ0aWZhY3RzIChrZXkgb3JkZXJpbmcsIG5vcm1hbGl6ZWQgd2hpdGVzcGFjZSkuCiAgICByZXR1cm4ganNvbi5kdW1wcyhvYmosIHNvcnRfa2V5cz1UcnVlLCBlbnN1cmVfYXNjaWk9RmFsc2UsIGluZGVudD0yKSArICJcbiIKCgpkZWYgX2lzX251bWJlcih4OiBBbnkpIC0+IGJvb2w6CiAgICByZXR1cm4gaXNpbnN0YW5jZSh4LCAoaW50LCBmbG9hdCkpIGFuZCBub3QgaXNpbnN0YW5jZSh4LCBib29sKQoKCmRlZiBfcGF0aF9qb2luKGJhc2U6IHN0ciwga2V5OiBVbmlvbltzdHIsIGludF0pIC0+IHN0cjoKICAgIGlmIGlzaW5zdGFuY2Uoa2V5LCBpbnQpOgogICAgICAgIHJldHVybiBmIntiYXNlfVt7a2V5fV0iCiAgICAjIEpTT04tcG9pbnRlci1pc2ggYnV0IGh1bWFuIGZyaWVuZGx5LgogICAgcmV0dXJuIGYie2Jhc2V9LntrZXl9IiBpZiBiYXNlIGVsc2Ugc3RyKGtleSkKQGRhdGFjbGFzcwpjbGFzcyBEaWZmOgogICAgcGF0aDogc3RyCiAgICBleHBlY3RlZDogQW55CiAgICBhY3R1YWw6IEFueQogICAgbWVzc2FnZTogc3RyCgogICAgZGVmIGFzX2RpY3Qoc2VsZikgLT4gRGljdFtzdHIsIEFueV06CiAgICAgICAgcmV0dXJuIHsicGF0aCI6IHNlbGYucGF0aCwgImV4cGVjdGVkIjogc2VsZi5leHBlY3RlZCwgImFjdHVhbCI6IHNlbGYuYWN0dWFsLCAibWVzc2FnZSI6IHNlbGYubWVzc2FnZX0KZGVmIF90b2xfZm9yX3BhdGgocGF0aDogc3RyLCBiYXNlX2F0b2w6IGZsb2F0LCBiYXNlX3J0b2w6IGZsb2F0LCBvdmVycmlkZXM6IERpY3Rbc3RyLCBEaWN0W3N0ciwgZmxvYXRdXSkgLT4gVHVwbGVbZmxvYXQsIGZsb2F0XToKICAgIGlmIHBhdGggaW4gb3ZlcnJpZGVzOgogICAgICAgIG8gPSBvdmVycmlkZXNbcGF0aF0KICAgICAgICByZXR1cm4gZmxvYXQoby5nZXQoImF0b2wiLCBiYXNlX2F0b2wpKSwgZmxvYXQoby5nZXQoInJ0b2wiLCBiYXNlX3J0b2wpKQogICAgcmV0dXJuIGJhc2VfYXRvbCwgYmFzZV9ydG9sCgoKZGVmIG51bWJlcnNfY2xvc2UoYTogTnVtYmVyLCBiOiBOdW1iZXIsIGF0b2w6IGZsb2F0LCBydG9sOiBmbG9hdCkgLT4gYm9vbDoKICAgICMgTmFOPT1OYU4sIGluZiBtdXN0IG1hdGNoIHNpZ24uCiAgICBpZiBpc2luc3RhbmNlKGEsIGJvb2wpIG9yIGlzaW5zdGFuY2UoYiwgYm9vbCk6CiAgICAgICAgcmV0dXJuIGEgPT0gYgogICAgaWYgaXNpbnN0YW5jZShhLCBmbG9hdCkgYW5kIG1hdGguaXNuYW4oYSk6CiAgICAgICAgcmV0dXJuIGlzaW5zdGFuY2UoYiwgZmxvYXQpIGFuZCBtYXRoLmlzbmFuKGIpCiAgICBpZiBpc2luc3RhbmNlKGIsIGZsb2F0KSBhbmQgbWF0aC5pc25hbihiKToKICAgICAgICByZXR1cm4gRmFsc2UKICAgIGlmIGlzaW5zdGFuY2UoYSwgZmxvYXQpIGFuZCBtYXRoLmlzaW5mKGEpIG9yIGlzaW5zdGFuY2UoYiwgZmxvYXQpIGFuZCBtYXRoLmlzaW5mKGIpOgogICAgICAgIHJldHVybiBhID09IGIKICAgIHJldHVybiBhYnMoYSAtIGIpIDw9IChhdG9sICsgcnRvbCAqIGFicyhiKSkKZGVmIGRpZmZfanNvbigKICAgIGV4cGVjdGVkOiBBbnksCiAgICBhY3R1YWw6IEFueSwKICAgICosCiAgICBhdG9sOiBmbG9hdCA9IDFlLTgsCiAgICBydG9sOiBmbG9hdCA9IDFlLTYsCiAgICBvdmVycmlkZXM6IERpY3Rbc3RyLCBEaWN0W3N0ciwgZmxvYXRdXSB8IE5vbmUgPSBOb25lLAogICAgcGF0aDogc3RyID0gIiIsCikgLT4gTGlzdFtEaWZmXToKICAgIG92ZXJyaWRlcyA9IG92ZXJyaWRlcyBvciB7fQogICAgZGlmZnM6IExpc3RbRGlmZl0gPSBbXQoKICAgIGlmIF9pc19udW1iZXIoZXhwZWN0ZWQpIGFuZCBfaXNfbnVtYmVyKGFjdHVhbCk6CiAgICAgICAgcGFfYXRvbCwgcGFfcnRvbCA9IF90b2xfZm9yX3BhdGgocGF0aCwgYXRvbCwgcnRvbCwgb3ZlcnJpZGVzKQogICAgICAgIGlmIG5vdCBudW1iZXJzX2Nsb3NlKGZsb2F0KGV4cGVjdGVkKSwgZmxvYXQoYWN0dWFsKSwgcGFfYXRvbCwgcGFfcnRvbCk6CiAgICAgICAgICAgIGRpZmZzLmFwcGVuZChEaWZmKHBhdGgsIGV4cGVjdGVkLCBhY3R1YWwsIGYibnVtYmVycyBkaWZmZXIgKGF0b2w9e3BhX2F0b2x9LCBydG9sPXtwYV9ydG9sfSkiKSkKICAgICAgICByZXR1cm4gZGlmZnMKCiAgICBpZiB0eXBlKGV4cGVjdGVkKSAhPSB0eXBlKGFjdHVhbCk6CiAgICAgICAgZGlmZnMuYXBwZW5kKERpZmYocGF0aCwgZXhwZWN0ZWQsIGFjdHVhbCwgZiJ0eXBlIG1pc21hdGNoOiB7dHlwZShleHBlY3RlZCkuX19uYW1lX199IHZzIHt0eXBlKGFjdHVhbCkuX19uYW1lX199IikpCiAgICAgICAgcmV0dXJuIGRpZmZzCgogICAgaWYgaXNpbnN0YW5jZShleHBlY3RlZCwgZGljdCk6CiAgICAgICAgZWtleXMsIGFrZXlzID0gc2V0KGV4cGVjdGVkLmtleXMoKSksIHNldChhY3R1YWwua2V5cygpKSAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGVdCiAgICAgICAgZm9yIGsgaW4gc29ydGVkKGVrZXlzIC0gYWtleXMpOgogICAgICAgICAgICBkaWZmcy5hcHBlbmQoRGlmZihfcGF0aF9qb2luKHBhdGgsIHN0cihrKSksIGV4cGVjdGVkW2tdLCBOb25lLCAibWlzc2luZyBrZXkgaW4gYWN0dWFsIikpICAjIHR5cGU6IGlnbm9yZVtpbmRleF0KICAgICAgICBmb3IgayBpbiBzb3J0ZWQoYWtleXMgLSBla2V5cyk6CiAgICAgICAgICAgIGRpZmZzLmFwcGVuZChEaWZmKF9wYXRoX2pvaW4ocGF0aCwgc3RyKGspKSwgTm9uZSwgYWN0dWFsW2tdLCAiZXh0cmEga2V5IGluIGFjdHVhbCIpKSAgIyB0eXBlOiBpZ25vcmVbaW5kZXhdCiAgICAgICAgZm9yIGsgaW4gc29ydGVkKGVrZXlzICYgYWtleXMpOgogICAgICAgICAgICBkaWZmcy5leHRlbmQoZGlmZl9qc29uKGV4cGVjdGVkW2tdLCBhY3R1YWxba10sIGF0b2w9YXRvbCwgcnRvbD1ydG9sLCBvdmVycmlkZXM9b3ZlcnJpZGVzLCBwYXRoPV9wYXRoX2pvaW4ocGF0aCwgc3RyKGspKSkpICAjIHR5cGU6IGlnbm9yZVtpbmRleF0KICAgICAgICByZXR1cm4gZGlmZnMKCiAgICBpZiBpc2luc3RhbmNlKGV4cGVjdGVkLCBsaXN0KToKICAgICAgICBpZiBsZW4oZXhwZWN0ZWQpICE9IGxlbihhY3R1YWwpOiAgIyB0eXBlOiBpZ25vcmVbYXJnLXR5cGVdCiAgICAgICAgICAgIGRpZmZzLmFwcGVuZChEaWZmKHBhdGgsIGxlbihleHBlY3RlZCksIGxlbihhY3R1YWwpLCAibGlzdCBsZW5ndGggZGlmZmVycyIpKQogICAgICAgIGZvciBpLCAoZSwgYSkgaW4gZW51bWVyYXRlKHppcChleHBlY3RlZCwgYWN0dWFsKSk6ICAjIHR5cGU6IGlnbm9yZVthcmctdHlwZV0KICAgICAgICAgICAgZGlmZnMuZXh0ZW5kKGRpZmZfanNvbihlLCBhLCBhdG9sPWF0b2wsIHJ0b2w9cnRvbCwgb3ZlcnJpZGVzPW92ZXJyaWRlcywgcGF0aD1fcGF0aF9qb2luKHBhdGgsIGkpKSkKICAgICAgICByZXR1cm4gZGlmZnMKCiAgICBpZiBleHBlY3RlZCAhPSBhY3R1YWw6CiAgICAgICAgZGlmZnMuYXBwZW5kKERpZmYocGF0aCwgZXhwZWN0ZWQsIGFjdHVhbCwgInZhbHVlIGRpZmZlcnMiKSkKICAgIHJldHVybiBkaWZmcwpkZWYgbG9hZF9qc29uKHBhdGg6IFBhdGgpIC0+IEFueToKICAgIHdpdGggcGF0aC5vcGVuKCJyIiwgZW5jb2Rpbmc9InV0Zi04IikgYXMgZjoKICAgICAgICByZXR1cm4ganNvbi5sb2FkKGYpCgoKZGVmIHBhcnNlX292ZXJyaWRlcyhyYXc6IHN0ciB8IE5vbmUpIC0+IERpY3Rbc3RyLCBEaWN0W3N0ciwgZmxvYXRdXToKICAgIGlmIG5vdCByYXc6CiAgICAgICAgcmV0dXJuIHt9CiAgICB0cnk6CiAgICAgICAgZGF0YSA9IGpzb24ubG9hZHMocmF3KQogICAgICAgIGlmIGlzaW5zdGFuY2UoZGF0YSwgZGljdCk6CiAgICAgICAgICAgIHJldHVybiB7c3RyKGspOiBkaWN0KHYpIGZvciBrLCB2IGluIGRhdGEuaXRlbXMoKSBpZiBpc2luc3RhbmNlKHYsIGRpY3QpfQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICBwYXNzCiAgICByYWlzZSBWYWx1ZUVycm9yKCJJbnZhbGlkIHRvbGVyYW5jZXMgSlNPTjsgZXhwZWN0ZWQgb2JqZWN0IG1hcHBpbmcgcGF0aC0+IHthdG9sLCBydG9sfSIpCgoKZGVmIGNvbXBhcmVfZmlsZXMoCiAgICBhY3R1YWxfcGF0aDogUGF0aCwKICAgIGV4cGVjdGVkX3BhdGg6IFBhdGgsCiAgICAqLAogICAgc2VlZDogaW50ID0gMCwKICAgIGF0b2w6IGZsb2F0ID0gMWUtOCwKICAgIHJ0b2w6IGZsb2F0ID0gMWUtNiwKICAgIG92ZXJyaWRlczogRGljdFtzdHIsIERpY3Rbc3RyLCBmbG9hdF1dIHwgTm9uZSA9IE5vbmUsCiAgICByZXBvcnRfcGF0aDogUGF0aCB8IE5vbmUgPSBOb25lLAopIC0+IGludDoKICAgIGVuZm9yY2VfZGV0ZXJtaW5pc20oc2VlZCkKICAgIHRyeToKICAgICAgICBleHBlY3RlZCA9IGxvYWRfanNvbihleHBlY3RlZF9wYXRoKQogICAgICAgIGFjdHVhbCA9IGxvYWRfanNvbihhY3R1YWxfcGF0aCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBzeXMuc3RkZXJyLndyaXRlKGYiRVJST1I6IGZhaWxlZCB0byBsb2FkIEpTT046IHtlfVxuIikKICAgICAgICByZXR1cm4gMgoKICAgIGRpZmZzID0gZGlmZl9qc29uKGV4cGVjdGVkLCBhY3R1YWwsIGF0b2w9YXRvbCwgcnRvbD1ydG9sLCBvdmVycmlkZXM9b3ZlcnJpZGVzIG9yIHt9KQogICAgcmVwb3J0ID0gewogICAgICAgICJvayI6IG5vdCBkaWZmcywKICAgICAgICAic2VlZCI6IHNlZWQsCiAgICAgICAgImF0b2wiOiBhdG9sLAogICAgICAgICJydG9sIjogcnRvbCwKICAgICAgICAiZXhwZWN0ZWRfcGF0aCI6IHN0cihleHBlY3RlZF9wYXRoKSwKICAgICAgICAiYWN0dWFsX3BhdGgiOiBzdHIoYWN0dWFsX3BhdGgpLAogICAgICAgICJkaWZmX2NvdW50IjogbGVuKGRpZmZzKSwKICAgICAgICAiZGlmZnMiOiBbZC5hc19kaWN0KCkgZm9yIGQgaW4gZGlmZnNbOjIwMF1dLAogICAgICAgICJ0cnVuY2F0ZWQiOiBsZW4oZGlmZnMpID4gMjAwLAogICAgfQogICAgaWYgcmVwb3J0X3BhdGg6CiAgICAgICAgcmVwb3J0X3BhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICByZXBvcnRfcGF0aC53cml0ZV90ZXh0KGNhbm9uaWNhbF9kdW1wcyhyZXBvcnQpLCBlbmNvZGluZz0idXRmLTgiKQoKICAgIGlmIGRpZmZzOgogICAgICAgIHN5cy5zdGRlcnIud3JpdGUoZiJGQUlMOiB7bGVuKGRpZmZzKX0gZGlmZnNcbiIpCiAgICAgICAgc3lzLnN0ZGVyci53cml0ZShjYW5vbmljYWxfZHVtcHMocmVwb3J0IGlmIGxlbihkaWZmcykgPD0gMjAgZWxzZSB7KipyZXBvcnQsICJkaWZmcyI6IHJlcG9ydFsiZGlmZnMiXVs6MjBdLCAidHJ1bmNhdGVkIjogVHJ1ZX0pKQogICAgICAgIHJldHVybiAxCiAgICBzeXMuc3Rkb3V0LndyaXRlKCJQQVNTXG4iKQogICAgcmV0dXJuIDAKZGVmIG1haW4oYXJndjogTGlzdFtzdHJdIHwgTm9uZSA9IE5vbmUpIC0+IGludDoKICAgIGhlcmUgPSBQYXRoKF9fZmlsZV9fKS5yZXNvbHZlKCkKICAgIGRlZmF1bHRfZXhwZWN0ZWQgPSBoZXJlLnBhcmVudHNbMV0gLyAiZXhwZWN0ZWQiIC8gImJlbmNobWFya19jYXNlXzAwMS5leHBlY3RlZC5qc29uIgoKICAgIHAgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcihkZXNjcmlwdGlvbj0iQmVuY2htYXJrIGV4cGVjdGVkLXZzLWFjdHVhbCBKU09OIGNvbXBhcmF0b3Igd2l0aCBkZXRlcm1pbmlzbSArIG51bWVyaWMgdG9sZXJhbmNlcy4iKQogICAgcC5hZGRfYXJndW1lbnQoIi0tYWN0dWFsIiwgdHlwZT1QYXRoLCByZXF1aXJlZD1UcnVlLCBoZWxwPSJQYXRoIHRvIGFjdHVhbCBiZW5jaG1hcmsgSlNPTiBvdXRwdXQuIikKICAgIHAuYWRkX2FyZ3VtZW50KCItLWV4cGVjdGVkIiwgdHlwZT1QYXRoLCBkZWZhdWx0PWRlZmF1bHRfZXhwZWN0ZWQsIGhlbHA9ZiJQYXRoIHRvIGV4cGVjdGVkIEpTT04gKGRlZmF1bHQ6IHtkZWZhdWx0X2V4cGVjdGVkfSkiKQogICAgcC5hZGRfYXJndW1lbnQoIi0tc2VlZCIsIHR5cGU9aW50LCBkZWZhdWx0PWludChvcy5lbnZpcm9uLmdldCgiQkVOQ0hNQVJLX1NFRUQiLCAiMCIpKSkKICAgIHAuYWRkX2FyZ3VtZW50KCItLWF0b2wiLCB0eXBlPWZsb2F0LCBkZWZhdWx0PWZsb2F0KG9zLmVudmlyb24uZ2V0KCJCRU5DSE1BUktfQVRPTCIsICIxZS04IikpKQogICAgcC5hZGRfYXJndW1lbnQoIi0tcnRvbCIsIHR5cGU9ZmxvYXQsIGRlZmF1bHQ9ZmxvYXQob3MuZW52aXJvbi5nZXQoIkJFTkNITUFSS19SVE9MIiwgIjFlLTYiKSkpCiAgICBwLmFkZF9hcmd1bWVudCgiLS10b2xlcmFuY2VzLWpzb24iLCB0eXBlPXN0ciwgZGVmYXVsdD1vcy5lbnZpcm9uLmdldCgiQkVOQ0hNQVJLX1RPTEVSQU5DRVNfSlNPTiIpKQogICAgcC5hZGRfYXJndW1lbnQoIi0tcmVwb3J0IiwgdHlwZT1QYXRoLCBkZWZhdWx0PU5vbmUsIGhlbHA9Ik9wdGlvbmFsIHBhdGggdG8gd3JpdGUgYSBjYW5vbmljYWwgSlNPTiByZXBvcnQgZm9yIENJIGFydGlmYWN0cy4iKQogICAgYXJncyA9IHAucGFyc2VfYXJncyhhcmd2KQoKICAgIG92ZXJyaWRlcyA9IHBhcnNlX292ZXJyaWRlcyhhcmdzLnRvbGVyYW5jZXNfanNvbikKICAgIHJldHVybiBjb21wYXJlX2ZpbGVzKAogICAgICAgIGFyZ3MuYWN0dWFsLAogICAgICAgIGFyZ3MuZXhwZWN0ZWQsCiAgICAgICAgc2VlZD1hcmdzLnNlZWQsCiAgICAgICAgYXRvbD1hcmdzLmF0b2wsCiAgICAgICAgcnRvbD1hcmdzLnJ0b2wsCiAgICAgICAgb3ZlcnJpZGVzPW92ZXJyaWRlcywKICAgICAgICByZXBvcnRfcGF0aD1hcmdzLnJlcG9ydCwKICAgICkKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgcmFpc2UgU3lzdGVtRXhpdChtYWluKCkpCg==\"}\nDIR_STATE:[\"src/benchmark_compare.py\",\"src/determinism.py\",\"src/numeric_tolerance_diff.py\",\"src/stable_json.py\"]"
        }
      ],
      "role": "assistant"
    }
  ],
  "codeResults": []
}