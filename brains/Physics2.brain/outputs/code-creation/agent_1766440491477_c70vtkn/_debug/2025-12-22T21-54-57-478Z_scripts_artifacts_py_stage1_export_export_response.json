{
  "content": "FILE_EXPORT:{\"path\":\"scripts/artifacts.py\",\"size\":6324,\"encoding\":\"base64\",\"sha256\":\"14c66d87a3f746973e1b3897e6633a958042b390f2222a663545fc307d67f368\",\"content\":\"IiIiQXJ0aWZhY3QgdXRpbGl0aWVzOiByZWRhY3Qgc2VjcmV0cywgYnVpbGQgZGV0ZXJtaW5pc3RpYyBtYW5pZmVzdHMsIGFuZCBwYWNrYWdlIGxvZ3MvcmVzdWx0cy4KCkRlc2lnbmVkIGZvciBDSTogY3JlYXRlIGEgc3RhZ2luZyB0cmVlIHdpdGggcmVkYWN0aW9uIGFwcGxpZWQsIGVtaXQgYSBzdGFibGUgbWFuaWZlc3QsCmFuZCBwYWNrYWdlIGludG8gLnRhci5neiBvciAuemlwIHdpdGggbm9ybWFsaXplZCBtZXRhZGF0YSBmb3IgcmVwcm9kdWNpYmxlIHVwbG9hZHMuCiIiIgoKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aAppbXBvcnQgZm5tYXRjaAppbXBvcnQgaGFzaGxpYgppbXBvcnQganNvbgppbXBvcnQgb3MKaW1wb3J0IHJlCmltcG9ydCBzaHV0aWwKaW1wb3J0IHN0YXQKaW1wb3J0IHRhcmZpbGUKaW1wb3J0IHppcGZpbGUKZnJvbSB0eXBpbmcgaW1wb3J0IEl0ZXJhYmxlLCBJdGVyYXRvciwgTGlzdCwgT3B0aW9uYWwsIFNlcXVlbmNlLCBUdXBsZQojIFJlZ2V4ZXMgdHVuZWQgdG8gY2F0Y2ggY29tbW9uIENJIHNlY3JldHMgd2l0aG91dCBiZWluZyBvdmVybHkgZXhwZW5zaXZlLgpfU0VDUkVUX1BBVFRFUk5TOiBMaXN0W1R1cGxlW3JlLlBhdHRlcm4sIHN0cl1dID0gWwogICAgKHJlLmNvbXBpbGUociIoP2kpXGJnaHBfW0EtWmEtejAtOV17MjAsfVxiIiksICJSRURBQ1RFRF9HSF9UT0tFTiIpLAogICAgKHJlLmNvbXBpbGUociIoP2kpXGJnaXRodWJfcGF0X1tBLVphLXowLTlfXXsyMCx9XGIiKSwgIlJFREFDVEVEX0dIX1BBVCIpLAogICAgKHJlLmNvbXBpbGUociJcYkFLSUFbMC05QS1aXXsxNn1cYiIpLCAiUkVEQUNURURfQVdTX0FDQ0VTU19LRVlfSUQiKSwKICAgIChyZS5jb21waWxlKHIiKD9pcyktLS0tLUJFR0lOICg/OlJTQSApP1BSSVZBVEUgS0VZLS0tLS0uKj8tLS0tLUVORCAoPzpSU0EgKT9QUklWQVRFIEtFWS0tLS0tIiksCiAgICAgIlJFREFDVEVEX1BSSVZBVEVfS0VZX0JMT0NLIiksCiAgICAocmUuY29tcGlsZShyIig/aW0pXihccyooPzpcdytfKT8oPzp0b2tlbnxzZWNyZXR8cGFzc3dvcmR8cGFzc3dkfGFwaVtfLV0/a2V5KVxzKj1ccyopLiskIiksCiAgICAgciJcMVJFREFDVEVEIiksCl0KX1RFWFRfRVhUUyA9IHsiLmxvZyIsICIudHh0IiwgIi5qc29uIiwgIi55bWwiLCAiLnlhbWwiLCAiLmVudiIsICIuaW5pIiwgIi5jZmciLCAiLm1kIn0KZGVmIHJlZGFjdF90ZXh0KHRleHQ6IHN0cikgLT4gc3RyOgogICAgZm9yIHJ4LCByZXBsIGluIF9TRUNSRVRfUEFUVEVSTlM6CiAgICAgICAgdGV4dCA9IHJ4LnN1YihyZXBsLCB0ZXh0KQogICAgcmV0dXJuIHRleHQKCgpkZWYgcmVkYWN0X2J5dGVzKGRhdGE6IGJ5dGVzKSAtPiBieXRlczoKICAgIHRyeToKICAgICAgICBzID0gZGF0YS5kZWNvZGUoInV0Zi04IikKICAgIGV4Y2VwdCBVbmljb2RlRGVjb2RlRXJyb3I6CiAgICAgICAgcyA9IGRhdGEuZGVjb2RlKCJ1dGYtOCIsIGVycm9ycz0iaWdub3JlIikKICAgIHJldHVybiByZWRhY3RfdGV4dChzKS5lbmNvZGUoInV0Zi04IikKCgpkZWYgc2hhMjU2X2ZpbGUocGF0aDogUGF0aCkgLT4gc3RyOgogICAgaCA9IGhhc2hsaWIuc2hhMjU2KCkKICAgIHdpdGggcGF0aC5vcGVuKCJyYiIpIGFzIGY6CiAgICAgICAgZm9yIGNodW5rIGluIGl0ZXIobGFtYmRhOiBmLnJlYWQoMTAyNCAqIDEwMjQpLCBiIiIpOgogICAgICAgICAgICBoLnVwZGF0ZShjaHVuaykKICAgIHJldHVybiBoLmhleGRpZ2VzdCgpCmRlZiBfcmVsX3Bvc2l4KHBhdGg6IFBhdGgsIHJvb3Q6IFBhdGgpIC0+IHN0cjoKICAgIHJldHVybiBwYXRoLnJlbGF0aXZlX3RvKHJvb3QpLmFzX3Bvc2l4KCkKCgpkZWYgaXRlcl9maWxlcygKICAgIHJvb3Q6IFBhdGgsCiAgICBpbmNsdWRlczogU2VxdWVuY2Vbc3RyXSA9ICgiKiovKiIsKSwKICAgIGV4Y2x1ZGVzOiBTZXF1ZW5jZVtzdHJdID0gKCksCikgLT4gSXRlcmF0b3JbUGF0aF06CiAgICByb290ID0gcm9vdC5yZXNvbHZlKCkKICAgIGZvciBwIGluIHNvcnRlZChyb290LnJnbG9iKCIqIikpOgogICAgICAgIGlmIG5vdCBwLmlzX2ZpbGUoKToKICAgICAgICAgICAgY29udGludWUKICAgICAgICByZWwgPSBfcmVsX3Bvc2l4KHAsIHJvb3QpCiAgICAgICAgaWYgaW5jbHVkZXMgYW5kIG5vdCBhbnkoZm5tYXRjaC5mbm1hdGNoKHJlbCwgcGF0KSBmb3IgcGF0IGluIGluY2x1ZGVzKToKICAgICAgICAgICAgY29udGludWUKICAgICAgICBpZiBleGNsdWRlcyBhbmQgYW55KGZubWF0Y2guZm5tYXRjaChyZWwsIHBhdCkgZm9yIHBhdCBpbiBleGNsdWRlcyk6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgeWllbGQgcApAZGF0YWNsYXNzKGZyb3plbj1UcnVlKQpjbGFzcyBNYW5pZmVzdEVudHJ5OgogICAgcGF0aDogc3RyCiAgICBzaXplOiBpbnQKICAgIHNoYTI1Njogc3RyCgoKZGVmIGJ1aWxkX21hbmlmZXN0KHJvb3Q6IFBhdGgsIGZpbGVzOiBJdGVyYWJsZVtQYXRoXSkgLT4gTGlzdFtNYW5pZmVzdEVudHJ5XToKICAgIHJvb3QgPSByb290LnJlc29sdmUoKQogICAgZW50cmllczogTGlzdFtNYW5pZmVzdEVudHJ5XSA9IFtdCiAgICBmb3IgcCBpbiBmaWxlczoKICAgICAgICBlbnRyaWVzLmFwcGVuZChNYW5pZmVzdEVudHJ5KF9yZWxfcG9zaXgocCwgcm9vdCksIHAuc3RhdCgpLnN0X3NpemUsIHNoYTI1Nl9maWxlKHApKSkKICAgIGVudHJpZXMuc29ydChrZXk9bGFtYmRhIGU6IGUucGF0aCkKICAgIHJldHVybiBlbnRyaWVzCgoKZGVmIHdyaXRlX21hbmlmZXN0KHBhdGg6IFBhdGgsIGVudHJpZXM6IFNlcXVlbmNlW01hbmlmZXN0RW50cnldKSAtPiBOb25lOgogICAgcGF5bG9hZCA9IHsKICAgICAgICAidmVyc2lvbiI6IDEsCiAgICAgICAgImVudHJpZXMiOiBbZS5fX2RpY3RfXyBmb3IgZSBpbiBlbnRyaWVzXSwKICAgIH0KICAgIHBhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHBhdGgud3JpdGVfdGV4dChqc29uLmR1bXBzKHBheWxvYWQsIHNvcnRfa2V5cz1UcnVlLCBpbmRlbnQ9MikgKyAiXG4iLCBlbmNvZGluZz0idXRmLTgiKQpkZWYgc3RhZ2VfdHJlZSgKICAgIHNyY19yb290OiBQYXRoLAogICAgZHN0X3Jvb3Q6IFBhdGgsCiAgICBpbmNsdWRlczogU2VxdWVuY2Vbc3RyXSA9ICgiKiovKiIsKSwKICAgIGV4Y2x1ZGVzOiBTZXF1ZW5jZVtzdHJdID0gKCksCikgLT4gTGlzdFtQYXRoXToKICAgICIiIkNvcHkgc3JjX3Jvb3QgLT4gZHN0X3Jvb3QgYXBwbHlpbmcgcmVkYWN0aW9uIHRvIGxpa2VseS10ZXh0IGZpbGVzLgoKICAgIFJldHVybnMgYSBsaXN0IG9mIHN0YWdlZCBmaWxlIHBhdGhzIChpbiBkc3Rfcm9vdCksIGRldGVybWluaXN0aWNhbGx5IG9yZGVyZWQuCiAgICAiIiIKICAgIHNyY19yb290ID0gc3JjX3Jvb3QucmVzb2x2ZSgpCiAgICBkc3Rfcm9vdCA9IGRzdF9yb290LnJlc29sdmUoKQogICAgaWYgZHN0X3Jvb3QuZXhpc3RzKCk6CiAgICAgICAgc2h1dGlsLnJtdHJlZShkc3Rfcm9vdCkKICAgIGRzdF9yb290Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKCiAgICBzdGFnZWQ6IExpc3RbUGF0aF0gPSBbXQogICAgZm9yIHNyYyBpbiBpdGVyX2ZpbGVzKHNyY19yb290LCBpbmNsdWRlcz1pbmNsdWRlcywgZXhjbHVkZXM9ZXhjbHVkZXMpOgogICAgICAgIHJlbCA9IHNyYy5yZWxhdGl2ZV90byhzcmNfcm9vdCkKICAgICAgICBkc3QgPSBkc3Rfcm9vdCAvIHJlbAogICAgICAgIGRzdC5wYXJlbnQubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQogICAgICAgIGlmIHNyYy5zdWZmaXgubG93ZXIoKSBpbiBfVEVYVF9FWFRTOgogICAgICAgICAgICBkc3Qud3JpdGVfYnl0ZXMocmVkYWN0X2J5dGVzKHNyYy5yZWFkX2J5dGVzKCkpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNodXRpbC5jb3B5MihzcmMsIGRzdCkKICAgICAgICBvcy51dGltZShkc3QsICgwLCAwKSkgICMgbm9ybWFsaXplIG10aW1lcyBmb3IgcmVwcm9kdWNpYmxlIGFyY2hpdmVzCiAgICAgICAgc3RhZ2VkLmFwcGVuZChkc3QpCiAgICBzdGFnZWQuc29ydChrZXk9bGFtYmRhIHA6IHAucmVsYXRpdmVfdG8oZHN0X3Jvb3QpLmFzX3Bvc2l4KCkpCiAgICByZXR1cm4gc3RhZ2VkCmRlZiBjcmVhdGVfdGFyX2d6KHN0YWdlZF9yb290OiBQYXRoLCBvdXRfcGF0aDogUGF0aCkgLT4gUGF0aDoKICAgIHN0YWdlZF9yb290ID0gc3RhZ2VkX3Jvb3QucmVzb2x2ZSgpCiAgICBvdXRfcGF0aC5wYXJlbnQubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQoKICAgIGRlZiBfZmlsdGVyKHRpOiB0YXJmaWxlLlRhckluZm8pIC0+IHRhcmZpbGUuVGFySW5mbzoKICAgICAgICB0aS51aWQgPSB0aS5naWQgPSAwCiAgICAgICAgdGkudW5hbWUgPSB0aS5nbmFtZSA9ICIiCiAgICAgICAgdGkubXRpbWUgPSAwCiAgICAgICAgaWYgdGkubW9kZToKICAgICAgICAgICAgdGkubW9kZSA9IDBvNjQ0IGlmIHRpLmlzZmlsZSgpIGVsc2UgMG83NTUKICAgICAgICByZXR1cm4gdGkKCiAgICB3aXRoIHRhcmZpbGUub3BlbihvdXRfcGF0aCwgInc6Z3oiKSBhcyB0ZjoKICAgICAgICB0Zi5hZGQoc3RhZ2VkX3Jvb3QsIGFyY25hbWU9Ii4iLCBmaWx0ZXI9X2ZpbHRlcikKICAgIHJldHVybiBvdXRfcGF0aAoKCmRlZiBjcmVhdGVfemlwKHN0YWdlZF9yb290OiBQYXRoLCBvdXRfcGF0aDogUGF0aCkgLT4gUGF0aDoKICAgIHN0YWdlZF9yb290ID0gc3RhZ2VkX3Jvb3QucmVzb2x2ZSgpCiAgICBvdXRfcGF0aC5wYXJlbnQubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQogICAgZXBvY2ggPSAoMTk4MCwgMSwgMSwgMCwgMCwgMCkKCiAgICB3aXRoIHppcGZpbGUuWmlwRmlsZShvdXRfcGF0aCwgInciLCBjb21wcmVzc2lvbj16aXBmaWxlLlpJUF9ERUZMQVRFRCkgYXMgemY6CiAgICAgICAgZm9yIHAgaW4gaXRlcl9maWxlcyhzdGFnZWRfcm9vdCk6CiAgICAgICAgICAgIHJlbCA9IF9yZWxfcG9zaXgocCwgc3RhZ2VkX3Jvb3QpCiAgICAgICAgICAgIHppID0gemlwZmlsZS5aaXBJbmZvKHJlbCwgZGF0ZV90aW1lPWVwb2NoKQogICAgICAgICAgICBtb2RlID0gMG82NDQKICAgICAgICAgICAgemkuZXh0ZXJuYWxfYXR0ciA9IChtb2RlICYgMHhGRkZGKSA8PCAxNgogICAgICAgICAgICB6Zi53cml0ZXN0cih6aSwgcC5yZWFkX2J5dGVzKCkpCiAgICByZXR1cm4gb3V0X3BhdGgKZGVmIHByZXBhcmVfYXJ0aWZhY3RzKAogICAgc3JjX3Jvb3Q6IFBhdGgsCiAgICB3b3JrX2RpcjogUGF0aCwKICAgICosCiAgICBpbmNsdWRlczogU2VxdWVuY2Vbc3RyXSA9ICgiKiovKiIsKSwKICAgIGV4Y2x1ZGVzOiBTZXF1ZW5jZVtzdHJdID0gKCIqKi9fX3B5Y2FjaGVfXy8qKiIsICIqKi8qLnB5YyIpLAogICAgYXJjaGl2ZV9uYW1lOiBzdHIgPSAiYXJ0aWZhY3RzIiwKICAgIGZtdDogc3RyID0gInRhci5neiIsCikgLT4gVHVwbGVbUGF0aCwgUGF0aF06CiAgICAiIiJTdGFnZSttYW5pZmVzdCthcmNoaXZlLiBSZXR1cm5zIChhcmNoaXZlX3BhdGgsIG1hbmlmZXN0X3BhdGgpLiIiIgogICAgd29ya19kaXIgPSB3b3JrX2Rpci5yZXNvbHZlKCkKICAgIHN0YWdlZF9yb290ID0gd29ya19kaXIgLyAic3RhZ2VkIgogICAgc3RhZ2VkX2ZpbGVzID0gc3RhZ2VfdHJlZShzcmNfcm9vdCwgc3RhZ2VkX3Jvb3QsIGluY2x1ZGVzPWluY2x1ZGVzLCBleGNsdWRlcz1leGNsdWRlcykKICAgIG1hbmlmZXN0X2VudHJpZXMgPSBidWlsZF9tYW5pZmVzdChzdGFnZWRfcm9vdCwgc3RhZ2VkX2ZpbGVzKQogICAgbWFuaWZlc3RfcGF0aCA9IHdvcmtfZGlyIC8gIm1hbmlmZXN0Lmpzb24iCiAgICB3cml0ZV9tYW5pZmVzdChtYW5pZmVzdF9wYXRoLCBtYW5pZmVzdF9lbnRyaWVzKQogICAgIyBJbmNsdWRlIG1hbmlmZXN0IGluc2lkZSB0aGUgc3RhZ2VkIHRyZWUgZm9yIGVhc2llciBkZWJ1Z2dpbmcuCiAgICBzaHV0aWwuY29weTIobWFuaWZlc3RfcGF0aCwgc3RhZ2VkX3Jvb3QgLyAibWFuaWZlc3QuanNvbiIpCiAgICBvcy51dGltZShzdGFnZWRfcm9vdCAvICJtYW5pZmVzdC5qc29uIiwgKDAsIDApKQoKICAgIGlmIGZtdCA9PSAiemlwIjoKICAgICAgICBhcmNoaXZlX3BhdGggPSB3b3JrX2RpciAvIGYie2FyY2hpdmVfbmFtZX0uemlwIgogICAgICAgIHJldHVybiBjcmVhdGVfemlwKHN0YWdlZF9yb290LCBhcmNoaXZlX3BhdGgpLCBtYW5pZmVzdF9wYXRoCiAgICBhcmNoaXZlX3BhdGggPSB3b3JrX2RpciAvIGYie2FyY2hpdmVfbmFtZX0udGFyLmd6IgogICAgcmV0dXJuIGNyZWF0ZV90YXJfZ3ooc3RhZ2VkX3Jvb3QsIGFyY2hpdmVfcGF0aCksIG1hbmlmZXN0X3BhdGgK\"}\nDIR_STATE:[\"scripts/README_e2e.md\",\"scripts/artifacts.py\",\"scripts/e2e.py\",\"scripts/issue_on_failure.py\",\"scripts/repro_steps.py\",\"scripts/requirements-ci.txt\"]",
  "reasoning": "",
  "responseId": "resp_03098cdc3c856bc0006949c031b6c88190a7540a07ede1f204",
  "model": "gpt-5.2-2025-12-11",
  "usage": {
    "input_tokens": 6674,
    "input_tokens_details": {
      "cached_tokens": 0
    },
    "output_tokens": 5647,
    "output_tokens_details": {
      "reasoning_tokens": 33
    },
    "total_tokens": 12321
  },
  "hadError": false,
  "errorType": null,
  "webSearchSources": [],
  "citations": [],
  "output": [
    {
      "id": "rs_03098cdc3c856bc0006949c032a1d88190944c1da06d8db24d",
      "type": "reasoning",
      "summary": []
    },
    {
      "id": "ci_03098cdc3c856bc0006949c0335b6c8190920adf2b022656ea",
      "type": "code_interpreter_call",
      "status": "completed",
      "code": "from pathlib import Path\nimport base64, json, hashlib, gzip\n\ntarget_path = Path('/mnt/data').joinpath('scripts/artifacts.py')\nassert target_path.is_file(), 'Expected scripts/artifacts.py to exist before export'\ndata = target_path.read_bytes()\npayload = {\n  'path': 'scripts/artifacts.py',\n  'size': len(data),\n  'encoding': 'base64',\n  'sha256': hashlib.sha256(data).hexdigest(),\n  'content': None\n}\nif len(data) > 20000:\n    compressed = gzip.compress(data)\n    payload['encoding'] = 'gzip+base64'\n    payload['content'] = base64.b64encode(compressed).decode('ascii')\nelse:\n    payload['content'] = base64.b64encode(data).decode('ascii')\n\nprint('FILE_EXPORT:' + json.dumps(payload, separators=(',', ':')))\nprint('DIR_STATE:' + json.dumps(sorted(str(p.relative_to(Path(\"/mnt/data\"))) for p in target_path.parent.glob('*') if p.is_file())))",
      "container_id": "cntr_6949be2f5f848190a4b8106bfdfa0c4704094e1617bbf644",
      "outputs": [
        {
          "type": "logs",
          "logs": "FILE_EXPORT:{\"path\":\"scripts/artifacts.py\",\"size\":6324,\"encoding\":\"base64\",\"sha256\":\"14c66d87a3f746973e1b3897e6633a958042b390f2222a663545fc307d67f368\",\"content\":\"IiIiQXJ0aWZhY3QgdXRpbGl0aWVzOiByZWRhY3Qgc2VjcmV0cywgYnVpbGQgZGV0ZXJtaW5pc3RpYyBtYW5pZmVzdHMsIGFuZCBwYWNrYWdlIGxvZ3MvcmVzdWx0cy4KCkRlc2lnbmVkIGZvciBDSTogY3JlYXRlIGEgc3RhZ2luZyB0cmVlIHdpdGggcmVkYWN0aW9uIGFwcGxpZWQsIGVtaXQgYSBzdGFibGUgbWFuaWZlc3QsCmFuZCBwYWNrYWdlIGludG8gLnRhci5neiBvciAuemlwIHdpdGggbm9ybWFsaXplZCBtZXRhZGF0YSBmb3IgcmVwcm9kdWNpYmxlIHVwbG9hZHMuCiIiIgoKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aAppbXBvcnQgZm5tYXRjaAppbXBvcnQgaGFzaGxpYgppbXBvcnQganNvbgppbXBvcnQgb3MKaW1wb3J0IHJlCmltcG9ydCBzaHV0aWwKaW1wb3J0IHN0YXQKaW1wb3J0IHRhcmZpbGUKaW1wb3J0IHppcGZpbGUKZnJvbSB0eXBpbmcgaW1wb3J0IEl0ZXJhYmxlLCBJdGVyYXRvciwgTGlzdCwgT3B0aW9uYWwsIFNlcXVlbmNlLCBUdXBsZQojIFJlZ2V4ZXMgdHVuZWQgdG8gY2F0Y2ggY29tbW9uIENJIHNlY3JldHMgd2l0aG91dCBiZWluZyBvdmVybHkgZXhwZW5zaXZlLgpfU0VDUkVUX1BBVFRFUk5TOiBMaXN0W1R1cGxlW3JlLlBhdHRlcm4sIHN0cl1dID0gWwogICAgKHJlLmNvbXBpbGUociIoP2kpXGJnaHBfW0EtWmEtejAtOV17MjAsfVxiIiksICJSRURBQ1RFRF9HSF9UT0tFTiIpLAogICAgKHJlLmNvbXBpbGUociIoP2kpXGJnaXRodWJfcGF0X1tBLVphLXowLTlfXXsyMCx9XGIiKSwgIlJFREFDVEVEX0dIX1BBVCIpLAogICAgKHJlLmNvbXBpbGUociJcYkFLSUFbMC05QS1aXXsxNn1cYiIpLCAiUkVEQUNURURfQVdTX0FDQ0VTU19LRVlfSUQiKSwKICAgIChyZS5jb21waWxlKHIiKD9pcyktLS0tLUJFR0lOICg/OlJTQSApP1BSSVZBVEUgS0VZLS0tLS0uKj8tLS0tLUVORCAoPzpSU0EgKT9QUklWQVRFIEtFWS0tLS0tIiksCiAgICAgIlJFREFDVEVEX1BSSVZBVEVfS0VZX0JMT0NLIiksCiAgICAocmUuY29tcGlsZShyIig/aW0pXihccyooPzpcdytfKT8oPzp0b2tlbnxzZWNyZXR8cGFzc3dvcmR8cGFzc3dkfGFwaVtfLV0/a2V5KVxzKj1ccyopLiskIiksCiAgICAgciJcMVJFREFDVEVEIiksCl0KX1RFWFRfRVhUUyA9IHsiLmxvZyIsICIudHh0IiwgIi5qc29uIiwgIi55bWwiLCAiLnlhbWwiLCAiLmVudiIsICIuaW5pIiwgIi5jZmciLCAiLm1kIn0KZGVmIHJlZGFjdF90ZXh0KHRleHQ6IHN0cikgLT4gc3RyOgogICAgZm9yIHJ4LCByZXBsIGluIF9TRUNSRVRfUEFUVEVSTlM6CiAgICAgICAgdGV4dCA9IHJ4LnN1YihyZXBsLCB0ZXh0KQogICAgcmV0dXJuIHRleHQKCgpkZWYgcmVkYWN0X2J5dGVzKGRhdGE6IGJ5dGVzKSAtPiBieXRlczoKICAgIHRyeToKICAgICAgICBzID0gZGF0YS5kZWNvZGUoInV0Zi04IikKICAgIGV4Y2VwdCBVbmljb2RlRGVjb2RlRXJyb3I6CiAgICAgICAgcyA9IGRhdGEuZGVjb2RlKCJ1dGYtOCIsIGVycm9ycz0iaWdub3JlIikKICAgIHJldHVybiByZWRhY3RfdGV4dChzKS5lbmNvZGUoInV0Zi04IikKCgpkZWYgc2hhMjU2X2ZpbGUocGF0aDogUGF0aCkgLT4gc3RyOgogICAgaCA9IGhhc2hsaWIuc2hhMjU2KCkKICAgIHdpdGggcGF0aC5vcGVuKCJyYiIpIGFzIGY6CiAgICAgICAgZm9yIGNodW5rIGluIGl0ZXIobGFtYmRhOiBmLnJlYWQoMTAyNCAqIDEwMjQpLCBiIiIpOgogICAgICAgICAgICBoLnVwZGF0ZShjaHVuaykKICAgIHJldHVybiBoLmhleGRpZ2VzdCgpCmRlZiBfcmVsX3Bvc2l4KHBhdGg6IFBhdGgsIHJvb3Q6IFBhdGgpIC0+IHN0cjoKICAgIHJldHVybiBwYXRoLnJlbGF0aXZlX3RvKHJvb3QpLmFzX3Bvc2l4KCkKCgpkZWYgaXRlcl9maWxlcygKICAgIHJvb3Q6IFBhdGgsCiAgICBpbmNsdWRlczogU2VxdWVuY2Vbc3RyXSA9ICgiKiovKiIsKSwKICAgIGV4Y2x1ZGVzOiBTZXF1ZW5jZVtzdHJdID0gKCksCikgLT4gSXRlcmF0b3JbUGF0aF06CiAgICByb290ID0gcm9vdC5yZXNvbHZlKCkKICAgIGZvciBwIGluIHNvcnRlZChyb290LnJnbG9iKCIqIikpOgogICAgICAgIGlmIG5vdCBwLmlzX2ZpbGUoKToKICAgICAgICAgICAgY29udGludWUKICAgICAgICByZWwgPSBfcmVsX3Bvc2l4KHAsIHJvb3QpCiAgICAgICAgaWYgaW5jbHVkZXMgYW5kIG5vdCBhbnkoZm5tYXRjaC5mbm1hdGNoKHJlbCwgcGF0KSBmb3IgcGF0IGluIGluY2x1ZGVzKToKICAgICAgICAgICAgY29udGludWUKICAgICAgICBpZiBleGNsdWRlcyBhbmQgYW55KGZubWF0Y2guZm5tYXRjaChyZWwsIHBhdCkgZm9yIHBhdCBpbiBleGNsdWRlcyk6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgeWllbGQgcApAZGF0YWNsYXNzKGZyb3plbj1UcnVlKQpjbGFzcyBNYW5pZmVzdEVudHJ5OgogICAgcGF0aDogc3RyCiAgICBzaXplOiBpbnQKICAgIHNoYTI1Njogc3RyCgoKZGVmIGJ1aWxkX21hbmlmZXN0KHJvb3Q6IFBhdGgsIGZpbGVzOiBJdGVyYWJsZVtQYXRoXSkgLT4gTGlzdFtNYW5pZmVzdEVudHJ5XToKICAgIHJvb3QgPSByb290LnJlc29sdmUoKQogICAgZW50cmllczogTGlzdFtNYW5pZmVzdEVudHJ5XSA9IFtdCiAgICBmb3IgcCBpbiBmaWxlczoKICAgICAgICBlbnRyaWVzLmFwcGVuZChNYW5pZmVzdEVudHJ5KF9yZWxfcG9zaXgocCwgcm9vdCksIHAuc3RhdCgpLnN0X3NpemUsIHNoYTI1Nl9maWxlKHApKSkKICAgIGVudHJpZXMuc29ydChrZXk9bGFtYmRhIGU6IGUucGF0aCkKICAgIHJldHVybiBlbnRyaWVzCgoKZGVmIHdyaXRlX21hbmlmZXN0KHBhdGg6IFBhdGgsIGVudHJpZXM6IFNlcXVlbmNlW01hbmlmZXN0RW50cnldKSAtPiBOb25lOgogICAgcGF5bG9hZCA9IHsKICAgICAgICAidmVyc2lvbiI6IDEsCiAgICAgICAgImVudHJpZXMiOiBbZS5fX2RpY3RfXyBmb3IgZSBpbiBlbnRyaWVzXSwKICAgIH0KICAgIHBhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHBhdGgud3JpdGVfdGV4dChqc29uLmR1bXBzKHBheWxvYWQsIHNvcnRfa2V5cz1UcnVlLCBpbmRlbnQ9MikgKyAiXG4iLCBlbmNvZGluZz0idXRmLTgiKQpkZWYgc3RhZ2VfdHJlZSgKICAgIHNyY19yb290OiBQYXRoLAogICAgZHN0X3Jvb3Q6IFBhdGgsCiAgICBpbmNsdWRlczogU2VxdWVuY2Vbc3RyXSA9ICgiKiovKiIsKSwKICAgIGV4Y2x1ZGVzOiBTZXF1ZW5jZVtzdHJdID0gKCksCikgLT4gTGlzdFtQYXRoXToKICAgICIiIkNvcHkgc3JjX3Jvb3QgLT4gZHN0X3Jvb3QgYXBwbHlpbmcgcmVkYWN0aW9uIHRvIGxpa2VseS10ZXh0IGZpbGVzLgoKICAgIFJldHVybnMgYSBsaXN0IG9mIHN0YWdlZCBmaWxlIHBhdGhzIChpbiBkc3Rfcm9vdCksIGRldGVybWluaXN0aWNhbGx5IG9yZGVyZWQuCiAgICAiIiIKICAgIHNyY19yb290ID0gc3JjX3Jvb3QucmVzb2x2ZSgpCiAgICBkc3Rfcm9vdCA9IGRzdF9yb290LnJlc29sdmUoKQogICAgaWYgZHN0X3Jvb3QuZXhpc3RzKCk6CiAgICAgICAgc2h1dGlsLnJtdHJlZShkc3Rfcm9vdCkKICAgIGRzdF9yb290Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKCiAgICBzdGFnZWQ6IExpc3RbUGF0aF0gPSBbXQogICAgZm9yIHNyYyBpbiBpdGVyX2ZpbGVzKHNyY19yb290LCBpbmNsdWRlcz1pbmNsdWRlcywgZXhjbHVkZXM9ZXhjbHVkZXMpOgogICAgICAgIHJlbCA9IHNyYy5yZWxhdGl2ZV90byhzcmNfcm9vdCkKICAgICAgICBkc3QgPSBkc3Rfcm9vdCAvIHJlbAogICAgICAgIGRzdC5wYXJlbnQubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQogICAgICAgIGlmIHNyYy5zdWZmaXgubG93ZXIoKSBpbiBfVEVYVF9FWFRTOgogICAgICAgICAgICBkc3Qud3JpdGVfYnl0ZXMocmVkYWN0X2J5dGVzKHNyYy5yZWFkX2J5dGVzKCkpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNodXRpbC5jb3B5MihzcmMsIGRzdCkKICAgICAgICBvcy51dGltZShkc3QsICgwLCAwKSkgICMgbm9ybWFsaXplIG10aW1lcyBmb3IgcmVwcm9kdWNpYmxlIGFyY2hpdmVzCiAgICAgICAgc3RhZ2VkLmFwcGVuZChkc3QpCiAgICBzdGFnZWQuc29ydChrZXk9bGFtYmRhIHA6IHAucmVsYXRpdmVfdG8oZHN0X3Jvb3QpLmFzX3Bvc2l4KCkpCiAgICByZXR1cm4gc3RhZ2VkCmRlZiBjcmVhdGVfdGFyX2d6KHN0YWdlZF9yb290OiBQYXRoLCBvdXRfcGF0aDogUGF0aCkgLT4gUGF0aDoKICAgIHN0YWdlZF9yb290ID0gc3RhZ2VkX3Jvb3QucmVzb2x2ZSgpCiAgICBvdXRfcGF0aC5wYXJlbnQubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQoKICAgIGRlZiBfZmlsdGVyKHRpOiB0YXJmaWxlLlRhckluZm8pIC0+IHRhcmZpbGUuVGFySW5mbzoKICAgICAgICB0aS51aWQgPSB0aS5naWQgPSAwCiAgICAgICAgdGkudW5hbWUgPSB0aS5nbmFtZSA9ICIiCiAgICAgICAgdGkubXRpbWUgPSAwCiAgICAgICAgaWYgdGkubW9kZToKICAgICAgICAgICAgdGkubW9kZSA9IDBvNjQ0IGlmIHRpLmlzZmlsZSgpIGVsc2UgMG83NTUKICAgICAgICByZXR1cm4gdGkKCiAgICB3aXRoIHRhcmZpbGUub3BlbihvdXRfcGF0aCwgInc6Z3oiKSBhcyB0ZjoKICAgICAgICB0Zi5hZGQoc3RhZ2VkX3Jvb3QsIGFyY25hbWU9Ii4iLCBmaWx0ZXI9X2ZpbHRlcikKICAgIHJldHVybiBvdXRfcGF0aAoKCmRlZiBjcmVhdGVfemlwKHN0YWdlZF9yb290OiBQYXRoLCBvdXRfcGF0aDogUGF0aCkgLT4gUGF0aDoKICAgIHN0YWdlZF9yb290ID0gc3RhZ2VkX3Jvb3QucmVzb2x2ZSgpCiAgICBvdXRfcGF0aC5wYXJlbnQubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQogICAgZXBvY2ggPSAoMTk4MCwgMSwgMSwgMCwgMCwgMCkKCiAgICB3aXRoIHppcGZpbGUuWmlwRmlsZShvdXRfcGF0aCwgInciLCBjb21wcmVzc2lvbj16aXBmaWxlLlpJUF9ERUZMQVRFRCkgYXMgemY6CiAgICAgICAgZm9yIHAgaW4gaXRlcl9maWxlcyhzdGFnZWRfcm9vdCk6CiAgICAgICAgICAgIHJlbCA9IF9yZWxfcG9zaXgocCwgc3RhZ2VkX3Jvb3QpCiAgICAgICAgICAgIHppID0gemlwZmlsZS5aaXBJbmZvKHJlbCwgZGF0ZV90aW1lPWVwb2NoKQogICAgICAgICAgICBtb2RlID0gMG82NDQKICAgICAgICAgICAgemkuZXh0ZXJuYWxfYXR0ciA9IChtb2RlICYgMHhGRkZGKSA8PCAxNgogICAgICAgICAgICB6Zi53cml0ZXN0cih6aSwgcC5yZWFkX2J5dGVzKCkpCiAgICByZXR1cm4gb3V0X3BhdGgKZGVmIHByZXBhcmVfYXJ0aWZhY3RzKAogICAgc3JjX3Jvb3Q6IFBhdGgsCiAgICB3b3JrX2RpcjogUGF0aCwKICAgICosCiAgICBpbmNsdWRlczogU2VxdWVuY2Vbc3RyXSA9ICgiKiovKiIsKSwKICAgIGV4Y2x1ZGVzOiBTZXF1ZW5jZVtzdHJdID0gKCIqKi9fX3B5Y2FjaGVfXy8qKiIsICIqKi8qLnB5YyIpLAogICAgYXJjaGl2ZV9uYW1lOiBzdHIgPSAiYXJ0aWZhY3RzIiwKICAgIGZtdDogc3RyID0gInRhci5neiIsCikgLT4gVHVwbGVbUGF0aCwgUGF0aF06CiAgICAiIiJTdGFnZSttYW5pZmVzdCthcmNoaXZlLiBSZXR1cm5zIChhcmNoaXZlX3BhdGgsIG1hbmlmZXN0X3BhdGgpLiIiIgogICAgd29ya19kaXIgPSB3b3JrX2Rpci5yZXNvbHZlKCkKICAgIHN0YWdlZF9yb290ID0gd29ya19kaXIgLyAic3RhZ2VkIgogICAgc3RhZ2VkX2ZpbGVzID0gc3RhZ2VfdHJlZShzcmNfcm9vdCwgc3RhZ2VkX3Jvb3QsIGluY2x1ZGVzPWluY2x1ZGVzLCBleGNsdWRlcz1leGNsdWRlcykKICAgIG1hbmlmZXN0X2VudHJpZXMgPSBidWlsZF9tYW5pZmVzdChzdGFnZWRfcm9vdCwgc3RhZ2VkX2ZpbGVzKQogICAgbWFuaWZlc3RfcGF0aCA9IHdvcmtfZGlyIC8gIm1hbmlmZXN0Lmpzb24iCiAgICB3cml0ZV9tYW5pZmVzdChtYW5pZmVzdF9wYXRoLCBtYW5pZmVzdF9lbnRyaWVzKQogICAgIyBJbmNsdWRlIG1hbmlmZXN0IGluc2lkZSB0aGUgc3RhZ2VkIHRyZWUgZm9yIGVhc2llciBkZWJ1Z2dpbmcuCiAgICBzaHV0aWwuY29weTIobWFuaWZlc3RfcGF0aCwgc3RhZ2VkX3Jvb3QgLyAibWFuaWZlc3QuanNvbiIpCiAgICBvcy51dGltZShzdGFnZWRfcm9vdCAvICJtYW5pZmVzdC5qc29uIiwgKDAsIDApKQoKICAgIGlmIGZtdCA9PSAiemlwIjoKICAgICAgICBhcmNoaXZlX3BhdGggPSB3b3JrX2RpciAvIGYie2FyY2hpdmVfbmFtZX0uemlwIgogICAgICAgIHJldHVybiBjcmVhdGVfemlwKHN0YWdlZF9yb290LCBhcmNoaXZlX3BhdGgpLCBtYW5pZmVzdF9wYXRoCiAgICBhcmNoaXZlX3BhdGggPSB3b3JrX2RpciAvIGYie2FyY2hpdmVfbmFtZX0udGFyLmd6IgogICAgcmV0dXJuIGNyZWF0ZV90YXJfZ3ooc3RhZ2VkX3Jvb3QsIGFyY2hpdmVfcGF0aCksIG1hbmlmZXN0X3BhdGgK\"}\nDIR_STATE:[\"scripts/README_e2e.md\", \"scripts/artifacts.py\", \"scripts/e2e.py\", \"scripts/issue_on_failure.py\", \"scripts/repro_steps.py\", \"scripts/requirements-ci.txt\"]\n"
        }
      ]
    },
    {
      "id": "msg_03098cdc3c856bc0006949c036d9c88190906ae7263d7c6870",
      "type": "message",
      "status": "completed",
      "content": [
        {
          "type": "output_text",
          "annotations": [],
          "logprobs": [],
          "text": "FILE_EXPORT:{\"path\":\"scripts/artifacts.py\",\"size\":6324,\"encoding\":\"base64\",\"sha256\":\"14c66d87a3f746973e1b3897e6633a958042b390f2222a663545fc307d67f368\",\"content\":\"IiIiQXJ0aWZhY3QgdXRpbGl0aWVzOiByZWRhY3Qgc2VjcmV0cywgYnVpbGQgZGV0ZXJtaW5pc3RpYyBtYW5pZmVzdHMsIGFuZCBwYWNrYWdlIGxvZ3MvcmVzdWx0cy4KCkRlc2lnbmVkIGZvciBDSTogY3JlYXRlIGEgc3RhZ2luZyB0cmVlIHdpdGggcmVkYWN0aW9uIGFwcGxpZWQsIGVtaXQgYSBzdGFibGUgbWFuaWZlc3QsCmFuZCBwYWNrYWdlIGludG8gLnRhci5neiBvciAuemlwIHdpdGggbm9ybWFsaXplZCBtZXRhZGF0YSBmb3IgcmVwcm9kdWNpYmxlIHVwbG9hZHMuCiIiIgoKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aAppbXBvcnQgZm5tYXRjaAppbXBvcnQgaGFzaGxpYgppbXBvcnQganNvbgppbXBvcnQgb3MKaW1wb3J0IHJlCmltcG9ydCBzaHV0aWwKaW1wb3J0IHN0YXQKaW1wb3J0IHRhcmZpbGUKaW1wb3J0IHppcGZpbGUKZnJvbSB0eXBpbmcgaW1wb3J0IEl0ZXJhYmxlLCBJdGVyYXRvciwgTGlzdCwgT3B0aW9uYWwsIFNlcXVlbmNlLCBUdXBsZQojIFJlZ2V4ZXMgdHVuZWQgdG8gY2F0Y2ggY29tbW9uIENJIHNlY3JldHMgd2l0aG91dCBiZWluZyBvdmVybHkgZXhwZW5zaXZlLgpfU0VDUkVUX1BBVFRFUk5TOiBMaXN0W1R1cGxlW3JlLlBhdHRlcm4sIHN0cl1dID0gWwogICAgKHJlLmNvbXBpbGUociIoP2kpXGJnaHBfW0EtWmEtejAtOV17MjAsfVxiIiksICJSRURBQ1RFRF9HSF9UT0tFTiIpLAogICAgKHJlLmNvbXBpbGUociIoP2kpXGJnaXRodWJfcGF0X1tBLVphLXowLTlfXXsyMCx9XGIiKSwgIlJFREFDVEVEX0dIX1BBVCIpLAogICAgKHJlLmNvbXBpbGUociJcYkFLSUFbMC05QS1aXXsxNn1cYiIpLCAiUkVEQUNURURfQVdTX0FDQ0VTU19LRVlfSUQiKSwKICAgIChyZS5jb21waWxlKHIiKD9pcyktLS0tLUJFR0lOICg/OlJTQSApP1BSSVZBVEUgS0VZLS0tLS0uKj8tLS0tLUVORCAoPzpSU0EgKT9QUklWQVRFIEtFWS0tLS0tIiksCiAgICAgIlJFREFDVEVEX1BSSVZBVEVfS0VZX0JMT0NLIiksCiAgICAocmUuY29tcGlsZShyIig/aW0pXihccyooPzpcdytfKT8oPzp0b2tlbnxzZWNyZXR8cGFzc3dvcmR8cGFzc3dkfGFwaVtfLV0/a2V5KVxzKj1ccyopLiskIiksCiAgICAgciJcMVJFREFDVEVEIiksCl0KX1RFWFRfRVhUUyA9IHsiLmxvZyIsICIudHh0IiwgIi5qc29uIiwgIi55bWwiLCAiLnlhbWwiLCAiLmVudiIsICIuaW5pIiwgIi5jZmciLCAiLm1kIn0KZGVmIHJlZGFjdF90ZXh0KHRleHQ6IHN0cikgLT4gc3RyOgogICAgZm9yIHJ4LCByZXBsIGluIF9TRUNSRVRfUEFUVEVSTlM6CiAgICAgICAgdGV4dCA9IHJ4LnN1YihyZXBsLCB0ZXh0KQogICAgcmV0dXJuIHRleHQKCgpkZWYgcmVkYWN0X2J5dGVzKGRhdGE6IGJ5dGVzKSAtPiBieXRlczoKICAgIHRyeToKICAgICAgICBzID0gZGF0YS5kZWNvZGUoInV0Zi04IikKICAgIGV4Y2VwdCBVbmljb2RlRGVjb2RlRXJyb3I6CiAgICAgICAgcyA9IGRhdGEuZGVjb2RlKCJ1dGYtOCIsIGVycm9ycz0iaWdub3JlIikKICAgIHJldHVybiByZWRhY3RfdGV4dChzKS5lbmNvZGUoInV0Zi04IikKCgpkZWYgc2hhMjU2X2ZpbGUocGF0aDogUGF0aCkgLT4gc3RyOgogICAgaCA9IGhhc2hsaWIuc2hhMjU2KCkKICAgIHdpdGggcGF0aC5vcGVuKCJyYiIpIGFzIGY6CiAgICAgICAgZm9yIGNodW5rIGluIGl0ZXIobGFtYmRhOiBmLnJlYWQoMTAyNCAqIDEwMjQpLCBiIiIpOgogICAgICAgICAgICBoLnVwZGF0ZShjaHVuaykKICAgIHJldHVybiBoLmhleGRpZ2VzdCgpCmRlZiBfcmVsX3Bvc2l4KHBhdGg6IFBhdGgsIHJvb3Q6IFBhdGgpIC0+IHN0cjoKICAgIHJldHVybiBwYXRoLnJlbGF0aXZlX3RvKHJvb3QpLmFzX3Bvc2l4KCkKCgpkZWYgaXRlcl9maWxlcygKICAgIHJvb3Q6IFBhdGgsCiAgICBpbmNsdWRlczogU2VxdWVuY2Vbc3RyXSA9ICgiKiovKiIsKSwKICAgIGV4Y2x1ZGVzOiBTZXF1ZW5jZVtzdHJdID0gKCksCikgLT4gSXRlcmF0b3JbUGF0aF06CiAgICByb290ID0gcm9vdC5yZXNvbHZlKCkKICAgIGZvciBwIGluIHNvcnRlZChyb290LnJnbG9iKCIqIikpOgogICAgICAgIGlmIG5vdCBwLmlzX2ZpbGUoKToKICAgICAgICAgICAgY29udGludWUKICAgICAgICByZWwgPSBfcmVsX3Bvc2l4KHAsIHJvb3QpCiAgICAgICAgaWYgaW5jbHVkZXMgYW5kIG5vdCBhbnkoZm5tYXRjaC5mbm1hdGNoKHJlbCwgcGF0KSBmb3IgcGF0IGluIGluY2x1ZGVzKToKICAgICAgICAgICAgY29udGludWUKICAgICAgICBpZiBleGNsdWRlcyBhbmQgYW55KGZubWF0Y2guZm5tYXRjaChyZWwsIHBhdCkgZm9yIHBhdCBpbiBleGNsdWRlcyk6CiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgeWllbGQgcApAZGF0YWNsYXNzKGZyb3plbj1UcnVlKQpjbGFzcyBNYW5pZmVzdEVudHJ5OgogICAgcGF0aDogc3RyCiAgICBzaXplOiBpbnQKICAgIHNoYTI1Njogc3RyCgoKZGVmIGJ1aWxkX21hbmlmZXN0KHJvb3Q6IFBhdGgsIGZpbGVzOiBJdGVyYWJsZVtQYXRoXSkgLT4gTGlzdFtNYW5pZmVzdEVudHJ5XToKICAgIHJvb3QgPSByb290LnJlc29sdmUoKQogICAgZW50cmllczogTGlzdFtNYW5pZmVzdEVudHJ5XSA9IFtdCiAgICBmb3IgcCBpbiBmaWxlczoKICAgICAgICBlbnRyaWVzLmFwcGVuZChNYW5pZmVzdEVudHJ5KF9yZWxfcG9zaXgocCwgcm9vdCksIHAuc3RhdCgpLnN0X3NpemUsIHNoYTI1Nl9maWxlKHApKSkKICAgIGVudHJpZXMuc29ydChrZXk9bGFtYmRhIGU6IGUucGF0aCkKICAgIHJldHVybiBlbnRyaWVzCgoKZGVmIHdyaXRlX21hbmlmZXN0KHBhdGg6IFBhdGgsIGVudHJpZXM6IFNlcXVlbmNlW01hbmlmZXN0RW50cnldKSAtPiBOb25lOgogICAgcGF5bG9hZCA9IHsKICAgICAgICAidmVyc2lvbiI6IDEsCiAgICAgICAgImVudHJpZXMiOiBbZS5fX2RpY3RfXyBmb3IgZSBpbiBlbnRyaWVzXSwKICAgIH0KICAgIHBhdGgucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHBhdGgud3JpdGVfdGV4dChqc29uLmR1bXBzKHBheWxvYWQsIHNvcnRfa2V5cz1UcnVlLCBpbmRlbnQ9MikgKyAiXG4iLCBlbmNvZGluZz0idXRmLTgiKQpkZWYgc3RhZ2VfdHJlZSgKICAgIHNyY19yb290OiBQYXRoLAogICAgZHN0X3Jvb3Q6IFBhdGgsCiAgICBpbmNsdWRlczogU2VxdWVuY2Vbc3RyXSA9ICgiKiovKiIsKSwKICAgIGV4Y2x1ZGVzOiBTZXF1ZW5jZVtzdHJdID0gKCksCikgLT4gTGlzdFtQYXRoXToKICAgICIiIkNvcHkgc3JjX3Jvb3QgLT4gZHN0X3Jvb3QgYXBwbHlpbmcgcmVkYWN0aW9uIHRvIGxpa2VseS10ZXh0IGZpbGVzLgoKICAgIFJldHVybnMgYSBsaXN0IG9mIHN0YWdlZCBmaWxlIHBhdGhzIChpbiBkc3Rfcm9vdCksIGRldGVybWluaXN0aWNhbGx5IG9yZGVyZWQuCiAgICAiIiIKICAgIHNyY19yb290ID0gc3JjX3Jvb3QucmVzb2x2ZSgpCiAgICBkc3Rfcm9vdCA9IGRzdF9yb290LnJlc29sdmUoKQogICAgaWYgZHN0X3Jvb3QuZXhpc3RzKCk6CiAgICAgICAgc2h1dGlsLnJtdHJlZShkc3Rfcm9vdCkKICAgIGRzdF9yb290Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKCiAgICBzdGFnZWQ6IExpc3RbUGF0aF0gPSBbXQogICAgZm9yIHNyYyBpbiBpdGVyX2ZpbGVzKHNyY19yb290LCBpbmNsdWRlcz1pbmNsdWRlcywgZXhjbHVkZXM9ZXhjbHVkZXMpOgogICAgICAgIHJlbCA9IHNyYy5yZWxhdGl2ZV90byhzcmNfcm9vdCkKICAgICAgICBkc3QgPSBkc3Rfcm9vdCAvIHJlbAogICAgICAgIGRzdC5wYXJlbnQubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQogICAgICAgIGlmIHNyYy5zdWZmaXgubG93ZXIoKSBpbiBfVEVYVF9FWFRTOgogICAgICAgICAgICBkc3Qud3JpdGVfYnl0ZXMocmVkYWN0X2J5dGVzKHNyYy5yZWFkX2J5dGVzKCkpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNodXRpbC5jb3B5MihzcmMsIGRzdCkKICAgICAgICBvcy51dGltZShkc3QsICgwLCAwKSkgICMgbm9ybWFsaXplIG10aW1lcyBmb3IgcmVwcm9kdWNpYmxlIGFyY2hpdmVzCiAgICAgICAgc3RhZ2VkLmFwcGVuZChkc3QpCiAgICBzdGFnZWQuc29ydChrZXk9bGFtYmRhIHA6IHAucmVsYXRpdmVfdG8oZHN0X3Jvb3QpLmFzX3Bvc2l4KCkpCiAgICByZXR1cm4gc3RhZ2VkCmRlZiBjcmVhdGVfdGFyX2d6KHN0YWdlZF9yb290OiBQYXRoLCBvdXRfcGF0aDogUGF0aCkgLT4gUGF0aDoKICAgIHN0YWdlZF9yb290ID0gc3RhZ2VkX3Jvb3QucmVzb2x2ZSgpCiAgICBvdXRfcGF0aC5wYXJlbnQubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQoKICAgIGRlZiBfZmlsdGVyKHRpOiB0YXJmaWxlLlRhckluZm8pIC0+IHRhcmZpbGUuVGFySW5mbzoKICAgICAgICB0aS51aWQgPSB0aS5naWQgPSAwCiAgICAgICAgdGkudW5hbWUgPSB0aS5nbmFtZSA9ICIiCiAgICAgICAgdGkubXRpbWUgPSAwCiAgICAgICAgaWYgdGkubW9kZToKICAgICAgICAgICAgdGkubW9kZSA9IDBvNjQ0IGlmIHRpLmlzZmlsZSgpIGVsc2UgMG83NTUKICAgICAgICByZXR1cm4gdGkKCiAgICB3aXRoIHRhcmZpbGUub3BlbihvdXRfcGF0aCwgInc6Z3oiKSBhcyB0ZjoKICAgICAgICB0Zi5hZGQoc3RhZ2VkX3Jvb3QsIGFyY25hbWU9Ii4iLCBmaWx0ZXI9X2ZpbHRlcikKICAgIHJldHVybiBvdXRfcGF0aAoKCmRlZiBjcmVhdGVfemlwKHN0YWdlZF9yb290OiBQYXRoLCBvdXRfcGF0aDogUGF0aCkgLT4gUGF0aDoKICAgIHN0YWdlZF9yb290ID0gc3RhZ2VkX3Jvb3QucmVzb2x2ZSgpCiAgICBvdXRfcGF0aC5wYXJlbnQubWtkaXIocGFyZW50cz1UcnVlLCBleGlzdF9vaz1UcnVlKQogICAgZXBvY2ggPSAoMTk4MCwgMSwgMSwgMCwgMCwgMCkKCiAgICB3aXRoIHppcGZpbGUuWmlwRmlsZShvdXRfcGF0aCwgInciLCBjb21wcmVzc2lvbj16aXBmaWxlLlpJUF9ERUZMQVRFRCkgYXMgemY6CiAgICAgICAgZm9yIHAgaW4gaXRlcl9maWxlcyhzdGFnZWRfcm9vdCk6CiAgICAgICAgICAgIHJlbCA9IF9yZWxfcG9zaXgocCwgc3RhZ2VkX3Jvb3QpCiAgICAgICAgICAgIHppID0gemlwZmlsZS5aaXBJbmZvKHJlbCwgZGF0ZV90aW1lPWVwb2NoKQogICAgICAgICAgICBtb2RlID0gMG82NDQKICAgICAgICAgICAgemkuZXh0ZXJuYWxfYXR0ciA9IChtb2RlICYgMHhGRkZGKSA8PCAxNgogICAgICAgICAgICB6Zi53cml0ZXN0cih6aSwgcC5yZWFkX2J5dGVzKCkpCiAgICByZXR1cm4gb3V0X3BhdGgKZGVmIHByZXBhcmVfYXJ0aWZhY3RzKAogICAgc3JjX3Jvb3Q6IFBhdGgsCiAgICB3b3JrX2RpcjogUGF0aCwKICAgICosCiAgICBpbmNsdWRlczogU2VxdWVuY2Vbc3RyXSA9ICgiKiovKiIsKSwKICAgIGV4Y2x1ZGVzOiBTZXF1ZW5jZVtzdHJdID0gKCIqKi9fX3B5Y2FjaGVfXy8qKiIsICIqKi8qLnB5YyIpLAogICAgYXJjaGl2ZV9uYW1lOiBzdHIgPSAiYXJ0aWZhY3RzIiwKICAgIGZtdDogc3RyID0gInRhci5neiIsCikgLT4gVHVwbGVbUGF0aCwgUGF0aF06CiAgICAiIiJTdGFnZSttYW5pZmVzdCthcmNoaXZlLiBSZXR1cm5zIChhcmNoaXZlX3BhdGgsIG1hbmlmZXN0X3BhdGgpLiIiIgogICAgd29ya19kaXIgPSB3b3JrX2Rpci5yZXNvbHZlKCkKICAgIHN0YWdlZF9yb290ID0gd29ya19kaXIgLyAic3RhZ2VkIgogICAgc3RhZ2VkX2ZpbGVzID0gc3RhZ2VfdHJlZShzcmNfcm9vdCwgc3RhZ2VkX3Jvb3QsIGluY2x1ZGVzPWluY2x1ZGVzLCBleGNsdWRlcz1leGNsdWRlcykKICAgIG1hbmlmZXN0X2VudHJpZXMgPSBidWlsZF9tYW5pZmVzdChzdGFnZWRfcm9vdCwgc3RhZ2VkX2ZpbGVzKQogICAgbWFuaWZlc3RfcGF0aCA9IHdvcmtfZGlyIC8gIm1hbmlmZXN0Lmpzb24iCiAgICB3cml0ZV9tYW5pZmVzdChtYW5pZmVzdF9wYXRoLCBtYW5pZmVzdF9lbnRyaWVzKQogICAgIyBJbmNsdWRlIG1hbmlmZXN0IGluc2lkZSB0aGUgc3RhZ2VkIHRyZWUgZm9yIGVhc2llciBkZWJ1Z2dpbmcuCiAgICBzaHV0aWwuY29weTIobWFuaWZlc3RfcGF0aCwgc3RhZ2VkX3Jvb3QgLyAibWFuaWZlc3QuanNvbiIpCiAgICBvcy51dGltZShzdGFnZWRfcm9vdCAvICJtYW5pZmVzdC5qc29uIiwgKDAsIDApKQoKICAgIGlmIGZtdCA9PSAiemlwIjoKICAgICAgICBhcmNoaXZlX3BhdGggPSB3b3JrX2RpciAvIGYie2FyY2hpdmVfbmFtZX0uemlwIgogICAgICAgIHJldHVybiBjcmVhdGVfemlwKHN0YWdlZF9yb290LCBhcmNoaXZlX3BhdGgpLCBtYW5pZmVzdF9wYXRoCiAgICBhcmNoaXZlX3BhdGggPSB3b3JrX2RpciAvIGYie2FyY2hpdmVfbmFtZX0udGFyLmd6IgogICAgcmV0dXJuIGNyZWF0ZV90YXJfZ3ooc3RhZ2VkX3Jvb3QsIGFyY2hpdmVfcGF0aCksIG1hbmlmZXN0X3BhdGgK\"}\nDIR_STATE:[\"scripts/README_e2e.md\",\"scripts/artifacts.py\",\"scripts/e2e.py\",\"scripts/issue_on_failure.py\",\"scripts/repro_steps.py\",\"scripts/requirements-ci.txt\"]"
        }
      ],
      "role": "assistant"
    }
  ],
  "codeResults": []
}