{
  "content": "FILE_EXPORT:{\"path\":\"src/cosmo_contracts/markdown.py\",\"size\":4818,\"encoding\":\"base64\",\"sha256\":\"276a884c3c9f95b53ff76c08cb7a683f56fdf0b87799485bfd71fc5607964b27\",\"content\":\"IiIiY29zbW9fY29udHJhY3RzLm1hcmtkb3duCgpTbWFsbCwgZGVwZW5kZW5jeS1mcmVlIGhlbHBlcnMgZm9yIHByb2R1Y2luZyBHaXRIdWItZmxhdm91cmVkIE1hcmtkb3duLgoKVGhlIHByb2plY3QgaGlzdG9yaWNhbGx5IGV4cG9zZWQgdGhpcyBtb2R1bGUgYXMgYSBwdWJsaWMgZW50cnlwb2ludDsgdGhlIGdvYWwKaGVyZSBpcyB0byBrZWVwIGEgc3RhYmxlIGltcG9ydCBzdXJmYWNlIGFuZCBwcm92aWRlIGEgbWluaW1hbCBidXQgdXNlZnVsIEFQSS4KIiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcywgZmllbGQKZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgSXRlcmFibGUsIE1hcHBpbmcsIFNlcXVlbmNlCl9fYWxsX18gPSBbCiAgICAiTWFya2Rvd24iLAogICAgIk1hcmtkb3duQnVpbGRlciIsCiAgICAiZXNjYXBlX21hcmtkb3duIiwKICAgICJoZWFkaW5nIiwKICAgICJwYXJhZ3JhcGgiLAogICAgImJ1bGxldF9saXN0IiwKICAgICJjb2RlX2Jsb2NrIiwKICAgICJ0YWJsZSIsCiAgICAicmVuZGVyIiwKXQpjbGFzcyBNYXJrZG93bihzdHIpOgogICAgIiIiQSB0aGluIG1hcmtlciB0eXBlIGZvciBzdHJpbmdzIHRoYXQgY29udGFpbiBNYXJrZG93bi4iIiIKZGVmIGVzY2FwZV9tYXJrZG93bih0ZXh0OiBzdHIpIC0+IHN0cjoKICAgICIiIkVzY2FwZSBjaGFyYWN0ZXJzIHRoYXQgZnJlcXVlbnRseSBicmVhayBNYXJrZG93biByZW5kZXJpbmcuCgogICAgVGhpcyBpcyBpbnRlbnRpb25hbGx5IGNvbnNlcnZhdGl2ZSBhbmQgdGFyZ2V0cyBjb21tb24gaW5saW5lIGNvbnRleHRzLgogICAgIiIiCiAgICBpZiBub3QgdGV4dDoKICAgICAgICByZXR1cm4gIiIKICAgICMgRXNjYXBlIGJhY2tzbGFzaCBmaXJzdCB0byBhdm9pZCBkb3VibGUgZXNjYXBpbmcuCiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCJcXCIsICJcXFxcIikKICAgIGZvciBjaCBpbiAoIioiLCAiXyIsICJgIiwgIlsiLCAiXSIsICI8IiwgIj4iLCAifCIpOgogICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoY2gsIGYiXFx7Y2h9IikKICAgIHJldHVybiB0ZXh0CmRlZiBoZWFkaW5nKHRleHQ6IHN0ciwgbGV2ZWw6IGludCA9IDEpIC0+IE1hcmtkb3duOgogICAgIiIiUmV0dXJuIGEgTWFya2Rvd24gaGVhZGluZy4iIiIKICAgIGx2bCA9IG1heCgxLCBtaW4oaW50KGxldmVsKSwgNikpCiAgICByZXR1cm4gTWFya2Rvd24oZiJ7JyMnICogbHZsfSB7dGV4dC5zdHJpcCgpfVxuIikKZGVmIHBhcmFncmFwaCh0ZXh0OiBzdHIpIC0+IE1hcmtkb3duOgogICAgIiIiUmV0dXJuIGEgTWFya2Rvd24gcGFyYWdyYXBoICh0ZXJtaW5hdGVkIHdpdGggYSBibGFuayBsaW5lKS4iIiIKICAgIHQgPSB0ZXh0LnN0cmlwKCkKICAgIHJldHVybiBNYXJrZG93bihmInt0fVxuXG4iIGlmIHQgZWxzZSAiXG4iKQpkZWYgYnVsbGV0X2xpc3QoaXRlbXM6IEl0ZXJhYmxlW0FueV0sICosIGluZGVudDogaW50ID0gMCkgLT4gTWFya2Rvd246CiAgICAiIiJSZW5kZXIgYW4gaXRlcmFibGUgYXMgYSBNYXJrZG93biBidWxsZXQgbGlzdC4iIiIKICAgIHBhZCA9ICIgIiAqIG1heCgwLCBpbnQoaW5kZW50KSkKICAgIGxpbmVzID0gW10KICAgIGZvciBpdGVtIGluIGl0ZW1zOgogICAgICAgIHMgPSBzdHIoaXRlbSkuc3RyaXAoKQogICAgICAgIGlmIG5vdCBzOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGxpbmVzLmFwcGVuZChmIntwYWR9LSB7c30iKQogICAgcmV0dXJuIE1hcmtkb3duKCJcbiIuam9pbihsaW5lcykgKyAoIlxuIiBpZiBsaW5lcyBlbHNlICIiKSkKZGVmIGNvZGVfYmxvY2soY29kZTogc3RyLCBsYW5ndWFnZTogc3RyID0gIiIpIC0+IE1hcmtkb3duOgogICAgIiIiUmV0dXJuIGEgZmVuY2VkIGNvZGUgYmxvY2suIiIiCiAgICBsYW5nID0gbGFuZ3VhZ2Uuc3RyaXAoKQogICAgYm9keSA9IChjb2RlIG9yICIiKS5yc3RyaXAoIlxuIikKICAgIHJldHVybiBNYXJrZG93bihmImBgYHtsYW5nfVxue2JvZHl9XG5gYGBcbiIpCmRlZiBfc3RyaW5naWZ5X2NlbGwodmFsdWU6IEFueSkgLT4gc3RyOgogICAgaWYgdmFsdWUgaXMgTm9uZToKICAgICAgICByZXR1cm4gIiIKICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIE1hcmtkb3duKToKICAgICAgICByZXR1cm4gc3RyKHZhbHVlKS5zdHJpcCgpCiAgICByZXR1cm4gZXNjYXBlX21hcmtkb3duKHN0cih2YWx1ZSkpLnN0cmlwKCkKZGVmIHRhYmxlKGhlYWRlcnM6IFNlcXVlbmNlW0FueV0sIHJvd3M6IFNlcXVlbmNlW1NlcXVlbmNlW0FueV1dKSAtPiBNYXJrZG93bjoKICAgICIiIlJlbmRlciBhIHNpbXBsZSBHRk0gdGFibGUuCgogICAgQ2VsbHMgYXJlIGVzY2FwZWQgZm9yIHNhZmUgaW5saW5lIHJlbmRlcmluZy4KICAgICIiIgogICAgaWYgbm90IGhlYWRlcnM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaGVhZGVycyBtdXN0IGJlIG5vbi1lbXB0eSIpCiAgICBoID0gW19zdHJpbmdpZnlfY2VsbCh4KSBmb3IgeCBpbiBoZWFkZXJzXQogICAgaGVhZGVyX2xpbmUgPSAifCAiICsgIiB8ICIuam9pbihoKSArICIgfCIKICAgIHNlcF9saW5lID0gInwgIiArICIgfCAiLmpvaW4oWyItLS0iXSAqIGxlbihoKSkgKyAiIHwiCiAgICByb3dfbGluZXMgPSBbXQogICAgZm9yIHIgaW4gcm93czoKICAgICAgICBjZWxscyA9IGxpc3QocikgKyBbIiJdICogKGxlbihoKSAtIGxlbihyKSkKICAgICAgICBjZWxscyA9IGNlbGxzWzogbGVuKGgpXQogICAgICAgIHJvd19saW5lcy5hcHBlbmQoInwgIiArICIgfCAiLmpvaW4oX3N0cmluZ2lmeV9jZWxsKGMpIGZvciBjIGluIGNlbGxzKSArICIgfCIpCiAgICByZXR1cm4gTWFya2Rvd24oIlxuIi5qb2luKFtoZWFkZXJfbGluZSwgc2VwX2xpbmUsICpyb3dfbGluZXNdKSArICJcbiIpCkBkYXRhY2xhc3MKY2xhc3MgTWFya2Rvd25CdWlsZGVyOgogICAgIiIiSW5jcmVtZW50YWxseSBidWlsZCBNYXJrZG93biB3aXRoIGNvbnZlbmllbmNlIGhlbHBlcnMuIiIiCgogICAgbGluZXM6IGxpc3Rbc3RyXSA9IGZpZWxkKGRlZmF1bHRfZmFjdG9yeT1saXN0KQoKICAgIGRlZiBhZGQoc2VsZiwgbWQ6IEFueSkgLT4gIk1hcmtkb3duQnVpbGRlciI6CiAgICAgICAgaWYgbWQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYKICAgICAgICB0ZXh0ID0gc3RyKG1kKQogICAgICAgIHNlbGYubGluZXMuZXh0ZW5kKHRleHQuc3BsaXRsaW5lcygpKQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIGFkZF9oZWFkaW5nKHNlbGYsIHRleHQ6IHN0ciwgbGV2ZWw6IGludCA9IDEpIC0+ICJNYXJrZG93bkJ1aWxkZXIiOgogICAgICAgIHJldHVybiBzZWxmLmFkZChoZWFkaW5nKHRleHQsIGxldmVsKSkKCiAgICBkZWYgYWRkX3BhcmFncmFwaChzZWxmLCB0ZXh0OiBzdHIpIC0+ICJNYXJrZG93bkJ1aWxkZXIiOgogICAgICAgIHJldHVybiBzZWxmLmFkZChwYXJhZ3JhcGgodGV4dCkpCgogICAgZGVmIGFkZF9idWxsZXRzKHNlbGYsIGl0ZW1zOiBJdGVyYWJsZVtBbnldLCAqLCBpbmRlbnQ6IGludCA9IDApIC0+ICJNYXJrZG93bkJ1aWxkZXIiOgogICAgICAgIHJldHVybiBzZWxmLmFkZChidWxsZXRfbGlzdChpdGVtcywgaW5kZW50PWluZGVudCkpCgogICAgZGVmIGFkZF9jb2RlKHNlbGYsIGNvZGU6IHN0ciwgbGFuZ3VhZ2U6IHN0ciA9ICIiKSAtPiAiTWFya2Rvd25CdWlsZGVyIjoKICAgICAgICByZXR1cm4gc2VsZi5hZGQoY29kZV9ibG9jayhjb2RlLCBsYW5ndWFnZSkpCgogICAgZGVmIGFkZF90YWJsZShzZWxmLCBoZWFkZXJzOiBTZXF1ZW5jZVtBbnldLCByb3dzOiBTZXF1ZW5jZVtTZXF1ZW5jZVtBbnldXSkgLT4gIk1hcmtkb3duQnVpbGRlciI6CiAgICAgICAgcmV0dXJuIHNlbGYuYWRkKHRhYmxlKGhlYWRlcnMsIHJvd3MpKQoKICAgIGRlZiBidWlsZChzZWxmKSAtPiBNYXJrZG93bjoKICAgICAgICAjIFByZXNlcnZlIGV4cGxpY2l0IGJsYW5rIGxpbmVzOyBhbHdheXMgZW5kIHdpdGggYSBuZXdsaW5lIGZvciBQT1NJWCBmcmllbmRsaW5lc3MuCiAgICAgICAgcmV0dXJuIE1hcmtkb3duKCJcbiIuam9pbihzZWxmLmxpbmVzKS5yc3RyaXAoIlxuIikgKyAiXG4iKQpkZWYgcmVuZGVyKG9iajogQW55KSAtPiBNYXJrZG93bjoKICAgICIiIkJlc3QtZWZmb3J0IGNvbnZlcnNpb24gb2YgY29tbW9uIFB5dGhvbiBvYmplY3RzIHRvIE1hcmtkb3duLgoKICAgIC0gc3RyIC8gTWFya2Rvd246IHJldHVybmVkIGFzLWlzCiAgICAtIE1hcHBpbmc6IHJlbmRlcnMgYXMgYSAyLWNvbHVtbiB0YWJsZSBvZiBrZXkvdmFsdWUKICAgIC0gU2VxdWVuY2U6IHJlbmRlcnMgYXMgYSBidWxsZXQgbGlzdAogICAgLSBPdGhlcjogY29lcmNlZCB0byBhIHBhcmFncmFwaAogICAgIiIiCiAgICBpZiBvYmogaXMgTm9uZToKICAgICAgICByZXR1cm4gTWFya2Rvd24oIiIpCiAgICBpZiBpc2luc3RhbmNlKG9iaiwgTWFya2Rvd24pOgogICAgICAgIHJldHVybiBvYmoKICAgIGlmIGlzaW5zdGFuY2Uob2JqLCBzdHIpOgogICAgICAgIHJldHVybiBNYXJrZG93bihvYmogaWYgb2JqLmVuZHN3aXRoKCJcbiIpIGVsc2Ugb2JqICsgIlxuIikKICAgIGlmIGlzaW5zdGFuY2Uob2JqLCBNYXBwaW5nKToKICAgICAgICBoZWFkZXJzID0gWyJrZXkiLCAidmFsdWUiXQogICAgICAgIHJvd3MgPSBbKGssIHYpIGZvciBrLCB2IGluIG9iai5pdGVtcygpXQogICAgICAgIHJldHVybiB0YWJsZShoZWFkZXJzLCByb3dzKQogICAgaWYgaXNpbnN0YW5jZShvYmosIChsaXN0LCB0dXBsZSwgc2V0LCBmcm96ZW5zZXQpKToKICAgICAgICByZXR1cm4gYnVsbGV0X2xpc3Qob2JqKQogICAgcmV0dXJuIHBhcmFncmFwaChzdHIob2JqKSkK\"}\nDIR_STATE:[\"src/cosmo_contracts/markdown.py\"]",
  "reasoning": "",
  "responseId": "resp_0fc9d4e285493c15006949bfa6db94819487fcf6aa2c1117eb",
  "model": "gpt-5.2-2025-12-11",
  "usage": {
    "input_tokens": 5346,
    "input_tokens_details": {
      "cached_tokens": 0
    },
    "output_tokens": 4300,
    "output_tokens_details": {
      "reasoning_tokens": 40
    },
    "total_tokens": 9646
  },
  "hadError": false,
  "errorType": null,
  "webSearchSources": [],
  "citations": [],
  "output": [
    {
      "id": "rs_0fc9d4e285493c15006949bfa7bb508194ad4e54fa6e4328e5",
      "type": "reasoning",
      "summary": []
    },
    {
      "id": "ci_0fc9d4e285493c15006949bfa910848194a53624a1637a4971",
      "type": "code_interpreter_call",
      "status": "completed",
      "code": "from pathlib import Path\nimport base64, json, hashlib, gzip\n\ntarget_path = Path('/mnt/data').joinpath('src/cosmo_contracts/markdown.py')\nassert target_path.is_file(), 'Expected src/cosmo_contracts/markdown.py to exist before export'\ndata = target_path.read_bytes()\npayload = {\n  'path': 'src/cosmo_contracts/markdown.py',\n  'size': len(data),\n  'encoding': 'base64',\n  'sha256': hashlib.sha256(data).hexdigest(),\n  'content': None\n}\nif len(data) > 20000:\n    compressed = gzip.compress(data)\n    payload['encoding'] = 'gzip+base64'\n    payload['content'] = base64.b64encode(compressed).decode('ascii')\nelse:\n    payload['content'] = base64.b64encode(data).decode('ascii')\n\nprint('FILE_EXPORT:' + json.dumps(payload, separators=(',', ':')))\nprint('DIR_STATE:' + json.dumps(sorted(str(p.relative_to(Path(\"/mnt/data\"))) for p in target_path.parent.glob('*') if p.is_file())))",
      "container_id": "cntr_6949bf4868f48190afb7ac7aab80c24301c1c0df42eb0f40",
      "outputs": [
        {
          "type": "logs",
          "logs": "FILE_EXPORT:{\"path\":\"src/cosmo_contracts/markdown.py\",\"size\":4818,\"encoding\":\"base64\",\"sha256\":\"276a884c3c9f95b53ff76c08cb7a683f56fdf0b87799485bfd71fc5607964b27\",\"content\":\"IiIiY29zbW9fY29udHJhY3RzLm1hcmtkb3duCgpTbWFsbCwgZGVwZW5kZW5jeS1mcmVlIGhlbHBlcnMgZm9yIHByb2R1Y2luZyBHaXRIdWItZmxhdm91cmVkIE1hcmtkb3duLgoKVGhlIHByb2plY3QgaGlzdG9yaWNhbGx5IGV4cG9zZWQgdGhpcyBtb2R1bGUgYXMgYSBwdWJsaWMgZW50cnlwb2ludDsgdGhlIGdvYWwKaGVyZSBpcyB0byBrZWVwIGEgc3RhYmxlIGltcG9ydCBzdXJmYWNlIGFuZCBwcm92aWRlIGEgbWluaW1hbCBidXQgdXNlZnVsIEFQSS4KIiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcywgZmllbGQKZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgSXRlcmFibGUsIE1hcHBpbmcsIFNlcXVlbmNlCl9fYWxsX18gPSBbCiAgICAiTWFya2Rvd24iLAogICAgIk1hcmtkb3duQnVpbGRlciIsCiAgICAiZXNjYXBlX21hcmtkb3duIiwKICAgICJoZWFkaW5nIiwKICAgICJwYXJhZ3JhcGgiLAogICAgImJ1bGxldF9saXN0IiwKICAgICJjb2RlX2Jsb2NrIiwKICAgICJ0YWJsZSIsCiAgICAicmVuZGVyIiwKXQpjbGFzcyBNYXJrZG93bihzdHIpOgogICAgIiIiQSB0aGluIG1hcmtlciB0eXBlIGZvciBzdHJpbmdzIHRoYXQgY29udGFpbiBNYXJrZG93bi4iIiIKZGVmIGVzY2FwZV9tYXJrZG93bih0ZXh0OiBzdHIpIC0+IHN0cjoKICAgICIiIkVzY2FwZSBjaGFyYWN0ZXJzIHRoYXQgZnJlcXVlbnRseSBicmVhayBNYXJrZG93biByZW5kZXJpbmcuCgogICAgVGhpcyBpcyBpbnRlbnRpb25hbGx5IGNvbnNlcnZhdGl2ZSBhbmQgdGFyZ2V0cyBjb21tb24gaW5saW5lIGNvbnRleHRzLgogICAgIiIiCiAgICBpZiBub3QgdGV4dDoKICAgICAgICByZXR1cm4gIiIKICAgICMgRXNjYXBlIGJhY2tzbGFzaCBmaXJzdCB0byBhdm9pZCBkb3VibGUgZXNjYXBpbmcuCiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCJcXCIsICJcXFxcIikKICAgIGZvciBjaCBpbiAoIioiLCAiXyIsICJgIiwgIlsiLCAiXSIsICI8IiwgIj4iLCAifCIpOgogICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoY2gsIGYiXFx7Y2h9IikKICAgIHJldHVybiB0ZXh0CmRlZiBoZWFkaW5nKHRleHQ6IHN0ciwgbGV2ZWw6IGludCA9IDEpIC0+IE1hcmtkb3duOgogICAgIiIiUmV0dXJuIGEgTWFya2Rvd24gaGVhZGluZy4iIiIKICAgIGx2bCA9IG1heCgxLCBtaW4oaW50KGxldmVsKSwgNikpCiAgICByZXR1cm4gTWFya2Rvd24oZiJ7JyMnICogbHZsfSB7dGV4dC5zdHJpcCgpfVxuIikKZGVmIHBhcmFncmFwaCh0ZXh0OiBzdHIpIC0+IE1hcmtkb3duOgogICAgIiIiUmV0dXJuIGEgTWFya2Rvd24gcGFyYWdyYXBoICh0ZXJtaW5hdGVkIHdpdGggYSBibGFuayBsaW5lKS4iIiIKICAgIHQgPSB0ZXh0LnN0cmlwKCkKICAgIHJldHVybiBNYXJrZG93bihmInt0fVxuXG4iIGlmIHQgZWxzZSAiXG4iKQpkZWYgYnVsbGV0X2xpc3QoaXRlbXM6IEl0ZXJhYmxlW0FueV0sICosIGluZGVudDogaW50ID0gMCkgLT4gTWFya2Rvd246CiAgICAiIiJSZW5kZXIgYW4gaXRlcmFibGUgYXMgYSBNYXJrZG93biBidWxsZXQgbGlzdC4iIiIKICAgIHBhZCA9ICIgIiAqIG1heCgwLCBpbnQoaW5kZW50KSkKICAgIGxpbmVzID0gW10KICAgIGZvciBpdGVtIGluIGl0ZW1zOgogICAgICAgIHMgPSBzdHIoaXRlbSkuc3RyaXAoKQogICAgICAgIGlmIG5vdCBzOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGxpbmVzLmFwcGVuZChmIntwYWR9LSB7c30iKQogICAgcmV0dXJuIE1hcmtkb3duKCJcbiIuam9pbihsaW5lcykgKyAoIlxuIiBpZiBsaW5lcyBlbHNlICIiKSkKZGVmIGNvZGVfYmxvY2soY29kZTogc3RyLCBsYW5ndWFnZTogc3RyID0gIiIpIC0+IE1hcmtkb3duOgogICAgIiIiUmV0dXJuIGEgZmVuY2VkIGNvZGUgYmxvY2suIiIiCiAgICBsYW5nID0gbGFuZ3VhZ2Uuc3RyaXAoKQogICAgYm9keSA9IChjb2RlIG9yICIiKS5yc3RyaXAoIlxuIikKICAgIHJldHVybiBNYXJrZG93bihmImBgYHtsYW5nfVxue2JvZHl9XG5gYGBcbiIpCmRlZiBfc3RyaW5naWZ5X2NlbGwodmFsdWU6IEFueSkgLT4gc3RyOgogICAgaWYgdmFsdWUgaXMgTm9uZToKICAgICAgICByZXR1cm4gIiIKICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIE1hcmtkb3duKToKICAgICAgICByZXR1cm4gc3RyKHZhbHVlKS5zdHJpcCgpCiAgICByZXR1cm4gZXNjYXBlX21hcmtkb3duKHN0cih2YWx1ZSkpLnN0cmlwKCkKZGVmIHRhYmxlKGhlYWRlcnM6IFNlcXVlbmNlW0FueV0sIHJvd3M6IFNlcXVlbmNlW1NlcXVlbmNlW0FueV1dKSAtPiBNYXJrZG93bjoKICAgICIiIlJlbmRlciBhIHNpbXBsZSBHRk0gdGFibGUuCgogICAgQ2VsbHMgYXJlIGVzY2FwZWQgZm9yIHNhZmUgaW5saW5lIHJlbmRlcmluZy4KICAgICIiIgogICAgaWYgbm90IGhlYWRlcnM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaGVhZGVycyBtdXN0IGJlIG5vbi1lbXB0eSIpCiAgICBoID0gW19zdHJpbmdpZnlfY2VsbCh4KSBmb3IgeCBpbiBoZWFkZXJzXQogICAgaGVhZGVyX2xpbmUgPSAifCAiICsgIiB8ICIuam9pbihoKSArICIgfCIKICAgIHNlcF9saW5lID0gInwgIiArICIgfCAiLmpvaW4oWyItLS0iXSAqIGxlbihoKSkgKyAiIHwiCiAgICByb3dfbGluZXMgPSBbXQogICAgZm9yIHIgaW4gcm93czoKICAgICAgICBjZWxscyA9IGxpc3QocikgKyBbIiJdICogKGxlbihoKSAtIGxlbihyKSkKICAgICAgICBjZWxscyA9IGNlbGxzWzogbGVuKGgpXQogICAgICAgIHJvd19saW5lcy5hcHBlbmQoInwgIiArICIgfCAiLmpvaW4oX3N0cmluZ2lmeV9jZWxsKGMpIGZvciBjIGluIGNlbGxzKSArICIgfCIpCiAgICByZXR1cm4gTWFya2Rvd24oIlxuIi5qb2luKFtoZWFkZXJfbGluZSwgc2VwX2xpbmUsICpyb3dfbGluZXNdKSArICJcbiIpCkBkYXRhY2xhc3MKY2xhc3MgTWFya2Rvd25CdWlsZGVyOgogICAgIiIiSW5jcmVtZW50YWxseSBidWlsZCBNYXJrZG93biB3aXRoIGNvbnZlbmllbmNlIGhlbHBlcnMuIiIiCgogICAgbGluZXM6IGxpc3Rbc3RyXSA9IGZpZWxkKGRlZmF1bHRfZmFjdG9yeT1saXN0KQoKICAgIGRlZiBhZGQoc2VsZiwgbWQ6IEFueSkgLT4gIk1hcmtkb3duQnVpbGRlciI6CiAgICAgICAgaWYgbWQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYKICAgICAgICB0ZXh0ID0gc3RyKG1kKQogICAgICAgIHNlbGYubGluZXMuZXh0ZW5kKHRleHQuc3BsaXRsaW5lcygpKQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIGFkZF9oZWFkaW5nKHNlbGYsIHRleHQ6IHN0ciwgbGV2ZWw6IGludCA9IDEpIC0+ICJNYXJrZG93bkJ1aWxkZXIiOgogICAgICAgIHJldHVybiBzZWxmLmFkZChoZWFkaW5nKHRleHQsIGxldmVsKSkKCiAgICBkZWYgYWRkX3BhcmFncmFwaChzZWxmLCB0ZXh0OiBzdHIpIC0+ICJNYXJrZG93bkJ1aWxkZXIiOgogICAgICAgIHJldHVybiBzZWxmLmFkZChwYXJhZ3JhcGgodGV4dCkpCgogICAgZGVmIGFkZF9idWxsZXRzKHNlbGYsIGl0ZW1zOiBJdGVyYWJsZVtBbnldLCAqLCBpbmRlbnQ6IGludCA9IDApIC0+ICJNYXJrZG93bkJ1aWxkZXIiOgogICAgICAgIHJldHVybiBzZWxmLmFkZChidWxsZXRfbGlzdChpdGVtcywgaW5kZW50PWluZGVudCkpCgogICAgZGVmIGFkZF9jb2RlKHNlbGYsIGNvZGU6IHN0ciwgbGFuZ3VhZ2U6IHN0ciA9ICIiKSAtPiAiTWFya2Rvd25CdWlsZGVyIjoKICAgICAgICByZXR1cm4gc2VsZi5hZGQoY29kZV9ibG9jayhjb2RlLCBsYW5ndWFnZSkpCgogICAgZGVmIGFkZF90YWJsZShzZWxmLCBoZWFkZXJzOiBTZXF1ZW5jZVtBbnldLCByb3dzOiBTZXF1ZW5jZVtTZXF1ZW5jZVtBbnldXSkgLT4gIk1hcmtkb3duQnVpbGRlciI6CiAgICAgICAgcmV0dXJuIHNlbGYuYWRkKHRhYmxlKGhlYWRlcnMsIHJvd3MpKQoKICAgIGRlZiBidWlsZChzZWxmKSAtPiBNYXJrZG93bjoKICAgICAgICAjIFByZXNlcnZlIGV4cGxpY2l0IGJsYW5rIGxpbmVzOyBhbHdheXMgZW5kIHdpdGggYSBuZXdsaW5lIGZvciBQT1NJWCBmcmllbmRsaW5lc3MuCiAgICAgICAgcmV0dXJuIE1hcmtkb3duKCJcbiIuam9pbihzZWxmLmxpbmVzKS5yc3RyaXAoIlxuIikgKyAiXG4iKQpkZWYgcmVuZGVyKG9iajogQW55KSAtPiBNYXJrZG93bjoKICAgICIiIkJlc3QtZWZmb3J0IGNvbnZlcnNpb24gb2YgY29tbW9uIFB5dGhvbiBvYmplY3RzIHRvIE1hcmtkb3duLgoKICAgIC0gc3RyIC8gTWFya2Rvd246IHJldHVybmVkIGFzLWlzCiAgICAtIE1hcHBpbmc6IHJlbmRlcnMgYXMgYSAyLWNvbHVtbiB0YWJsZSBvZiBrZXkvdmFsdWUKICAgIC0gU2VxdWVuY2U6IHJlbmRlcnMgYXMgYSBidWxsZXQgbGlzdAogICAgLSBPdGhlcjogY29lcmNlZCB0byBhIHBhcmFncmFwaAogICAgIiIiCiAgICBpZiBvYmogaXMgTm9uZToKICAgICAgICByZXR1cm4gTWFya2Rvd24oIiIpCiAgICBpZiBpc2luc3RhbmNlKG9iaiwgTWFya2Rvd24pOgogICAgICAgIHJldHVybiBvYmoKICAgIGlmIGlzaW5zdGFuY2Uob2JqLCBzdHIpOgogICAgICAgIHJldHVybiBNYXJrZG93bihvYmogaWYgb2JqLmVuZHN3aXRoKCJcbiIpIGVsc2Ugb2JqICsgIlxuIikKICAgIGlmIGlzaW5zdGFuY2Uob2JqLCBNYXBwaW5nKToKICAgICAgICBoZWFkZXJzID0gWyJrZXkiLCAidmFsdWUiXQogICAgICAgIHJvd3MgPSBbKGssIHYpIGZvciBrLCB2IGluIG9iai5pdGVtcygpXQogICAgICAgIHJldHVybiB0YWJsZShoZWFkZXJzLCByb3dzKQogICAgaWYgaXNpbnN0YW5jZShvYmosIChsaXN0LCB0dXBsZSwgc2V0LCBmcm96ZW5zZXQpKToKICAgICAgICByZXR1cm4gYnVsbGV0X2xpc3Qob2JqKQogICAgcmV0dXJuIHBhcmFncmFwaChzdHIob2JqKSkK\"}\nDIR_STATE:[\"src/cosmo_contracts/markdown.py\"]\n"
        }
      ]
    },
    {
      "id": "msg_0fc9d4e285493c15006949bfac112c8194aa4dc4c1e1dff5aa",
      "type": "message",
      "status": "completed",
      "content": [
        {
          "type": "output_text",
          "annotations": [],
          "logprobs": [],
          "text": "FILE_EXPORT:{\"path\":\"src/cosmo_contracts/markdown.py\",\"size\":4818,\"encoding\":\"base64\",\"sha256\":\"276a884c3c9f95b53ff76c08cb7a683f56fdf0b87799485bfd71fc5607964b27\",\"content\":\"IiIiY29zbW9fY29udHJhY3RzLm1hcmtkb3duCgpTbWFsbCwgZGVwZW5kZW5jeS1mcmVlIGhlbHBlcnMgZm9yIHByb2R1Y2luZyBHaXRIdWItZmxhdm91cmVkIE1hcmtkb3duLgoKVGhlIHByb2plY3QgaGlzdG9yaWNhbGx5IGV4cG9zZWQgdGhpcyBtb2R1bGUgYXMgYSBwdWJsaWMgZW50cnlwb2ludDsgdGhlIGdvYWwKaGVyZSBpcyB0byBrZWVwIGEgc3RhYmxlIGltcG9ydCBzdXJmYWNlIGFuZCBwcm92aWRlIGEgbWluaW1hbCBidXQgdXNlZnVsIEFQSS4KIiIiCmZyb20gX19mdXR1cmVfXyBpbXBvcnQgYW5ub3RhdGlvbnMKCmZyb20gZGF0YWNsYXNzZXMgaW1wb3J0IGRhdGFjbGFzcywgZmllbGQKZnJvbSB0eXBpbmcgaW1wb3J0IEFueSwgSXRlcmFibGUsIE1hcHBpbmcsIFNlcXVlbmNlCl9fYWxsX18gPSBbCiAgICAiTWFya2Rvd24iLAogICAgIk1hcmtkb3duQnVpbGRlciIsCiAgICAiZXNjYXBlX21hcmtkb3duIiwKICAgICJoZWFkaW5nIiwKICAgICJwYXJhZ3JhcGgiLAogICAgImJ1bGxldF9saXN0IiwKICAgICJjb2RlX2Jsb2NrIiwKICAgICJ0YWJsZSIsCiAgICAicmVuZGVyIiwKXQpjbGFzcyBNYXJrZG93bihzdHIpOgogICAgIiIiQSB0aGluIG1hcmtlciB0eXBlIGZvciBzdHJpbmdzIHRoYXQgY29udGFpbiBNYXJrZG93bi4iIiIKZGVmIGVzY2FwZV9tYXJrZG93bih0ZXh0OiBzdHIpIC0+IHN0cjoKICAgICIiIkVzY2FwZSBjaGFyYWN0ZXJzIHRoYXQgZnJlcXVlbnRseSBicmVhayBNYXJrZG93biByZW5kZXJpbmcuCgogICAgVGhpcyBpcyBpbnRlbnRpb25hbGx5IGNvbnNlcnZhdGl2ZSBhbmQgdGFyZ2V0cyBjb21tb24gaW5saW5lIGNvbnRleHRzLgogICAgIiIiCiAgICBpZiBub3QgdGV4dDoKICAgICAgICByZXR1cm4gIiIKICAgICMgRXNjYXBlIGJhY2tzbGFzaCBmaXJzdCB0byBhdm9pZCBkb3VibGUgZXNjYXBpbmcuCiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKCJcXCIsICJcXFxcIikKICAgIGZvciBjaCBpbiAoIioiLCAiXyIsICJgIiwgIlsiLCAiXSIsICI8IiwgIj4iLCAifCIpOgogICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoY2gsIGYiXFx7Y2h9IikKICAgIHJldHVybiB0ZXh0CmRlZiBoZWFkaW5nKHRleHQ6IHN0ciwgbGV2ZWw6IGludCA9IDEpIC0+IE1hcmtkb3duOgogICAgIiIiUmV0dXJuIGEgTWFya2Rvd24gaGVhZGluZy4iIiIKICAgIGx2bCA9IG1heCgxLCBtaW4oaW50KGxldmVsKSwgNikpCiAgICByZXR1cm4gTWFya2Rvd24oZiJ7JyMnICogbHZsfSB7dGV4dC5zdHJpcCgpfVxuIikKZGVmIHBhcmFncmFwaCh0ZXh0OiBzdHIpIC0+IE1hcmtkb3duOgogICAgIiIiUmV0dXJuIGEgTWFya2Rvd24gcGFyYWdyYXBoICh0ZXJtaW5hdGVkIHdpdGggYSBibGFuayBsaW5lKS4iIiIKICAgIHQgPSB0ZXh0LnN0cmlwKCkKICAgIHJldHVybiBNYXJrZG93bihmInt0fVxuXG4iIGlmIHQgZWxzZSAiXG4iKQpkZWYgYnVsbGV0X2xpc3QoaXRlbXM6IEl0ZXJhYmxlW0FueV0sICosIGluZGVudDogaW50ID0gMCkgLT4gTWFya2Rvd246CiAgICAiIiJSZW5kZXIgYW4gaXRlcmFibGUgYXMgYSBNYXJrZG93biBidWxsZXQgbGlzdC4iIiIKICAgIHBhZCA9ICIgIiAqIG1heCgwLCBpbnQoaW5kZW50KSkKICAgIGxpbmVzID0gW10KICAgIGZvciBpdGVtIGluIGl0ZW1zOgogICAgICAgIHMgPSBzdHIoaXRlbSkuc3RyaXAoKQogICAgICAgIGlmIG5vdCBzOgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGxpbmVzLmFwcGVuZChmIntwYWR9LSB7c30iKQogICAgcmV0dXJuIE1hcmtkb3duKCJcbiIuam9pbihsaW5lcykgKyAoIlxuIiBpZiBsaW5lcyBlbHNlICIiKSkKZGVmIGNvZGVfYmxvY2soY29kZTogc3RyLCBsYW5ndWFnZTogc3RyID0gIiIpIC0+IE1hcmtkb3duOgogICAgIiIiUmV0dXJuIGEgZmVuY2VkIGNvZGUgYmxvY2suIiIiCiAgICBsYW5nID0gbGFuZ3VhZ2Uuc3RyaXAoKQogICAgYm9keSA9IChjb2RlIG9yICIiKS5yc3RyaXAoIlxuIikKICAgIHJldHVybiBNYXJrZG93bihmImBgYHtsYW5nfVxue2JvZHl9XG5gYGBcbiIpCmRlZiBfc3RyaW5naWZ5X2NlbGwodmFsdWU6IEFueSkgLT4gc3RyOgogICAgaWYgdmFsdWUgaXMgTm9uZToKICAgICAgICByZXR1cm4gIiIKICAgIGlmIGlzaW5zdGFuY2UodmFsdWUsIE1hcmtkb3duKToKICAgICAgICByZXR1cm4gc3RyKHZhbHVlKS5zdHJpcCgpCiAgICByZXR1cm4gZXNjYXBlX21hcmtkb3duKHN0cih2YWx1ZSkpLnN0cmlwKCkKZGVmIHRhYmxlKGhlYWRlcnM6IFNlcXVlbmNlW0FueV0sIHJvd3M6IFNlcXVlbmNlW1NlcXVlbmNlW0FueV1dKSAtPiBNYXJrZG93bjoKICAgICIiIlJlbmRlciBhIHNpbXBsZSBHRk0gdGFibGUuCgogICAgQ2VsbHMgYXJlIGVzY2FwZWQgZm9yIHNhZmUgaW5saW5lIHJlbmRlcmluZy4KICAgICIiIgogICAgaWYgbm90IGhlYWRlcnM6CiAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiaGVhZGVycyBtdXN0IGJlIG5vbi1lbXB0eSIpCiAgICBoID0gW19zdHJpbmdpZnlfY2VsbCh4KSBmb3IgeCBpbiBoZWFkZXJzXQogICAgaGVhZGVyX2xpbmUgPSAifCAiICsgIiB8ICIuam9pbihoKSArICIgfCIKICAgIHNlcF9saW5lID0gInwgIiArICIgfCAiLmpvaW4oWyItLS0iXSAqIGxlbihoKSkgKyAiIHwiCiAgICByb3dfbGluZXMgPSBbXQogICAgZm9yIHIgaW4gcm93czoKICAgICAgICBjZWxscyA9IGxpc3QocikgKyBbIiJdICogKGxlbihoKSAtIGxlbihyKSkKICAgICAgICBjZWxscyA9IGNlbGxzWzogbGVuKGgpXQogICAgICAgIHJvd19saW5lcy5hcHBlbmQoInwgIiArICIgfCAiLmpvaW4oX3N0cmluZ2lmeV9jZWxsKGMpIGZvciBjIGluIGNlbGxzKSArICIgfCIpCiAgICByZXR1cm4gTWFya2Rvd24oIlxuIi5qb2luKFtoZWFkZXJfbGluZSwgc2VwX2xpbmUsICpyb3dfbGluZXNdKSArICJcbiIpCkBkYXRhY2xhc3MKY2xhc3MgTWFya2Rvd25CdWlsZGVyOgogICAgIiIiSW5jcmVtZW50YWxseSBidWlsZCBNYXJrZG93biB3aXRoIGNvbnZlbmllbmNlIGhlbHBlcnMuIiIiCgogICAgbGluZXM6IGxpc3Rbc3RyXSA9IGZpZWxkKGRlZmF1bHRfZmFjdG9yeT1saXN0KQoKICAgIGRlZiBhZGQoc2VsZiwgbWQ6IEFueSkgLT4gIk1hcmtkb3duQnVpbGRlciI6CiAgICAgICAgaWYgbWQgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuIHNlbGYKICAgICAgICB0ZXh0ID0gc3RyKG1kKQogICAgICAgIHNlbGYubGluZXMuZXh0ZW5kKHRleHQuc3BsaXRsaW5lcygpKQogICAgICAgIHJldHVybiBzZWxmCgogICAgZGVmIGFkZF9oZWFkaW5nKHNlbGYsIHRleHQ6IHN0ciwgbGV2ZWw6IGludCA9IDEpIC0+ICJNYXJrZG93bkJ1aWxkZXIiOgogICAgICAgIHJldHVybiBzZWxmLmFkZChoZWFkaW5nKHRleHQsIGxldmVsKSkKCiAgICBkZWYgYWRkX3BhcmFncmFwaChzZWxmLCB0ZXh0OiBzdHIpIC0+ICJNYXJrZG93bkJ1aWxkZXIiOgogICAgICAgIHJldHVybiBzZWxmLmFkZChwYXJhZ3JhcGgodGV4dCkpCgogICAgZGVmIGFkZF9idWxsZXRzKHNlbGYsIGl0ZW1zOiBJdGVyYWJsZVtBbnldLCAqLCBpbmRlbnQ6IGludCA9IDApIC0+ICJNYXJrZG93bkJ1aWxkZXIiOgogICAgICAgIHJldHVybiBzZWxmLmFkZChidWxsZXRfbGlzdChpdGVtcywgaW5kZW50PWluZGVudCkpCgogICAgZGVmIGFkZF9jb2RlKHNlbGYsIGNvZGU6IHN0ciwgbGFuZ3VhZ2U6IHN0ciA9ICIiKSAtPiAiTWFya2Rvd25CdWlsZGVyIjoKICAgICAgICByZXR1cm4gc2VsZi5hZGQoY29kZV9ibG9jayhjb2RlLCBsYW5ndWFnZSkpCgogICAgZGVmIGFkZF90YWJsZShzZWxmLCBoZWFkZXJzOiBTZXF1ZW5jZVtBbnldLCByb3dzOiBTZXF1ZW5jZVtTZXF1ZW5jZVtBbnldXSkgLT4gIk1hcmtkb3duQnVpbGRlciI6CiAgICAgICAgcmV0dXJuIHNlbGYuYWRkKHRhYmxlKGhlYWRlcnMsIHJvd3MpKQoKICAgIGRlZiBidWlsZChzZWxmKSAtPiBNYXJrZG93bjoKICAgICAgICAjIFByZXNlcnZlIGV4cGxpY2l0IGJsYW5rIGxpbmVzOyBhbHdheXMgZW5kIHdpdGggYSBuZXdsaW5lIGZvciBQT1NJWCBmcmllbmRsaW5lc3MuCiAgICAgICAgcmV0dXJuIE1hcmtkb3duKCJcbiIuam9pbihzZWxmLmxpbmVzKS5yc3RyaXAoIlxuIikgKyAiXG4iKQpkZWYgcmVuZGVyKG9iajogQW55KSAtPiBNYXJrZG93bjoKICAgICIiIkJlc3QtZWZmb3J0IGNvbnZlcnNpb24gb2YgY29tbW9uIFB5dGhvbiBvYmplY3RzIHRvIE1hcmtkb3duLgoKICAgIC0gc3RyIC8gTWFya2Rvd246IHJldHVybmVkIGFzLWlzCiAgICAtIE1hcHBpbmc6IHJlbmRlcnMgYXMgYSAyLWNvbHVtbiB0YWJsZSBvZiBrZXkvdmFsdWUKICAgIC0gU2VxdWVuY2U6IHJlbmRlcnMgYXMgYSBidWxsZXQgbGlzdAogICAgLSBPdGhlcjogY29lcmNlZCB0byBhIHBhcmFncmFwaAogICAgIiIiCiAgICBpZiBvYmogaXMgTm9uZToKICAgICAgICByZXR1cm4gTWFya2Rvd24oIiIpCiAgICBpZiBpc2luc3RhbmNlKG9iaiwgTWFya2Rvd24pOgogICAgICAgIHJldHVybiBvYmoKICAgIGlmIGlzaW5zdGFuY2Uob2JqLCBzdHIpOgogICAgICAgIHJldHVybiBNYXJrZG93bihvYmogaWYgb2JqLmVuZHN3aXRoKCJcbiIpIGVsc2Ugb2JqICsgIlxuIikKICAgIGlmIGlzaW5zdGFuY2Uob2JqLCBNYXBwaW5nKToKICAgICAgICBoZWFkZXJzID0gWyJrZXkiLCAidmFsdWUiXQogICAgICAgIHJvd3MgPSBbKGssIHYpIGZvciBrLCB2IGluIG9iai5pdGVtcygpXQogICAgICAgIHJldHVybiB0YWJsZShoZWFkZXJzLCByb3dzKQogICAgaWYgaXNpbnN0YW5jZShvYmosIChsaXN0LCB0dXBsZSwgc2V0LCBmcm96ZW5zZXQpKToKICAgICAgICByZXR1cm4gYnVsbGV0X2xpc3Qob2JqKQogICAgcmV0dXJuIHBhcmFncmFwaChzdHIob2JqKSkK\"}\nDIR_STATE:[\"src/cosmo_contracts/markdown.py\"]"
        }
      ],
      "role": "assistant"
    }
  ],
  "codeResults": []
}