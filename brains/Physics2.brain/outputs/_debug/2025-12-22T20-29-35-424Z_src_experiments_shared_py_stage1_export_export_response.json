{
  "content": "FILE_EXPORT:{\"path\":\"src/experiments/shared.py\",\"size\":7062,\"encoding\":\"base64\",\"sha256\":\"052ecfd2ab3f9ffc29e0f3f6370b6a5301285c25729e146dbb69c7792011cbad\",\"content\":\"IiIiU2hhcmVkIHV0aWxpdGllcyBmb3IgdGhlIGV4cGVyaW1lbnQgc3VpdGUuCgpUaGlzIG1vZHVsZSBpcyBpbnRlbnRpb25hbGx5IGxpZ2h0d2VpZ2h0IChzdGQtbGliICsgbnVtcHkpIGFuZCBwcm92aWRlczoKLSBEZXRlcm1pbmlzdGljIFJORyBzZWVkaW5nIGFjcm9zcyBjb21tb24gbGlicmFyaWVzLgotIFNpbXBsZSwgcmVwcm9kdWNpYmxlIHJlc3VsdCBzYXZpbmcgKEpTT04vTlBaKSB3aXRoIGF0b21pYyB3cml0ZXMuCi0gU21hbGwgdGFibGUvbWFya2Rvd24gZm9ybWF0dGluZyBoZWxwZXJzLgotIENhY2hlZCBkaWFnbm9zdGljcyAoZS5nLiwgZW50cm9weS9wdXJpdHkpIGtleWVkIGJ5IGFycmF5IGNvbnRlbnQuCiIiIgoKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aApmcm9tIHR5cGluZyBpbXBvcnQgQW55LCBDYWxsYWJsZSwgRGljdCwgSXRlcmFibGUsIExpc3QsIE1hcHBpbmcsIE11dGFibGVNYXBwaW5nLCBPcHRpb25hbCwgU2VxdWVuY2UsIFR1cGxlLCBVbmlvbgppbXBvcnQgZnVuY3Rvb2xzCmltcG9ydCBoYXNobGliCmltcG9ydCBqc29uCmltcG9ydCBtYXRoCmltcG9ydCBvcwppbXBvcnQgcmFuZG9tCgppbXBvcnQgbnVtcHkgYXMgbnAKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFJORyBzZWVkaW5nCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBzZWVkX2V2ZXJ5dGhpbmcoc2VlZDogaW50KSAtPiBucC5yYW5kb20uR2VuZXJhdG9yOgogICAgIiIiU2VlZCBweXRob24vcmFuZG9tICsgbnVtcHkgYW5kIHJldHVybiBhIGZyZXNoIGRlZmF1bHQgbnVtcHkgR2VuZXJhdG9yLiIiIgogICAgc2VlZCA9IGludChzZWVkKQogICAgcmFuZG9tLnNlZWQoc2VlZCkKICAgIG5wLnJhbmRvbS5zZWVkKHNlZWQpICAjIGxlZ2FjeSBnbG9iYWwgUk5HIChzb21lIGxpYnMgc3RpbGwgdXNlIGl0KQogICAgb3MuZW52aXJvblsiUFlUSE9OSEFTSFNFRUQiXSA9IHN0cihzZWVkKQogICAgdHJ5OgogICAgICAgIGltcG9ydCB0b3JjaCAgIyB0eXBlOiBpZ25vcmUKICAgICAgICB0b3JjaC5tYW51YWxfc2VlZChzZWVkKQogICAgICAgIGlmIHRvcmNoLmN1ZGEuaXNfYXZhaWxhYmxlKCk6CiAgICAgICAgICAgIHRvcmNoLmN1ZGEubWFudWFsX3NlZWRfYWxsKHNlZWQpCiAgICAgICAgdG9yY2guYmFja2VuZHMuY3Vkbm4uZGV0ZXJtaW5pc3RpYyA9IFRydWUgICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF0KICAgICAgICB0b3JjaC5iYWNrZW5kcy5jdWRubi5iZW5jaG1hcmsgPSBGYWxzZSAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICBwYXNzCiAgICByZXR1cm4gbnAucmFuZG9tLmRlZmF1bHRfcm5nKHNlZWQpCgoKZGVmIHJuZ19mcm9tX3NlZWQoc2VlZDogT3B0aW9uYWxbaW50XSA9IE5vbmUpIC0+IG5wLnJhbmRvbS5HZW5lcmF0b3I6CiAgICAiIiJDb25zdHJ1Y3QgYSBudW1weSBHZW5lcmF0b3IgKHNlZWQ9Tm9uZSB1c2VzIGVudHJvcHkpLiIiIgogICAgcmV0dXJuIG5wLnJhbmRvbS5kZWZhdWx0X3JuZyhOb25lIGlmIHNlZWQgaXMgTm9uZSBlbHNlIGludChzZWVkKSkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFJlc3VsdCBzYXZpbmcgKGF0b21pYykKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIGVuc3VyZV9kaXIocGF0aDogVW5pb25bc3RyLCBQYXRoXSkgLT4gUGF0aDoKICAgIHAgPSBQYXRoKHBhdGgpCiAgICBwLm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHJldHVybiBwCgoKZGVmIF9hdG9taWNfd3JpdGVfYnl0ZXMocGF0aDogUGF0aCwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6CiAgICBwYXRoLnBhcmVudC5ta2RpcihwYXJlbnRzPVRydWUsIGV4aXN0X29rPVRydWUpCiAgICB0bXAgPSBwYXRoLndpdGhfc3VmZml4KHBhdGguc3VmZml4ICsgIi50bXAiKQogICAgdG1wLndyaXRlX2J5dGVzKGRhdGEpCiAgICBvcy5yZXBsYWNlKHRtcCwgcGF0aCkKCgpkZWYgc2F2ZV9qc29uKHBhdGg6IFVuaW9uW3N0ciwgUGF0aF0sIG9iajogQW55LCAqLCBpbmRlbnQ6IGludCA9IDIpIC0+IFBhdGg6CiAgICBwID0gUGF0aChwYXRoKQogICAgZGF0YSA9IGpzb24uZHVtcHMob2JqLCBpbmRlbnQ9aW5kZW50LCBzb3J0X2tleXM9VHJ1ZSwgZGVmYXVsdD1fanNvbl9kZWZhdWx0KS5lbmNvZGUoInV0Zi04IikKICAgIF9hdG9taWNfd3JpdGVfYnl0ZXMocCwgZGF0YSkKICAgIHJldHVybiBwCgoKZGVmIHNhdmVfbnB6KHBhdGg6IFVuaW9uW3N0ciwgUGF0aF0sICoqYXJyYXlzOiBucC5uZGFycmF5KSAtPiBQYXRoOgogICAgcCA9IFBhdGgocGF0aCkKICAgIHAucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHRtcCA9IHAud2l0aF9zdWZmaXgocC5zdWZmaXggKyAiLnRtcCIpCiAgICBucC5zYXZlel9jb21wcmVzc2VkKHRtcCwgKiphcnJheXMpCiAgICBvcy5yZXBsYWNlKHRtcCwgcCkKICAgIHJldHVybiBwCgoKZGVmIF9qc29uX2RlZmF1bHQoeDogQW55KSAtPiBBbnk6CiAgICBpZiBpc2luc3RhbmNlKHgsIChucC5pbnRlZ2VyLCBucC5pbnQ2NCkpOgogICAgICAgIHJldHVybiBpbnQoeCkKICAgIGlmIGlzaW5zdGFuY2UoeCwgKG5wLmZsb2F0aW5nLCBucC5mbG9hdDY0KSk6CiAgICAgICAgcmV0dXJuIGZsb2F0KHgpCiAgICBpZiBpc2luc3RhbmNlKHgsIG5wLm5kYXJyYXkpOgogICAgICAgIHJldHVybiB7Il9fbmRhcnJheV9fIjogVHJ1ZSwgInNoYXBlIjogbGlzdCh4LnNoYXBlKSwgImR0eXBlIjogc3RyKHguZHR5cGUpfQogICAgaWYgaGFzYXR0cih4LCAiX19kaWN0X18iKToKICAgICAgICByZXR1cm4geC5fX2RpY3RfXwogICAgcmV0dXJuIHN0cih4KQoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUpCmNsYXNzIFJ1blBhdGhzOgogICAgcm9vdDogUGF0aAogICAgb3V0X2RpcjogUGF0aAogICAgY2FjaGVfZGlyOiBQYXRoCgoKZGVmIG1ha2VfcnVuX3BhdGhzKHJvb3Q6IFVuaW9uW3N0ciwgUGF0aF0sIGV4cGVyaW1lbnQ6IHN0cikgLT4gUnVuUGF0aHM6CiAgICByb290ID0gUGF0aChyb290KQogICAgb3V0X2RpciA9IGVuc3VyZV9kaXIocm9vdCAvICJyZXN1bHRzIiAvIGV4cGVyaW1lbnQpCiAgICBjYWNoZV9kaXIgPSBlbnN1cmVfZGlyKHJvb3QgLyAiLmNhY2hlIiAvIGV4cGVyaW1lbnQpCiAgICByZXR1cm4gUnVuUGF0aHMocm9vdD1yb290LCBvdXRfZGlyPW91dF9kaXIsIGNhY2hlX2Rpcj1jYWNoZV9kaXIpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBUYWJsZSBmb3JtYXR0aW5nCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBmb3JtYXRfdGFibGUocm93czogU2VxdWVuY2VbTWFwcGluZ1tzdHIsIEFueV1dLCBjb2x1bW5zOiBPcHRpb25hbFtTZXF1ZW5jZVtzdHJdXSA9IE5vbmUsICosCiAgICAgICAgICAgICAgICAgZmxvYXRmbXQ6IHN0ciA9ICIuNmciKSAtPiBzdHI6CiAgICAiIiJSZXR1cm4gYSBHaXRIdWItZmxhdm9yZWQgbWFya2Rvd24gdGFibGUgZnJvbSBhIGxpc3Qgb2YgZGljdC1saWtlIHJvd3MuIiIiCiAgICBpZiBub3Qgcm93czoKICAgICAgICByZXR1cm4gIiIKICAgIGNvbHMgPSBsaXN0KGNvbHVtbnMpIGlmIGNvbHVtbnMgaXMgbm90IE5vbmUgZWxzZSBzb3J0ZWQoe2sgZm9yIHIgaW4gcm93cyBmb3IgayBpbiByLmtleXMoKX0pCiAgICBkZWYgZm10KHY6IEFueSkgLT4gc3RyOgogICAgICAgIGlmIHYgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuICIiCiAgICAgICAgaWYgaXNpbnN0YW5jZSh2LCAoZmxvYXQsIG5wLmZsb2F0aW5nKSk6CiAgICAgICAgICAgIHJldHVybiBmb3JtYXQoZmxvYXQodiksIGZsb2F0Zm10KQogICAgICAgIHJldHVybiBzdHIodikKICAgIGhlYWRlciA9ICJ8ICIgKyAiIHwgIi5qb2luKGNvbHMpICsgIiB8IgogICAgc2VwID0gInwgIiArICIgfCAiLmpvaW4oWyItLS0iXSAqIGxlbihjb2xzKSkgKyAiIHwiCiAgICBib2R5ID0gWyJ8ICIgKyAiIHwgIi5qb2luKGZtdChyLmdldChjLCAiIikpIGZvciBjIGluIGNvbHMpICsgIiB8IiBmb3IgciBpbiByb3dzXQogICAgcmV0dXJuICJcbiIuam9pbihbaGVhZGVyLCBzZXBdICsgYm9keSkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIENhY2hlZCBkaWFnbm9zdGljcwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX2Fycl9rZXkoYTogbnAubmRhcnJheSwgKiwgZGlnZXN0X3NpemU6IGludCA9IDE2KSAtPiBUdXBsZVtzdHIsIFR1cGxlW2ludCwgLi4uXSwgc3RyXToKICAgIGEgPSBucC5hc2NvbnRpZ3VvdXNhcnJheShhKQogICAgaCA9IGhhc2hsaWIuYmxha2UyYihhLnZpZXcobnAudWludDgpLCBkaWdlc3Rfc2l6ZT1kaWdlc3Rfc2l6ZSkuaGV4ZGlnZXN0KCkKICAgIHJldHVybiBoLCB0dXBsZShhLnNoYXBlKSwgc3RyKGEuZHR5cGUpCgoKQGZ1bmN0b29scy5scnVfY2FjaGUobWF4c2l6ZT0yMDQ4KQpkZWYgX2NhY2hlZF9lbnRyb3B5X2Zyb21fa2V5KGtleTogVHVwbGVbc3RyLCBUdXBsZVtpbnQsIC4uLl0sIHN0cl0sIGxvZ19iYXNlOiBmbG9hdCkgLT4gZmxvYXQ6CiAgICAjIEtleS1vbmx5IGNhY2hlOyB0aGUgYWN0dWFsIGFycmF5IGNvbnRlbnQgaXMgaW5jb3Jwb3JhdGVkIHZpYSB0aGUgaGFzaC4KICAgICMgQ2FsbGVycyBzaG91bGQgY29tcHV0ZSB0aGUgZW50cm9weSBhbmQgdGhlbiBzdG9yZSBpdCB2aWEgdGhpcyBzaGltLgogICAgcmFpc2UgUnVudGltZUVycm9yKCJpbnRlcm5hbCBjYWNoZSBzaGltIG11c3Qgbm90IGJlIGNhbGxlZCBkaXJlY3RseSIpCgoKZGVmIF9jYWNoZV9zZXQoa2V5OiBUdXBsZVtzdHIsIFR1cGxlW2ludCwgLi4uXSwgc3RyXSwgbG9nX2Jhc2U6IGZsb2F0LCB2YWx1ZTogZmxvYXQpIC0+IGZsb2F0OgogICAgIyBBYnVzZSBscnVfY2FjaGUgYnkgbWVtb2l6aW5nIGEgY2xvc3VyZS1mcmVlIGZ1bmN0aW9uOyB3ZSBzdG9yZSB2aWEgX193cmFwcGVkX18uCiAgICB0cnk6CiAgICAgICAgX2NhY2hlZF9lbnRyb3B5X2Zyb21fa2V5LmNhY2hlX2NsZWFyICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHBhc3MKICAgICMgSW1wbGVtZW50IG91ciBvd24gdGlueSBkaWN0IG9uIHRoZSBmdW5jdGlvbiBvYmplY3QgdG8gYXZvaWQgZnJhZ2lsZSBscnVfY2FjaGUgaGFja3MuCiAgICBzdG9yZTogRGljdFtUdXBsZVtUdXBsZVtzdHIsIFR1cGxlW2ludCwgLi4uXSwgc3RyXSwgZmxvYXRdLCBmbG9hdF0gPSBnZXRhdHRyKF9jYWNoZV9zZXQsICJfc3RvcmUiLCB7fSkKICAgIHN0b3JlWyhrZXksIGxvZ19iYXNlKV0gPSBmbG9hdCh2YWx1ZSkKICAgIHNldGF0dHIoX2NhY2hlX3NldCwgIl9zdG9yZSIsIHN0b3JlKQogICAgcmV0dXJuIGZsb2F0KHZhbHVlKQoKCmRlZiBfY2FjaGVfZ2V0KGtleTogVHVwbGVbc3RyLCBUdXBsZVtpbnQsIC4uLl0sIHN0cl0sIGxvZ19iYXNlOiBmbG9hdCkgLT4gT3B0aW9uYWxbZmxvYXRdOgogICAgc3RvcmU6IERpY3RbVHVwbGVbVHVwbGVbc3RyLCBUdXBsZVtpbnQsIC4uLl0sIHN0cl0sIGZsb2F0XSwgZmxvYXRdID0gZ2V0YXR0cihfY2FjaGVfc2V0LCAiX3N0b3JlIiwge30pCiAgICByZXR1cm4gc3RvcmUuZ2V0KChrZXksIGxvZ19iYXNlKSkKCgpkZWYgc3BlY3RyYWxfZW50cm9weShwOiBucC5uZGFycmF5LCAqLCBiYXNlOiBmbG9hdCA9IDIuMCwgZXBzOiBmbG9hdCA9IDFlLTE1KSAtPiBmbG9hdDoKICAgICIiIlNoYW5ub24gZW50cm9weSBvZiBhIHByb2JhYmlsaXR5IHZlY3RvciAobm9ybWFsaXplZCBpZiBuZWVkZWQpLiIiIgogICAgcCA9IG5wLmFzYXJyYXkocCwgZHR5cGU9ZmxvYXQpLnJhdmVsKCkKICAgIHMgPSBmbG9hdChwLnN1bSgpKQogICAgaWYgcyA8PSAwOgogICAgICAgIHJldHVybiAwLjAKICAgIHAgPSBwIC8gcwogICAgcCA9IG5wLmNsaXAocCwgZXBzLCAxLjApCiAgICByZXR1cm4gZmxvYXQoLShwICogKG5wLmxvZyhwKSAvIG1hdGgubG9nKGJhc2UpKSkuc3VtKCkpCgoKZGVmIHZvbl9uZXVtYW5uX2VudHJvcHkocmhvOiBucC5uZGFycmF5LCAqLCBiYXNlOiBmbG9hdCA9IDIuMCwgZXBzOiBmbG9hdCA9IDFlLTE1KSAtPiBmbG9hdDoKICAgICIiIlZvbiBOZXVtYW5uIGVudHJvcHkgUyjPgSkgPSAtVHIgz4EgbG9nIM+BIGZvciBhIGRlbnNpdHkgbWF0cml4LiIiIgogICAgcmhvID0gbnAuYXNhcnJheShyaG8pCiAgICBrZXkgPSBfYXJyX2tleShyaG8pCiAgICBjYWNoZWQgPSBfY2FjaGVfZ2V0KGtleSwgYmFzZSkKICAgIGlmIGNhY2hlZCBpcyBub3QgTm9uZToKICAgICAgICByZXR1cm4gY2FjaGVkCiAgICAjIEhlcm1pdGl6ZSBmb3IgbnVtZXJpY2FsIHN0YWJpbGl0eS4KICAgIHIgPSAocmhvICsgcmhvLmNvbwooKS5UKSAvIDIuMAogICAgZXZhbHMgPSBucC5saW5hbGcuZWlndmFsc2gocikKICAgIGV2YWxzID0gbnAuY2xpcChucC5yZWFsKGV2YWxzKSwgMC4wLCAxLjApCiAgICB2YWwgPSBzcGVjdHJhbF9lbnRyb3B5KGV2YWxzLCBiYXNlPWJhc2UsIGVwcz1lcHMpCiAgICByZXR1cm4gX2NhY2hlX3NldChrZXksIGJhc2UsIHZhbCkKCgpkZWYgcHVyaXR5KHJobzogbnAubmRhcnJheSkgLT4gZmxvYXQ6CiAgICAiIiJQdXJpdHkgVHIoz4HCsikuIiIiCiAgICByID0gbnAuYXNhcnJheShyaG8pCiAgICByZXR1cm4gZmxvYXQobnAucmVhbChucC50cmFjZShyIEAgcikpKQoKCmRlZiBwYXJ0aWNpcGF0aW9uX3JhdGlvKHZlYzogbnAubmRhcnJheSwgKiwgZXBzOiBmbG9hdCA9IDFlLTE1KSAtPiBmbG9hdDoKICAgICIiIkVmZmVjdGl2ZSBudW1iZXIgb2YgY29tcG9uZW50czogMSAvIHN1bSB8dl9pfF40IGZvciBub3JtYWxpemVkIHZlY3RvcnMuIiIiCiAgICB2ID0gbnAuYXNhcnJheSh2ZWMpLnJhdmVsKCkKICAgIG5ybSA9IG5wLmxpbmFsZy5ub3JtKHYpCiAgICBpZiBucm0gPD0gZXBzOgogICAgICAgIHJldHVybiAwLjAKICAgIHYgPSB2IC8gbnJtCiAgICByZXR1cm4gZmxvYXQoMS4wIC8gbnAuc3VtKG5wLmFicyh2KSAqKiA0KSkK\"}\nDIR_STATE:[\"src/experiments/__init__.py\",\"src/experiments/diagnostics.py\",\"src/experiments/random_circuit_entanglement.py\",\"src/experiments/registry.py\",\"src/experiments/shared.py\",\"src/experiments/symbolic_rg_flow.py\",\"src/experiments/toy_lattice_decoherence.py\"]",
  "reasoning": "",
  "responseId": "resp_0540c5fc8e04a545006949aca027348193b57ecac6da3c1d93",
  "model": "gpt-5.2-2025-12-11",
  "usage": {
    "input_tokens": 7456,
    "input_tokens_details": {
      "cached_tokens": 0
    },
    "output_tokens": 6426,
    "output_tokens_details": {
      "reasoning_tokens": 33
    },
    "total_tokens": 13882
  },
  "hadError": false,
  "errorType": null,
  "webSearchSources": [],
  "citations": [],
  "output": [
    {
      "id": "rs_0540c5fc8e04a545006949aca0e21c8193bb86a02c090e15e0",
      "type": "reasoning",
      "summary": []
    },
    {
      "id": "ci_0540c5fc8e04a545006949aca1945481938daa297c9c4a8049",
      "type": "code_interpreter_call",
      "status": "completed",
      "code": "from pathlib import Path\nimport base64, json, hashlib, gzip\n\ntarget_path = Path('/mnt/data').joinpath('src/experiments/shared.py')\nassert target_path.is_file(), 'Expected src/experiments/shared.py to exist before export'\ndata = target_path.read_bytes()\npayload = {\n  'path': 'src/experiments/shared.py',\n  'size': len(data),\n  'encoding': 'base64',\n  'sha256': hashlib.sha256(data).hexdigest(),\n  'content': None\n}\nif len(data) > 20000:\n    compressed = gzip.compress(data)\n    payload['encoding'] = 'gzip+base64'\n    payload['content'] = base64.b64encode(compressed).decode('ascii')\nelse:\n    payload['content'] = base64.b64encode(data).decode('ascii')\n\nprint('FILE_EXPORT:' + json.dumps(payload, separators=(',', ':')))\nprint('DIR_STATE:' + json.dumps(sorted(str(p.relative_to(Path(\"/mnt/data\"))) for p in target_path.parent.glob('*') if p.is_file())))",
      "container_id": "cntr_6949aa2cd9908190a540c44a4880beb40f550cedb5ceca86",
      "outputs": [
        {
          "type": "logs",
          "logs": "FILE_EXPORT:{\"path\":\"src/experiments/shared.py\",\"size\":7062,\"encoding\":\"base64\",\"sha256\":\"052ecfd2ab3f9ffc29e0f3f6370b6a5301285c25729e146dbb69c7792011cbad\",\"content\":\"IiIiU2hhcmVkIHV0aWxpdGllcyBmb3IgdGhlIGV4cGVyaW1lbnQgc3VpdGUuCgpUaGlzIG1vZHVsZSBpcyBpbnRlbnRpb25hbGx5IGxpZ2h0d2VpZ2h0IChzdGQtbGliICsgbnVtcHkpIGFuZCBwcm92aWRlczoKLSBEZXRlcm1pbmlzdGljIFJORyBzZWVkaW5nIGFjcm9zcyBjb21tb24gbGlicmFyaWVzLgotIFNpbXBsZSwgcmVwcm9kdWNpYmxlIHJlc3VsdCBzYXZpbmcgKEpTT04vTlBaKSB3aXRoIGF0b21pYyB3cml0ZXMuCi0gU21hbGwgdGFibGUvbWFya2Rvd24gZm9ybWF0dGluZyBoZWxwZXJzLgotIENhY2hlZCBkaWFnbm9zdGljcyAoZS5nLiwgZW50cm9weS9wdXJpdHkpIGtleWVkIGJ5IGFycmF5IGNvbnRlbnQuCiIiIgoKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aApmcm9tIHR5cGluZyBpbXBvcnQgQW55LCBDYWxsYWJsZSwgRGljdCwgSXRlcmFibGUsIExpc3QsIE1hcHBpbmcsIE11dGFibGVNYXBwaW5nLCBPcHRpb25hbCwgU2VxdWVuY2UsIFR1cGxlLCBVbmlvbgppbXBvcnQgZnVuY3Rvb2xzCmltcG9ydCBoYXNobGliCmltcG9ydCBqc29uCmltcG9ydCBtYXRoCmltcG9ydCBvcwppbXBvcnQgcmFuZG9tCgppbXBvcnQgbnVtcHkgYXMgbnAKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFJORyBzZWVkaW5nCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBzZWVkX2V2ZXJ5dGhpbmcoc2VlZDogaW50KSAtPiBucC5yYW5kb20uR2VuZXJhdG9yOgogICAgIiIiU2VlZCBweXRob24vcmFuZG9tICsgbnVtcHkgYW5kIHJldHVybiBhIGZyZXNoIGRlZmF1bHQgbnVtcHkgR2VuZXJhdG9yLiIiIgogICAgc2VlZCA9IGludChzZWVkKQogICAgcmFuZG9tLnNlZWQoc2VlZCkKICAgIG5wLnJhbmRvbS5zZWVkKHNlZWQpICAjIGxlZ2FjeSBnbG9iYWwgUk5HIChzb21lIGxpYnMgc3RpbGwgdXNlIGl0KQogICAgb3MuZW52aXJvblsiUFlUSE9OSEFTSFNFRUQiXSA9IHN0cihzZWVkKQogICAgdHJ5OgogICAgICAgIGltcG9ydCB0b3JjaCAgIyB0eXBlOiBpZ25vcmUKICAgICAgICB0b3JjaC5tYW51YWxfc2VlZChzZWVkKQogICAgICAgIGlmIHRvcmNoLmN1ZGEuaXNfYXZhaWxhYmxlKCk6CiAgICAgICAgICAgIHRvcmNoLmN1ZGEubWFudWFsX3NlZWRfYWxsKHNlZWQpCiAgICAgICAgdG9yY2guYmFja2VuZHMuY3Vkbm4uZGV0ZXJtaW5pc3RpYyA9IFRydWUgICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF0KICAgICAgICB0b3JjaC5iYWNrZW5kcy5jdWRubi5iZW5jaG1hcmsgPSBGYWxzZSAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICBwYXNzCiAgICByZXR1cm4gbnAucmFuZG9tLmRlZmF1bHRfcm5nKHNlZWQpCgoKZGVmIHJuZ19mcm9tX3NlZWQoc2VlZDogT3B0aW9uYWxbaW50XSA9IE5vbmUpIC0+IG5wLnJhbmRvbS5HZW5lcmF0b3I6CiAgICAiIiJDb25zdHJ1Y3QgYSBudW1weSBHZW5lcmF0b3IgKHNlZWQ9Tm9uZSB1c2VzIGVudHJvcHkpLiIiIgogICAgcmV0dXJuIG5wLnJhbmRvbS5kZWZhdWx0X3JuZyhOb25lIGlmIHNlZWQgaXMgTm9uZSBlbHNlIGludChzZWVkKSkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFJlc3VsdCBzYXZpbmcgKGF0b21pYykKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIGVuc3VyZV9kaXIocGF0aDogVW5pb25bc3RyLCBQYXRoXSkgLT4gUGF0aDoKICAgIHAgPSBQYXRoKHBhdGgpCiAgICBwLm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHJldHVybiBwCgoKZGVmIF9hdG9taWNfd3JpdGVfYnl0ZXMocGF0aDogUGF0aCwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6CiAgICBwYXRoLnBhcmVudC5ta2RpcihwYXJlbnRzPVRydWUsIGV4aXN0X29rPVRydWUpCiAgICB0bXAgPSBwYXRoLndpdGhfc3VmZml4KHBhdGguc3VmZml4ICsgIi50bXAiKQogICAgdG1wLndyaXRlX2J5dGVzKGRhdGEpCiAgICBvcy5yZXBsYWNlKHRtcCwgcGF0aCkKCgpkZWYgc2F2ZV9qc29uKHBhdGg6IFVuaW9uW3N0ciwgUGF0aF0sIG9iajogQW55LCAqLCBpbmRlbnQ6IGludCA9IDIpIC0+IFBhdGg6CiAgICBwID0gUGF0aChwYXRoKQogICAgZGF0YSA9IGpzb24uZHVtcHMob2JqLCBpbmRlbnQ9aW5kZW50LCBzb3J0X2tleXM9VHJ1ZSwgZGVmYXVsdD1fanNvbl9kZWZhdWx0KS5lbmNvZGUoInV0Zi04IikKICAgIF9hdG9taWNfd3JpdGVfYnl0ZXMocCwgZGF0YSkKICAgIHJldHVybiBwCgoKZGVmIHNhdmVfbnB6KHBhdGg6IFVuaW9uW3N0ciwgUGF0aF0sICoqYXJyYXlzOiBucC5uZGFycmF5KSAtPiBQYXRoOgogICAgcCA9IFBhdGgocGF0aCkKICAgIHAucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHRtcCA9IHAud2l0aF9zdWZmaXgocC5zdWZmaXggKyAiLnRtcCIpCiAgICBucC5zYXZlel9jb21wcmVzc2VkKHRtcCwgKiphcnJheXMpCiAgICBvcy5yZXBsYWNlKHRtcCwgcCkKICAgIHJldHVybiBwCgoKZGVmIF9qc29uX2RlZmF1bHQoeDogQW55KSAtPiBBbnk6CiAgICBpZiBpc2luc3RhbmNlKHgsIChucC5pbnRlZ2VyLCBucC5pbnQ2NCkpOgogICAgICAgIHJldHVybiBpbnQoeCkKICAgIGlmIGlzaW5zdGFuY2UoeCwgKG5wLmZsb2F0aW5nLCBucC5mbG9hdDY0KSk6CiAgICAgICAgcmV0dXJuIGZsb2F0KHgpCiAgICBpZiBpc2luc3RhbmNlKHgsIG5wLm5kYXJyYXkpOgogICAgICAgIHJldHVybiB7Il9fbmRhcnJheV9fIjogVHJ1ZSwgInNoYXBlIjogbGlzdCh4LnNoYXBlKSwgImR0eXBlIjogc3RyKHguZHR5cGUpfQogICAgaWYgaGFzYXR0cih4LCAiX19kaWN0X18iKToKICAgICAgICByZXR1cm4geC5fX2RpY3RfXwogICAgcmV0dXJuIHN0cih4KQoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUpCmNsYXNzIFJ1blBhdGhzOgogICAgcm9vdDogUGF0aAogICAgb3V0X2RpcjogUGF0aAogICAgY2FjaGVfZGlyOiBQYXRoCgoKZGVmIG1ha2VfcnVuX3BhdGhzKHJvb3Q6IFVuaW9uW3N0ciwgUGF0aF0sIGV4cGVyaW1lbnQ6IHN0cikgLT4gUnVuUGF0aHM6CiAgICByb290ID0gUGF0aChyb290KQogICAgb3V0X2RpciA9IGVuc3VyZV9kaXIocm9vdCAvICJyZXN1bHRzIiAvIGV4cGVyaW1lbnQpCiAgICBjYWNoZV9kaXIgPSBlbnN1cmVfZGlyKHJvb3QgLyAiLmNhY2hlIiAvIGV4cGVyaW1lbnQpCiAgICByZXR1cm4gUnVuUGF0aHMocm9vdD1yb290LCBvdXRfZGlyPW91dF9kaXIsIGNhY2hlX2Rpcj1jYWNoZV9kaXIpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBUYWJsZSBmb3JtYXR0aW5nCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBmb3JtYXRfdGFibGUocm93czogU2VxdWVuY2VbTWFwcGluZ1tzdHIsIEFueV1dLCBjb2x1bW5zOiBPcHRpb25hbFtTZXF1ZW5jZVtzdHJdXSA9IE5vbmUsICosCiAgICAgICAgICAgICAgICAgZmxvYXRmbXQ6IHN0ciA9ICIuNmciKSAtPiBzdHI6CiAgICAiIiJSZXR1cm4gYSBHaXRIdWItZmxhdm9yZWQgbWFya2Rvd24gdGFibGUgZnJvbSBhIGxpc3Qgb2YgZGljdC1saWtlIHJvd3MuIiIiCiAgICBpZiBub3Qgcm93czoKICAgICAgICByZXR1cm4gIiIKICAgIGNvbHMgPSBsaXN0KGNvbHVtbnMpIGlmIGNvbHVtbnMgaXMgbm90IE5vbmUgZWxzZSBzb3J0ZWQoe2sgZm9yIHIgaW4gcm93cyBmb3IgayBpbiByLmtleXMoKX0pCiAgICBkZWYgZm10KHY6IEFueSkgLT4gc3RyOgogICAgICAgIGlmIHYgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuICIiCiAgICAgICAgaWYgaXNpbnN0YW5jZSh2LCAoZmxvYXQsIG5wLmZsb2F0aW5nKSk6CiAgICAgICAgICAgIHJldHVybiBmb3JtYXQoZmxvYXQodiksIGZsb2F0Zm10KQogICAgICAgIHJldHVybiBzdHIodikKICAgIGhlYWRlciA9ICJ8ICIgKyAiIHwgIi5qb2luKGNvbHMpICsgIiB8IgogICAgc2VwID0gInwgIiArICIgfCAiLmpvaW4oWyItLS0iXSAqIGxlbihjb2xzKSkgKyAiIHwiCiAgICBib2R5ID0gWyJ8ICIgKyAiIHwgIi5qb2luKGZtdChyLmdldChjLCAiIikpIGZvciBjIGluIGNvbHMpICsgIiB8IiBmb3IgciBpbiByb3dzXQogICAgcmV0dXJuICJcbiIuam9pbihbaGVhZGVyLCBzZXBdICsgYm9keSkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIENhY2hlZCBkaWFnbm9zdGljcwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX2Fycl9rZXkoYTogbnAubmRhcnJheSwgKiwgZGlnZXN0X3NpemU6IGludCA9IDE2KSAtPiBUdXBsZVtzdHIsIFR1cGxlW2ludCwgLi4uXSwgc3RyXToKICAgIGEgPSBucC5hc2NvbnRpZ3VvdXNhcnJheShhKQogICAgaCA9IGhhc2hsaWIuYmxha2UyYihhLnZpZXcobnAudWludDgpLCBkaWdlc3Rfc2l6ZT1kaWdlc3Rfc2l6ZSkuaGV4ZGlnZXN0KCkKICAgIHJldHVybiBoLCB0dXBsZShhLnNoYXBlKSwgc3RyKGEuZHR5cGUpCgoKQGZ1bmN0b29scy5scnVfY2FjaGUobWF4c2l6ZT0yMDQ4KQpkZWYgX2NhY2hlZF9lbnRyb3B5X2Zyb21fa2V5KGtleTogVHVwbGVbc3RyLCBUdXBsZVtpbnQsIC4uLl0sIHN0cl0sIGxvZ19iYXNlOiBmbG9hdCkgLT4gZmxvYXQ6CiAgICAjIEtleS1vbmx5IGNhY2hlOyB0aGUgYWN0dWFsIGFycmF5IGNvbnRlbnQgaXMgaW5jb3Jwb3JhdGVkIHZpYSB0aGUgaGFzaC4KICAgICMgQ2FsbGVycyBzaG91bGQgY29tcHV0ZSB0aGUgZW50cm9weSBhbmQgdGhlbiBzdG9yZSBpdCB2aWEgdGhpcyBzaGltLgogICAgcmFpc2UgUnVudGltZUVycm9yKCJpbnRlcm5hbCBjYWNoZSBzaGltIG11c3Qgbm90IGJlIGNhbGxlZCBkaXJlY3RseSIpCgoKZGVmIF9jYWNoZV9zZXQoa2V5OiBUdXBsZVtzdHIsIFR1cGxlW2ludCwgLi4uXSwgc3RyXSwgbG9nX2Jhc2U6IGZsb2F0LCB2YWx1ZTogZmxvYXQpIC0+IGZsb2F0OgogICAgIyBBYnVzZSBscnVfY2FjaGUgYnkgbWVtb2l6aW5nIGEgY2xvc3VyZS1mcmVlIGZ1bmN0aW9uOyB3ZSBzdG9yZSB2aWEgX193cmFwcGVkX18uCiAgICB0cnk6CiAgICAgICAgX2NhY2hlZF9lbnRyb3B5X2Zyb21fa2V5LmNhY2hlX2NsZWFyICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHBhc3MKICAgICMgSW1wbGVtZW50IG91ciBvd24gdGlueSBkaWN0IG9uIHRoZSBmdW5jdGlvbiBvYmplY3QgdG8gYXZvaWQgZnJhZ2lsZSBscnVfY2FjaGUgaGFja3MuCiAgICBzdG9yZTogRGljdFtUdXBsZVtUdXBsZVtzdHIsIFR1cGxlW2ludCwgLi4uXSwgc3RyXSwgZmxvYXRdLCBmbG9hdF0gPSBnZXRhdHRyKF9jYWNoZV9zZXQsICJfc3RvcmUiLCB7fSkKICAgIHN0b3JlWyhrZXksIGxvZ19iYXNlKV0gPSBmbG9hdCh2YWx1ZSkKICAgIHNldGF0dHIoX2NhY2hlX3NldCwgIl9zdG9yZSIsIHN0b3JlKQogICAgcmV0dXJuIGZsb2F0KHZhbHVlKQoKCmRlZiBfY2FjaGVfZ2V0KGtleTogVHVwbGVbc3RyLCBUdXBsZVtpbnQsIC4uLl0sIHN0cl0sIGxvZ19iYXNlOiBmbG9hdCkgLT4gT3B0aW9uYWxbZmxvYXRdOgogICAgc3RvcmU6IERpY3RbVHVwbGVbVHVwbGVbc3RyLCBUdXBsZVtpbnQsIC4uLl0sIHN0cl0sIGZsb2F0XSwgZmxvYXRdID0gZ2V0YXR0cihfY2FjaGVfc2V0LCAiX3N0b3JlIiwge30pCiAgICByZXR1cm4gc3RvcmUuZ2V0KChrZXksIGxvZ19iYXNlKSkKCgpkZWYgc3BlY3RyYWxfZW50cm9weShwOiBucC5uZGFycmF5LCAqLCBiYXNlOiBmbG9hdCA9IDIuMCwgZXBzOiBmbG9hdCA9IDFlLTE1KSAtPiBmbG9hdDoKICAgICIiIlNoYW5ub24gZW50cm9weSBvZiBhIHByb2JhYmlsaXR5IHZlY3RvciAobm9ybWFsaXplZCBpZiBuZWVkZWQpLiIiIgogICAgcCA9IG5wLmFzYXJyYXkocCwgZHR5cGU9ZmxvYXQpLnJhdmVsKCkKICAgIHMgPSBmbG9hdChwLnN1bSgpKQogICAgaWYgcyA8PSAwOgogICAgICAgIHJldHVybiAwLjAKICAgIHAgPSBwIC8gcwogICAgcCA9IG5wLmNsaXAocCwgZXBzLCAxLjApCiAgICByZXR1cm4gZmxvYXQoLShwICogKG5wLmxvZyhwKSAvIG1hdGgubG9nKGJhc2UpKSkuc3VtKCkpCgoKZGVmIHZvbl9uZXVtYW5uX2VudHJvcHkocmhvOiBucC5uZGFycmF5LCAqLCBiYXNlOiBmbG9hdCA9IDIuMCwgZXBzOiBmbG9hdCA9IDFlLTE1KSAtPiBmbG9hdDoKICAgICIiIlZvbiBOZXVtYW5uIGVudHJvcHkgUyjPgSkgPSAtVHIgz4EgbG9nIM+BIGZvciBhIGRlbnNpdHkgbWF0cml4LiIiIgogICAgcmhvID0gbnAuYXNhcnJheShyaG8pCiAgICBrZXkgPSBfYXJyX2tleShyaG8pCiAgICBjYWNoZWQgPSBfY2FjaGVfZ2V0KGtleSwgYmFzZSkKICAgIGlmIGNhY2hlZCBpcyBub3QgTm9uZToKICAgICAgICByZXR1cm4gY2FjaGVkCiAgICAjIEhlcm1pdGl6ZSBmb3IgbnVtZXJpY2FsIHN0YWJpbGl0eS4KICAgIHIgPSAocmhvICsgcmhvLmNvbmooKS5UKSAvIDIuMAogICAgZXZhbHMgPSBucC5saW5hbGcuZWlndmFsc2gocikKICAgIGV2YWxzID0gbnAuY2xpcChucC5yZWFsKGV2YWxzKSwgMC4wLCAxLjApCiAgICB2YWwgPSBzcGVjdHJhbF9lbnRyb3B5KGV2YWxzLCBiYXNlPWJhc2UsIGVwcz1lcHMpCiAgICByZXR1cm4gX2NhY2hlX3NldChrZXksIGJhc2UsIHZhbCkKCgpkZWYgcHVyaXR5KHJobzogbnAubmRhcnJheSkgLT4gZmxvYXQ6CiAgICAiIiJQdXJpdHkgVHIoz4HCsikuIiIiCiAgICByID0gbnAuYXNhcnJheShyaG8pCiAgICByZXR1cm4gZmxvYXQobnAucmVhbChucC50cmFjZShyIEAgcikpKQoKCmRlZiBwYXJ0aWNpcGF0aW9uX3JhdGlvKHZlYzogbnAubmRhcnJheSwgKiwgZXBzOiBmbG9hdCA9IDFlLTE1KSAtPiBmbG9hdDoKICAgICIiIkVmZmVjdGl2ZSBudW1iZXIgb2YgY29tcG9uZW50czogMSAvIHN1bSB8dl9pfF40IGZvciBub3JtYWxpemVkIHZlY3RvcnMuIiIiCiAgICB2ID0gbnAuYXNhcnJheSh2ZWMpLnJhdmVsKCkKICAgIG5ybSA9IG5wLmxpbmFsZy5ub3JtKHYpCiAgICBpZiBucm0gPD0gZXBzOgogICAgICAgIHJldHVybiAwLjAKICAgIHYgPSB2IC8gbnJtCiAgICByZXR1cm4gZmxvYXQoMS4wIC8gbnAuc3VtKG5wLmFicyh2KSAqKiA0KSkK\"}\nDIR_STATE:[\"src/experiments/__init__.py\", \"src/experiments/diagnostics.py\", \"src/experiments/random_circuit_entanglement.py\", \"src/experiments/registry.py\", \"src/experiments/shared.py\", \"src/experiments/symbolic_rg_flow.py\", \"src/experiments/toy_lattice_decoherence.py\"]\n"
        }
      ]
    },
    {
      "id": "msg_0540c5fc8e04a545006949aca51c9c819385486faf84c2a599",
      "type": "message",
      "status": "completed",
      "content": [
        {
          "type": "output_text",
          "annotations": [],
          "logprobs": [],
          "text": "FILE_EXPORT:{\"path\":\"src/experiments/shared.py\",\"size\":7062,\"encoding\":\"base64\",\"sha256\":\"052ecfd2ab3f9ffc29e0f3f6370b6a5301285c25729e146dbb69c7792011cbad\",\"content\":\"IiIiU2hhcmVkIHV0aWxpdGllcyBmb3IgdGhlIGV4cGVyaW1lbnQgc3VpdGUuCgpUaGlzIG1vZHVsZSBpcyBpbnRlbnRpb25hbGx5IGxpZ2h0d2VpZ2h0IChzdGQtbGliICsgbnVtcHkpIGFuZCBwcm92aWRlczoKLSBEZXRlcm1pbmlzdGljIFJORyBzZWVkaW5nIGFjcm9zcyBjb21tb24gbGlicmFyaWVzLgotIFNpbXBsZSwgcmVwcm9kdWNpYmxlIHJlc3VsdCBzYXZpbmcgKEpTT04vTlBaKSB3aXRoIGF0b21pYyB3cml0ZXMuCi0gU21hbGwgdGFibGUvbWFya2Rvd24gZm9ybWF0dGluZyBoZWxwZXJzLgotIENhY2hlZCBkaWFnbm9zdGljcyAoZS5nLiwgZW50cm9weS9wdXJpdHkpIGtleWVkIGJ5IGFycmF5IGNvbnRlbnQuCiIiIgoKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBhbm5vdGF0aW9ucwoKZnJvbSBkYXRhY2xhc3NlcyBpbXBvcnQgZGF0YWNsYXNzCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aApmcm9tIHR5cGluZyBpbXBvcnQgQW55LCBDYWxsYWJsZSwgRGljdCwgSXRlcmFibGUsIExpc3QsIE1hcHBpbmcsIE11dGFibGVNYXBwaW5nLCBPcHRpb25hbCwgU2VxdWVuY2UsIFR1cGxlLCBVbmlvbgppbXBvcnQgZnVuY3Rvb2xzCmltcG9ydCBoYXNobGliCmltcG9ydCBqc29uCmltcG9ydCBtYXRoCmltcG9ydCBvcwppbXBvcnQgcmFuZG9tCgppbXBvcnQgbnVtcHkgYXMgbnAKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFJORyBzZWVkaW5nCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBzZWVkX2V2ZXJ5dGhpbmcoc2VlZDogaW50KSAtPiBucC5yYW5kb20uR2VuZXJhdG9yOgogICAgIiIiU2VlZCBweXRob24vcmFuZG9tICsgbnVtcHkgYW5kIHJldHVybiBhIGZyZXNoIGRlZmF1bHQgbnVtcHkgR2VuZXJhdG9yLiIiIgogICAgc2VlZCA9IGludChzZWVkKQogICAgcmFuZG9tLnNlZWQoc2VlZCkKICAgIG5wLnJhbmRvbS5zZWVkKHNlZWQpICAjIGxlZ2FjeSBnbG9iYWwgUk5HIChzb21lIGxpYnMgc3RpbGwgdXNlIGl0KQogICAgb3MuZW52aXJvblsiUFlUSE9OSEFTSFNFRUQiXSA9IHN0cihzZWVkKQogICAgdHJ5OgogICAgICAgIGltcG9ydCB0b3JjaCAgIyB0eXBlOiBpZ25vcmUKICAgICAgICB0b3JjaC5tYW51YWxfc2VlZChzZWVkKQogICAgICAgIGlmIHRvcmNoLmN1ZGEuaXNfYXZhaWxhYmxlKCk6CiAgICAgICAgICAgIHRvcmNoLmN1ZGEubWFudWFsX3NlZWRfYWxsKHNlZWQpCiAgICAgICAgdG9yY2guYmFja2VuZHMuY3Vkbm4uZGV0ZXJtaW5pc3RpYyA9IFRydWUgICMgdHlwZTogaWdub3JlW2F0dHItZGVmaW5lZF0KICAgICAgICB0b3JjaC5iYWNrZW5kcy5jdWRubi5iZW5jaG1hcmsgPSBGYWxzZSAgIyB0eXBlOiBpZ25vcmVbYXR0ci1kZWZpbmVkXQogICAgZXhjZXB0IEV4Y2VwdGlvbjoKICAgICAgICBwYXNzCiAgICByZXR1cm4gbnAucmFuZG9tLmRlZmF1bHRfcm5nKHNlZWQpCgoKZGVmIHJuZ19mcm9tX3NlZWQoc2VlZDogT3B0aW9uYWxbaW50XSA9IE5vbmUpIC0+IG5wLnJhbmRvbS5HZW5lcmF0b3I6CiAgICAiIiJDb25zdHJ1Y3QgYSBudW1weSBHZW5lcmF0b3IgKHNlZWQ9Tm9uZSB1c2VzIGVudHJvcHkpLiIiIgogICAgcmV0dXJuIG5wLnJhbmRvbS5kZWZhdWx0X3JuZyhOb25lIGlmIHNlZWQgaXMgTm9uZSBlbHNlIGludChzZWVkKSkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFJlc3VsdCBzYXZpbmcgKGF0b21pYykKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKZGVmIGVuc3VyZV9kaXIocGF0aDogVW5pb25bc3RyLCBQYXRoXSkgLT4gUGF0aDoKICAgIHAgPSBQYXRoKHBhdGgpCiAgICBwLm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHJldHVybiBwCgoKZGVmIF9hdG9taWNfd3JpdGVfYnl0ZXMocGF0aDogUGF0aCwgZGF0YTogYnl0ZXMpIC0+IE5vbmU6CiAgICBwYXRoLnBhcmVudC5ta2RpcihwYXJlbnRzPVRydWUsIGV4aXN0X29rPVRydWUpCiAgICB0bXAgPSBwYXRoLndpdGhfc3VmZml4KHBhdGguc3VmZml4ICsgIi50bXAiKQogICAgdG1wLndyaXRlX2J5dGVzKGRhdGEpCiAgICBvcy5yZXBsYWNlKHRtcCwgcGF0aCkKCgpkZWYgc2F2ZV9qc29uKHBhdGg6IFVuaW9uW3N0ciwgUGF0aF0sIG9iajogQW55LCAqLCBpbmRlbnQ6IGludCA9IDIpIC0+IFBhdGg6CiAgICBwID0gUGF0aChwYXRoKQogICAgZGF0YSA9IGpzb24uZHVtcHMob2JqLCBpbmRlbnQ9aW5kZW50LCBzb3J0X2tleXM9VHJ1ZSwgZGVmYXVsdD1fanNvbl9kZWZhdWx0KS5lbmNvZGUoInV0Zi04IikKICAgIF9hdG9taWNfd3JpdGVfYnl0ZXMocCwgZGF0YSkKICAgIHJldHVybiBwCgoKZGVmIHNhdmVfbnB6KHBhdGg6IFVuaW9uW3N0ciwgUGF0aF0sICoqYXJyYXlzOiBucC5uZGFycmF5KSAtPiBQYXRoOgogICAgcCA9IFBhdGgocGF0aCkKICAgIHAucGFyZW50Lm1rZGlyKHBhcmVudHM9VHJ1ZSwgZXhpc3Rfb2s9VHJ1ZSkKICAgIHRtcCA9IHAud2l0aF9zdWZmaXgocC5zdWZmaXggKyAiLnRtcCIpCiAgICBucC5zYXZlel9jb21wcmVzc2VkKHRtcCwgKiphcnJheXMpCiAgICBvcy5yZXBsYWNlKHRtcCwgcCkKICAgIHJldHVybiBwCgoKZGVmIF9qc29uX2RlZmF1bHQoeDogQW55KSAtPiBBbnk6CiAgICBpZiBpc2luc3RhbmNlKHgsIChucC5pbnRlZ2VyLCBucC5pbnQ2NCkpOgogICAgICAgIHJldHVybiBpbnQoeCkKICAgIGlmIGlzaW5zdGFuY2UoeCwgKG5wLmZsb2F0aW5nLCBucC5mbG9hdDY0KSk6CiAgICAgICAgcmV0dXJuIGZsb2F0KHgpCiAgICBpZiBpc2luc3RhbmNlKHgsIG5wLm5kYXJyYXkpOgogICAgICAgIHJldHVybiB7Il9fbmRhcnJheV9fIjogVHJ1ZSwgInNoYXBlIjogbGlzdCh4LnNoYXBlKSwgImR0eXBlIjogc3RyKHguZHR5cGUpfQogICAgaWYgaGFzYXR0cih4LCAiX19kaWN0X18iKToKICAgICAgICByZXR1cm4geC5fX2RpY3RfXwogICAgcmV0dXJuIHN0cih4KQoKCkBkYXRhY2xhc3MoZnJvemVuPVRydWUpCmNsYXNzIFJ1blBhdGhzOgogICAgcm9vdDogUGF0aAogICAgb3V0X2RpcjogUGF0aAogICAgY2FjaGVfZGlyOiBQYXRoCgoKZGVmIG1ha2VfcnVuX3BhdGhzKHJvb3Q6IFVuaW9uW3N0ciwgUGF0aF0sIGV4cGVyaW1lbnQ6IHN0cikgLT4gUnVuUGF0aHM6CiAgICByb290ID0gUGF0aChyb290KQogICAgb3V0X2RpciA9IGVuc3VyZV9kaXIocm9vdCAvICJyZXN1bHRzIiAvIGV4cGVyaW1lbnQpCiAgICBjYWNoZV9kaXIgPSBlbnN1cmVfZGlyKHJvb3QgLyAiLmNhY2hlIiAvIGV4cGVyaW1lbnQpCiAgICByZXR1cm4gUnVuUGF0aHMocm9vdD1yb290LCBvdXRfZGlyPW91dF9kaXIsIGNhY2hlX2Rpcj1jYWNoZV9kaXIpCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBUYWJsZSBmb3JtYXR0aW5nCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRlZiBmb3JtYXRfdGFibGUocm93czogU2VxdWVuY2VbTWFwcGluZ1tzdHIsIEFueV1dLCBjb2x1bW5zOiBPcHRpb25hbFtTZXF1ZW5jZVtzdHJdXSA9IE5vbmUsICosCiAgICAgICAgICAgICAgICAgZmxvYXRmbXQ6IHN0ciA9ICIuNmciKSAtPiBzdHI6CiAgICAiIiJSZXR1cm4gYSBHaXRIdWItZmxhdm9yZWQgbWFya2Rvd24gdGFibGUgZnJvbSBhIGxpc3Qgb2YgZGljdC1saWtlIHJvd3MuIiIiCiAgICBpZiBub3Qgcm93czoKICAgICAgICByZXR1cm4gIiIKICAgIGNvbHMgPSBsaXN0KGNvbHVtbnMpIGlmIGNvbHVtbnMgaXMgbm90IE5vbmUgZWxzZSBzb3J0ZWQoe2sgZm9yIHIgaW4gcm93cyBmb3IgayBpbiByLmtleXMoKX0pCiAgICBkZWYgZm10KHY6IEFueSkgLT4gc3RyOgogICAgICAgIGlmIHYgaXMgTm9uZToKICAgICAgICAgICAgcmV0dXJuICIiCiAgICAgICAgaWYgaXNpbnN0YW5jZSh2LCAoZmxvYXQsIG5wLmZsb2F0aW5nKSk6CiAgICAgICAgICAgIHJldHVybiBmb3JtYXQoZmxvYXQodiksIGZsb2F0Zm10KQogICAgICAgIHJldHVybiBzdHIodikKICAgIGhlYWRlciA9ICJ8ICIgKyAiIHwgIi5qb2luKGNvbHMpICsgIiB8IgogICAgc2VwID0gInwgIiArICIgfCAiLmpvaW4oWyItLS0iXSAqIGxlbihjb2xzKSkgKyAiIHwiCiAgICBib2R5ID0gWyJ8ICIgKyAiIHwgIi5qb2luKGZtdChyLmdldChjLCAiIikpIGZvciBjIGluIGNvbHMpICsgIiB8IiBmb3IgciBpbiByb3dzXQogICAgcmV0dXJuICJcbiIuam9pbihbaGVhZGVyLCBzZXBdICsgYm9keSkKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIENhY2hlZCBkaWFnbm9zdGljcwojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpkZWYgX2Fycl9rZXkoYTogbnAubmRhcnJheSwgKiwgZGlnZXN0X3NpemU6IGludCA9IDE2KSAtPiBUdXBsZVtzdHIsIFR1cGxlW2ludCwgLi4uXSwgc3RyXToKICAgIGEgPSBucC5hc2NvbnRpZ3VvdXNhcnJheShhKQogICAgaCA9IGhhc2hsaWIuYmxha2UyYihhLnZpZXcobnAudWludDgpLCBkaWdlc3Rfc2l6ZT1kaWdlc3Rfc2l6ZSkuaGV4ZGlnZXN0KCkKICAgIHJldHVybiBoLCB0dXBsZShhLnNoYXBlKSwgc3RyKGEuZHR5cGUpCgoKQGZ1bmN0b29scy5scnVfY2FjaGUobWF4c2l6ZT0yMDQ4KQpkZWYgX2NhY2hlZF9lbnRyb3B5X2Zyb21fa2V5KGtleTogVHVwbGVbc3RyLCBUdXBsZVtpbnQsIC4uLl0sIHN0cl0sIGxvZ19iYXNlOiBmbG9hdCkgLT4gZmxvYXQ6CiAgICAjIEtleS1vbmx5IGNhY2hlOyB0aGUgYWN0dWFsIGFycmF5IGNvbnRlbnQgaXMgaW5jb3Jwb3JhdGVkIHZpYSB0aGUgaGFzaC4KICAgICMgQ2FsbGVycyBzaG91bGQgY29tcHV0ZSB0aGUgZW50cm9weSBhbmQgdGhlbiBzdG9yZSBpdCB2aWEgdGhpcyBzaGltLgogICAgcmFpc2UgUnVudGltZUVycm9yKCJpbnRlcm5hbCBjYWNoZSBzaGltIG11c3Qgbm90IGJlIGNhbGxlZCBkaXJlY3RseSIpCgoKZGVmIF9jYWNoZV9zZXQoa2V5OiBUdXBsZVtzdHIsIFR1cGxlW2ludCwgLi4uXSwgc3RyXSwgbG9nX2Jhc2U6IGZsb2F0LCB2YWx1ZTogZmxvYXQpIC0+IGZsb2F0OgogICAgIyBBYnVzZSBscnVfY2FjaGUgYnkgbWVtb2l6aW5nIGEgY2xvc3VyZS1mcmVlIGZ1bmN0aW9uOyB3ZSBzdG9yZSB2aWEgX193cmFwcGVkX18uCiAgICB0cnk6CiAgICAgICAgX2NhY2hlZF9lbnRyb3B5X2Zyb21fa2V5LmNhY2hlX2NsZWFyICAjIHR5cGU6IGlnbm9yZVthdHRyLWRlZmluZWRdCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHBhc3MKICAgICMgSW1wbGVtZW50IG91ciBvd24gdGlueSBkaWN0IG9uIHRoZSBmdW5jdGlvbiBvYmplY3QgdG8gYXZvaWQgZnJhZ2lsZSBscnVfY2FjaGUgaGFja3MuCiAgICBzdG9yZTogRGljdFtUdXBsZVtUdXBsZVtzdHIsIFR1cGxlW2ludCwgLi4uXSwgc3RyXSwgZmxvYXRdLCBmbG9hdF0gPSBnZXRhdHRyKF9jYWNoZV9zZXQsICJfc3RvcmUiLCB7fSkKICAgIHN0b3JlWyhrZXksIGxvZ19iYXNlKV0gPSBmbG9hdCh2YWx1ZSkKICAgIHNldGF0dHIoX2NhY2hlX3NldCwgIl9zdG9yZSIsIHN0b3JlKQogICAgcmV0dXJuIGZsb2F0KHZhbHVlKQoKCmRlZiBfY2FjaGVfZ2V0KGtleTogVHVwbGVbc3RyLCBUdXBsZVtpbnQsIC4uLl0sIHN0cl0sIGxvZ19iYXNlOiBmbG9hdCkgLT4gT3B0aW9uYWxbZmxvYXRdOgogICAgc3RvcmU6IERpY3RbVHVwbGVbVHVwbGVbc3RyLCBUdXBsZVtpbnQsIC4uLl0sIHN0cl0sIGZsb2F0XSwgZmxvYXRdID0gZ2V0YXR0cihfY2FjaGVfc2V0LCAiX3N0b3JlIiwge30pCiAgICByZXR1cm4gc3RvcmUuZ2V0KChrZXksIGxvZ19iYXNlKSkKCgpkZWYgc3BlY3RyYWxfZW50cm9weShwOiBucC5uZGFycmF5LCAqLCBiYXNlOiBmbG9hdCA9IDIuMCwgZXBzOiBmbG9hdCA9IDFlLTE1KSAtPiBmbG9hdDoKICAgICIiIlNoYW5ub24gZW50cm9weSBvZiBhIHByb2JhYmlsaXR5IHZlY3RvciAobm9ybWFsaXplZCBpZiBuZWVkZWQpLiIiIgogICAgcCA9IG5wLmFzYXJyYXkocCwgZHR5cGU9ZmxvYXQpLnJhdmVsKCkKICAgIHMgPSBmbG9hdChwLnN1bSgpKQogICAgaWYgcyA8PSAwOgogICAgICAgIHJldHVybiAwLjAKICAgIHAgPSBwIC8gcwogICAgcCA9IG5wLmNsaXAocCwgZXBzLCAxLjApCiAgICByZXR1cm4gZmxvYXQoLShwICogKG5wLmxvZyhwKSAvIG1hdGgubG9nKGJhc2UpKSkuc3VtKCkpCgoKZGVmIHZvbl9uZXVtYW5uX2VudHJvcHkocmhvOiBucC5uZGFycmF5LCAqLCBiYXNlOiBmbG9hdCA9IDIuMCwgZXBzOiBmbG9hdCA9IDFlLTE1KSAtPiBmbG9hdDoKICAgICIiIlZvbiBOZXVtYW5uIGVudHJvcHkgUyjPgSkgPSAtVHIgz4EgbG9nIM+BIGZvciBhIGRlbnNpdHkgbWF0cml4LiIiIgogICAgcmhvID0gbnAuYXNhcnJheShyaG8pCiAgICBrZXkgPSBfYXJyX2tleShyaG8pCiAgICBjYWNoZWQgPSBfY2FjaGVfZ2V0KGtleSwgYmFzZSkKICAgIGlmIGNhY2hlZCBpcyBub3QgTm9uZToKICAgICAgICByZXR1cm4gY2FjaGVkCiAgICAjIEhlcm1pdGl6ZSBmb3IgbnVtZXJpY2FsIHN0YWJpbGl0eS4KICAgIHIgPSAocmhvICsgcmhvLmNvbwooKS5UKSAvIDIuMAogICAgZXZhbHMgPSBucC5saW5hbGcuZWlndmFsc2gocikKICAgIGV2YWxzID0gbnAuY2xpcChucC5yZWFsKGV2YWxzKSwgMC4wLCAxLjApCiAgICB2YWwgPSBzcGVjdHJhbF9lbnRyb3B5KGV2YWxzLCBiYXNlPWJhc2UsIGVwcz1lcHMpCiAgICByZXR1cm4gX2NhY2hlX3NldChrZXksIGJhc2UsIHZhbCkKCgpkZWYgcHVyaXR5KHJobzogbnAubmRhcnJheSkgLT4gZmxvYXQ6CiAgICAiIiJQdXJpdHkgVHIoz4HCsikuIiIiCiAgICByID0gbnAuYXNhcnJheShyaG8pCiAgICByZXR1cm4gZmxvYXQobnAucmVhbChucC50cmFjZShyIEAgcikpKQoKCmRlZiBwYXJ0aWNpcGF0aW9uX3JhdGlvKHZlYzogbnAubmRhcnJheSwgKiwgZXBzOiBmbG9hdCA9IDFlLTE1KSAtPiBmbG9hdDoKICAgICIiIkVmZmVjdGl2ZSBudW1iZXIgb2YgY29tcG9uZW50czogMSAvIHN1bSB8dl9pfF40IGZvciBub3JtYWxpemVkIHZlY3RvcnMuIiIiCiAgICB2ID0gbnAuYXNhcnJheSh2ZWMpLnJhdmVsKCkKICAgIG5ybSA9IG5wLmxpbmFsZy5ub3JtKHYpCiAgICBpZiBucm0gPD0gZXBzOgogICAgICAgIHJldHVybiAwLjAKICAgIHYgPSB2IC8gbnJtCiAgICByZXR1cm4gZmxvYXQoMS4wIC8gbnAuc3VtKG5wLmFicyh2KSAqKiA0KSkK\"}\nDIR_STATE:[\"src/experiments/__init__.py\",\"src/experiments/diagnostics.py\",\"src/experiments/random_circuit_entanglement.py\",\"src/experiments/registry.py\",\"src/experiments/shared.py\",\"src/experiments/symbolic_rg_flow.py\",\"src/experiments/toy_lattice_decoherence.py\"]"
        }
      ],
      "role": "assistant"
    }
  ],
  "codeResults": []
}